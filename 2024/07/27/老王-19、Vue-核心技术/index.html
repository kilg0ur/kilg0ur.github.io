<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Kilgour Notes | Kilgour Notes</title><meta name="author" content="kilgour"><meta name="copyright" content="kilgour"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="Vue 核心技术一、Vue介绍1、Vue概念Vue 是一个 渐进式的 JavaScript 框架 官网地址: https:&#x2F;&#x2F;cn.vuejs.org&#x2F;  渐进式的理解 渐进式：逐渐增强，Vue不强求你一次性在网站中运用学习所有的语法，可以学一点用一点 库和框架的理解 库：本质上是一些方法的集合。每次调用方法，实现一个特定的功能。  框架：是一套完整的解决方案。框架实现了大部分的功能，我们需要按照">
<meta property="og:type" content="article">
<meta property="og:title" content="Kilgour Notes">
<meta property="og:url" content="http://www.kilgour.top/2024/07/27/%E8%80%81%E7%8E%8B-19%E3%80%81Vue-%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/index.html">
<meta property="og:site_name" content="Kilgour Notes">
<meta property="og:description" content="Vue 核心技术一、Vue介绍1、Vue概念Vue 是一个 渐进式的 JavaScript 框架 官网地址: https:&#x2F;&#x2F;cn.vuejs.org&#x2F;  渐进式的理解 渐进式：逐渐增强，Vue不强求你一次性在网站中运用学习所有的语法，可以学一点用一点 库和框架的理解 库：本质上是一些方法的集合。每次调用方法，实现一个特定的功能。  框架：是一套完整的解决方案。框架实现了大部分的功能，我们需要按照">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover17.jpg">
<meta property="article:published_time" content="2024-07-27T10:37:38.540Z">
<meta property="article:modified_time" content="2024-08-26T16:48:34.085Z">
<meta property="article:author" content="kilgour">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover17.jpg"><link rel="shortcut icon" href="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/logo.png"><link rel="canonical" href="http://www.kilgour.top/2024/07/27/%E8%80%81%E7%8E%8B-19%E3%80%81Vue-%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Kilgour Notes',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-27 00:48:34'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/panarama.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/5.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">35</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover17.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Kilgour Notes"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/logo.png"/><span class="site-name">Kilgour Notes</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">无题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-27T10:37:38.540Z" title="发表于 2024-07-27 18:37:38">2024-07-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-26T16:48:34.085Z" title="更新于 2024-08-27 00:48:34">2024-08-27</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">30.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>121分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Vue-核心技术"><a href="#Vue-核心技术" class="headerlink" title="Vue 核心技术"></a><code>Vue</code> 核心技术</h1><h1 id="一、Vue介绍"><a href="#一、Vue介绍" class="headerlink" title="一、Vue介绍"></a>一、<code>Vue</code>介绍</h1><h2 id="1、Vue概念"><a href="#1、Vue概念" class="headerlink" title="1、Vue概念"></a>1、<code>Vue</code>概念</h2><p><code>Vue</code> 是一个 渐进式的 <code>JavaScript</code> 框架</p>
<p>官网地址: <code>https://cn.vuejs.org/</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/4.png"></p>
<p><strong>渐进式的理解</strong></p>
<p>渐进式：<strong>逐渐增强</strong>，<code>Vue</code>不强求你一次性在网站中运用学习所有的语法，<strong>可以学一点用一点</strong></p>
<p><strong>库和框架的理解</strong></p>
<p>库：本质上是一些方法的集合。每次调用方法，实现一个特定的功能。 </p>
<p>框架：是一套完整的解决方案。框架实现了大部分的功能，我们需要按照框架的规则写代码</p>
<h2 id="2、Vue是一个MVVM的框架"><a href="#2、Vue是一个MVVM的框架" class="headerlink" title="2、Vue是一个MVVM的框架"></a>2、<code>Vue</code>是一个<code>MVVM</code>的框架</h2><p>什么是<code>MVVM</code>呢？</p>
<p><code>M</code>：<code>Model</code>数据模型(<code>ajax</code>获取到的数据)</p>
<p><code>V</code>: <code>View</code>视图（页面）</p>
<p><code>VM</code>：<code>ViewModel</code> 视图模型 (操作视图+模型）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/5.png"></p>
<p>在以前的开发中，我们只用到了<code>View</code>视图页面和<code>Model</code>数据，通过<code>ajax</code>请求获取到数据以后，在通过<code>DOM</code>的方式将数据渲染到<code>View</code>页面中。但是这种开发方式有一个问题，需要我们手动操作<code>DOM</code>,这样导致了开发效率比较低。</p>
<p>为了能够提高开发效率是否可以将<code>DOM</code>的操作做成自动的方式呢？也就是说，当数据变化了自动的渲染到页面中，不需要开发人员在操作<code>DOM</code>.</p>
<p>为了满足这个要求，出现了<code>VM(ViewModel)</code>，它可以操作<code>View(视图)</code>也可以操作<code>Model(数据)</code>。当数据(<code>Model</code>)变化的时候，<code>ViewModel</code>能够监听到这种变化，并及时通知<code>View</code>视图做出修改。同样的，当页面有事件触发的时候，<code>ViewModel</code>也能够监听到事件，并通知数据(<code>Model</code>)进行响应。所以<code>ViewModel</code>就相当于一个观察者，监控着双方的动作，并及时通知对方进行相应的操作。</p>
<p>总结：</p>
<p>之前的开发方式是<strong>原生<code>DOM</code>驱动</strong>，无论修改页面中的什么内容，先找到对象，再去操作<code>DOM</code></p>
<p>现在的开发方式是，**<code>Vue 数据驱动</code>**，要想更新页面，直接操作数据就可以了，数据变化了，视图会自动更新。</p>
<h2 id="3、Vue组件化思想"><a href="#3、Vue组件化思想" class="headerlink" title="3、Vue组件化思想"></a>3、<code>Vue</code>组件化思想</h2><p>我们知道一个网页会包含三部分，分别是<code>HTML</code>，<code>CSS</code>,<code>JS</code>.  在开发一个页面的时候，如下网站</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/112919.png"></p>
<p>以上是网易网站中的国内新闻页面，</p>
<p>我们需要将<code>html</code>代码写到一个<code>html</code>网页文件中，然后把<code>css</code>代码写到一个<code>css</code>样式文件中，把<code>javascript</code>代码写到一个<code>js</code>文件中。</p>
<p>然后在<code>html</code>网页文件中去引入<code>css</code>文件和<code>js</code>文件。</p>
<p>这样会带来一个问题，不利于代码的维护，假如<code>html</code>文件中的代码3000行，你要找其中某个版块的结构，这样查找起来比较麻烦。</p>
<p>为了解决这个问题，我们是否可以将上面的网页进行拆分，例如将头部区域的<code>html,css,js</code>作为一个整体，单独的去维护，这样代码量相对来说比较少，查找方便，容易维护。</p>
<p>这样也带来了另外一个好处，如果要开发另外一个新的页面，如下所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/113041.png"></p>
<p>以上是网易国际页面</p>
<p> 依据：功能单一   函数</p>
<p>我们发现上面的页面与前面页面头部是一样的，所以可以共用，不用单独的再去开发头 部版块了。</p>
<p>这样，我们可以将一个大的页面拆分成不同的小的模块(每个模块都是单独的一个文件)，每个模块中都包含了<code>html,css,js</code>。</p>
<p>而这些小的模块，在<code>Vue</code>中称作组件,如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/8.png"></p>
<p>一个大的页面就是有不同的组件组合而成，而这就是<code>Vue</code>组件化的思想。</p>
<p>所谓组件化，指的就是将一个完整的页面拆分成多个组件，每个组件都会包含<code>html,css,js</code>.</p>
<p>综上所述组件化的好处：</p>
<p>第一：容易维护</p>
<p>第二：便于复用。</p>
<h1 id="二、脚手架"><a href="#二、脚手架" class="headerlink" title="二、脚手架"></a>二、脚手架</h1><h2 id="1、脚手架基本介绍"><a href="#1、脚手架基本介绍" class="headerlink" title="1、脚手架基本介绍"></a>1、脚手架基本介绍</h2><p>关于<code>Vue</code>的开发方式有两种</p>
<p>第一：传统开发模式，在<code>html</code>文件中引入<code>vue</code>文件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/9.png"></p>
<p>第二：工程化开发方式：在<code>webpack</code>环境中开发<code>Vue</code>（推荐），后面的开发采用该方式。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/10.png"></p>
<p><code>webpack</code>的作用：</p>
<p><code>javascript</code> 应用程序的 <strong>静态模块打包器 (module bundler)</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/11.png"></p>
<p>其中功能:</p>
<ul>
<li><code>less/sass -&gt; css</code></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/12.png"></p>
<ul>
<li><code>ES6/7/8 -&gt; ES5 处理js兼容</code></li>
<li>支持<code>js</code>模块化   export import</li>
<li>处理<code>css</code>兼容性  </li>
<li><code>html/css/js</code> -&gt; 压缩合并</li>
</ul>
<p>问题：自己配置<code>Webpack</code>非常痛苦，有没有一套搭建好的，拿来即用的环境呢？</p>
<p>这就是脚手架的工作。</p>
<p>脚手架，在日常生活中脚手架非常常见，主要作用就是为了保证各施工过程顺利进行而搭设的工作平台，</p>
<p>而<code>Vue</code>脚手架可以帮助我们快速的创建一个<code>Vue</code>项目的基础架子。<code>Vue</code>脚手架叫做<code>@vue/cli</code>,它是<code>Vue</code>官方所提供的一个全局命令工具。</p>
<p><code>Vue</code>脚手架有什么好处呢？</p>
<p>第一：开箱即用</p>
<p>第二：零配置(不用你配置<code>webpack</code>)</p>
<p>第三：内置了<code>babel</code>等工具。</p>
<h2 id="2、Vue脚手架的基本使用"><a href="#2、Vue脚手架的基本使用" class="headerlink" title="2、Vue脚手架的基本使用"></a>2、<code>Vue</code>脚手架的基本使用</h2><p>要想使用<code>@vue/cli</code>脚手架搭建<code>Vue</code>项目，需要先进行安装。</p>
<p><strong>2.1 安装方式采用全局安装</strong></p>
<p>命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i @vue/cli -g 或  yarn global add @vue/cli</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>当然，首先必须在电脑中安装<code>node.js</code>环境</p>
<p>查看<code>node</code> 和 <code>npm</code>的版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v #查看node版本</span><br><span class="line"> npm  -v #查看npm版本</span><br></pre></td></tr></table></figure>

<p><strong><code>**npm</code>淘宝镜像</strong>**</p>
<p><code>npm</code>是非常重要的<code>npm</code>管理工具,由于<code>npm</code>的服务器位于国外, 所以一般建议 将 <code>npm</code>设置成国内的淘宝镜像</p>
<p>设置淘宝镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ npm config set registry  https://registry.npm.taobao.org/  #设置淘宝镜像地址</span><br><span class="line"></span><br><span class="line">npm config set registry https://registry.npmmirror.com  #设置淘宝镜像地址(最新镜像地址)</span><br><span class="line"></span><br><span class="line">$ npm config get registry  #查看镜像地址</span><br></pre></td></tr></table></figure>

<p><strong>查看脚手架版本：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue --version</span><br></pre></td></tr></table></figure>

<p><strong>2.2、使用脚手架搭建<code>Vue3</code>开发环境</strong></p>
<p>在指定的目录下面执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create 项目名称（项目名称自己定义，并且不能出现中文，以及大写字母）</span><br></pre></td></tr></table></figure>

<p>使用以上命令创建项目的时候，有可能会出现了如下错误</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue : 无法加载文件 C:\XXX\AppData\Roaming\npm\vue.ps1，因为在此系统上禁止运行脚本。</span><br></pre></td></tr></table></figure>

<p>参考解决方案：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/ying456baby/article/details/126379392</span><br></pre></td></tr></table></figure>

<p>第一：以管理身份启动命令窗口</p>
<p>第二：在终端窗口输入<code> **set-ExecutionPolicy RemoteSigned**</code></p>
<p> 输入命令查看 <code>**get-ExecutionPolicy**</code> 为 <code>“**RemoteSigned**”</code></p>
<p>项目创建的步骤如下</p>
<p>第一步：打开命令行窗口(以管理员身份)</p>
<p>第二步：在打开的命令行窗口中输入<code>vue create 项目名称</code></p>
<p>第三步： 选择<code>Vue3</code>项目（关于自定义的方式，我们后面做项目的时候，在进行讲解）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/1.png"></p>
<p><strong>2.3 项目创建好以后 <code>cd</code> 进入目录，启动项目, 打包项</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启动项目：yarn serve 或 npm run serve</span><br><span class="line">打包项目：yarn build 或 npm run buil</span><br></pre></td></tr></table></figure>

<h2 id="3、如何覆盖脚手架下的webpack配置-96"><a href="#3、如何覆盖脚手架下的webpack配置-96" class="headerlink" title="3、如何覆盖脚手架下的webpack配置&#96;"></a>3、如何覆盖脚手架下的<code>webpack</code>配置&#96;</h2><p>我们说 <code>@vue/cli </code>脚手架集成了<code> webpack，</code>但是我们怎么没有看到 <code>webpack.config.js</code> 呢?</p>
<p>注意：我们在项目无法找到<code>webpack.config.js</code>文件，因为<code>vue</code>把它隐藏了</p>
<p>如果需要覆盖<code>webpack</code>的配置，可以修改<code>vue.config.js</code>文件，覆盖<code>webpack</code>配置</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/13.png"></p>
<p>注意：修改了配置，需要重新启动项目。</p>
<h2 id="4、脚手架目录分析"><a href="#4、脚手架目录分析" class="headerlink" title="4、脚手架目录分析"></a>4、脚手架目录分析</h2><p>问题: 脚手架所创建的<code>Vue</code>项目里各个文件及代码都有什么作用呢?</p>
<p>下面，我们就来了解一下项目中文件夹和文件的含义。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/14.png"></p>
<p><code>src</code>目录是我们后面编程中经常使用到的目录。这里我们可以暂时先将该目录中使用不到的文件删除掉。</p>
<ol>
<li><p><code>public/index.html</code>不用动，提供一个最基础的页面</p>
</li>
<li><p><code>src/main.js</code>不用动， 渲染了<code>App.vue</code>组件</p>
</li>
<li><p><code>src/App.vue</code>默认有很多的内容，可以全部删除</p>
</li>
<li><p><code>assets</code> 文件夹 和 components 直接删除</p>
</li>
</ol>
<p>通过本小节的学习，大家需要对脚手架里主要文件的左右有一个基本的了解</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/16.png"></p>
<p>这里还需要注意一个小的问题：在使用<code>vscode</code>编写<code>vue</code>代码之前，最好在<code>vscode</code>中安装相应的插件，方便有代码提示</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/17.png"></p>
<h2 id="5、单文件组件"><a href="#5、单文件组件" class="headerlink" title="5、单文件组件"></a>5、单文件组件</h2><p><code>.vue</code> 文件是什么文件呢？ 以前怎么没见过呢</p>
<p>一个单文件组件由三部分组成:</p>
<p><code> template</code>：表示结构 （有且只能一个根元素） </p>
<p><code>script</code>:<code>表示js</code>逻辑 </p>
<p><code>style</code>： 表示样式</p>
<h1 id="三、Vue插值表达式"><a href="#三、Vue插值表达式" class="headerlink" title="三、Vue插值表达式"></a>三、<code>Vue</code>插值表达式</h1><h2 id="1、Vue如何提供数据"><a href="#1、Vue如何提供数据" class="headerlink" title="1、Vue如何提供数据"></a>1、<code>Vue</code>如何提供数据</h2><p>问题:<code> vue</code>是数据驱动的，应该如何提供数据，将来控制视图呢?</p>
<p>第一：通过 <code>data</code> 属性可以提供数据， <code>data</code>属性必须是一个函数</p>
<p>第二：这个函数需要返回一个对象，这个对象就代表<code>vue</code>提供的数据</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/18.png"></p>
<p>使用插值表达式，可以在模板中渲染数据：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/19.png"></p>
<h2 id="2、插值表达式的语法"><a href="#2、插值表达式的语法" class="headerlink" title="2、插值表达式的语法"></a>2、插值表达式的语法</h2><p>插值表达式的作用就是使用<code>data</code>中的数据来渲染视图(模板)，它的语法如下所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%8F%92%E5%80%BC%E8%A1%A8%E8%BE%BE%E5%BC%8F.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">通过上图可以看到，插值表达式也是支持三元运算符的。</span><br><span class="line"></span><br><span class="line">在使用插值表达式的时候，还需要注意以下三点：</span><br><span class="line"></span><br><span class="line">（1）使用数据在` data` 中必须存在 </span><br><span class="line"></span><br><span class="line">（2）能使用表达式，但是不能使用语句` if for ... `</span><br><span class="line"></span><br><span class="line">（3）不能在标签属性中使用 &#123;&#123; &#125;&#125;。</span><br></pre></td></tr></table></figure>

<p>具体代码演示如下图所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      <span class="attr">money</span>:<span class="number">100</span>,</span><br><span class="line">      <span class="attr">username</span>:<span class="string">&quot;zs&quot;</span>,</span><br><span class="line">      <span class="attr">obj</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;lisi&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">16</span>,</span><br><span class="line">        <span class="attr">desc</span>:<span class="string">&#x27;大帅哥&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>App.vue</code>组件中提供了相应的数据，下面看一下模板中是怎样使用插值表达式将数据渲染到模板中的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img alt=&quot;Vue logo&quot; src=&quot;./assets/logo.png&quot;&gt;</span><br><span class="line">  &lt;span&gt;&#123;&#123; money &#125;&#125;&lt;/span&gt;</span><br><span class="line">  &lt;span&gt;&#123;&#123; username &#125;&#125;&lt;/span&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; obj.name &#125;&#125;</span><br><span class="line">    &#123;&#123; obj.age&gt;18?&quot;成年&quot;:&quot;未成年&quot; &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h1 id="四、指令"><a href="#四、指令" class="headerlink" title="四、指令"></a>四、指令</h1><h2 id="1、什么是指令"><a href="#1、什么是指令" class="headerlink" title="1、什么是指令"></a>1、什么是指令</h2><p><code>Vue</code>指令：特殊的 <code>html </code>标签属性, 特点:<code>v-</code>开头</p>
<p>每个 v- 开头的指令, 都有着自己独立的功能, 将来<code>vue</code>解析时, 会根据不同的指令提供不同的功能</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E6%8C%87%E4%BB%A41.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-text=&quot;username&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2、v-bind指令"><a href="#2、v-bind指令" class="headerlink" title="2、v-bind指令"></a>2、<code>v-bind</code>指令</h2><p>插值表达式不能用在<code>html</code>的属性上，<strong>想要动态的设置<code>html</code>元素属性</strong>，需要使用<code>v-bind</code>指令</p>
<p>所以说，<code>v-bind</code>指令的作用就是用来动态设置<code>html</code>标签属性。</p>
<p>它的语法是：·<code>v-bind:属性名 = &quot;值&quot;</code></p>
<p>我们一般都是使用简写的形式：<code>:属性名 = &quot;值&quot;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:title=&quot;obj.desc&quot;&gt;hello&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>下面再来看一下简写的形式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :title=&quot;obj.desc&quot;&gt;hello&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a :href=&quot;link&quot;&gt;百度&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      <span class="attr">money</span>:<span class="number">100</span>,</span><br><span class="line">      <span class="attr">username</span>:<span class="string">&quot;zs&quot;</span>,</span><br><span class="line">      <span class="attr">obj</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;lisi&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">16</span>,</span><br><span class="line">        <span class="attr">desc</span>:<span class="string">&#x27;大帅哥&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">link</span>:<span class="string">&quot;https://www.baidu.com&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>注意：在给标签添加属性的时候，如果是采用如下的写法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">title</span>=<span class="string">&#x27;msg&#x27;</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>表示的是给<code>div</code>这个标签设置了<code>title</code>属性，该属性的值是字符串<code>msg</code>.</p>
<p>但是如果采用如下的写法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :title=&#x27;msg&#x27;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>表示的是给<code>div</code>这个标签设置了<code>title</code>属性，该属性的值是来自<code>msg</code>这个变量，而该变量需要在<code>data</code>中进行定义。</p>
<h2 id="3、v-on指令"><a href="#3、v-on指令" class="headerlink" title="3、v-on指令"></a>3、<code>v-on</code>指令</h2><p>这里有一个问题，需要我们思考一下：在<code>Vue</code>中如何给按钮绑定点击事件呢？</p>
<p>这里需要使用到<code>v-on</code>指令，该指令的作用就是注册事件。</p>
<p>该指令有三种使用方式，如下所示：</p>
<p>第一：<code>v-on</code>:事件名&#x3D;“要执行的少量代码”</p>
<p>第二：<code>v-on:</code>事件名&#x3D;”methods中的函数名”</p>
<p>第三：<code>v-on</code>:事件名&#x3D;“methods中的函数名(实参)”</p>
<p>下面我们先来看第一种方式的使用情况，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-on:click=&quot;obj.age++&quot;&gt;搬砖&lt;/button&gt;</span><br><span class="line"> 年龄&#123;&#123; obj.age &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>通过上图展示的代码，我们可以看到，如果计算比较简单，只需要少量代码就可以完成，这样就没有必要在将代码封装到方法里了，只需要写到模板中就可以了。</p>
<p>下面我们再来看第二种使用方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;button v-on:click=&quot;obj.age++&quot;&gt;搬砖&lt;/button&gt;</span><br><span class="line">  年龄&#123;&#123; obj.age &#125;&#125;</span><br><span class="line">  &lt;hr/&gt;</span><br><span class="line">&lt;!--第二种方式--&gt;</span><br><span class="line">  &lt;button v-on:click=&quot;addAge&quot;&gt;计算年龄&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="keyword">return</span>&#123;</span><br><span class="line">     <span class="attr">money</span>:<span class="number">100</span>,</span><br><span class="line">     <span class="attr">username</span>:<span class="string">&quot;zs&quot;</span>,</span><br><span class="line">     <span class="attr">obj</span>:&#123;</span><br><span class="line">       <span class="attr">name</span>:<span class="string">&#x27;lisi&#x27;</span>,</span><br><span class="line">       <span class="attr">age</span>:<span class="number">16</span>,</span><br><span class="line">       <span class="attr">desc</span>:<span class="string">&#x27;大帅哥&#x27;</span></span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="attr">link</span>:<span class="string">&quot;https://www.baidu.com&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br><span class="line">     <span class="comment">// 添加mehtods属性，指定方法</span></span><br><span class="line"> <span class="attr">methods</span>:&#123;</span><br><span class="line">   <span class="title function_">addAge</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">obj</span>.<span class="property">age</span>=<span class="variable language_">this</span>.<span class="property">obj</span>.<span class="property">age</span>+<span class="number">1</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>在模板中，给<code>v-on:click</code>指定的是<code>addAge</code>这个方法名。问题是<code>addAge</code>这个方法应该定义在什么地方呢？</p>
<p>这里需要注意的就是方法需要定义在<code>methods</code>中，<code>methods</code>是一个属性，该属性的值是一个对象，在对象中定义了方法。</p>
<p>同时<code>data</code>这个选项和<code>methods</code>这个选项之间需要使用英文的逗号进行分隔，如果漏掉英文的逗号，程序会出现错误。</p>
<p>在<code>addAge</code>这个方法中，我们需要对定义在<code>data</code>中的数据进行计算，这里就涉及到一个问题，怎样获取<code>data</code>中定义的数据呢？</p>
<p>在<code>methods</code>选项中定义的所有方法，如果要访问或者是修改<code>data</code>中的数据，需要使用到<code>this</code>这个关键字，<code>this</code>表示的是当前<code>vue</code>实例。</p>
<p>通过<code>this</code>关键字就可以获取到<code>data</code>中定义的数据。</p>
<p>但是，这里需要大家注意的一点是，整个过程中我们并没有操作<code>DOM</code>，而只是操作数据，当数据发生了改变，视图也会发生相应的变化。</p>
<p>下面我们再来看第三种使用方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-on:click=&quot;addAge(2)&quot;&gt;计算年龄&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">   <span class="title function_">addAge</span>(<span class="params">age</span>)&#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">obj</span>.<span class="property">age</span>=<span class="variable language_">this</span>.<span class="property">obj</span>.<span class="property">age</span>+age;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：如果在<code>methods</code>中定义的不同方法之间也要使用英文的逗号进行分隔。</strong></p>
<p>当然，需要传递多少个参数，根据实际情况来确定。</p>
<p>每次使用<code>v-on</code>的时候写起来比较麻烦，我们可以直接将其简写为<code>@事件名</code>的形式, 如下图所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;addAge(2)&quot;&gt;计算年龄&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4、如何获取事件对象"><a href="#4、如何获取事件对象" class="headerlink" title="4、如何获取事件对象"></a>4、如何获取事件对象</h2><p>默认<code>a</code>标签点击会跳走, 希望阻止默认的跳转, 应该如何操作呢？如何阻止默认行为呢？</p>
<p>语法：<code>e.preventDefault()</code></p>
<p><code>vue</code>中如何获取事件对象呢？</p>
<p>关于<code>Vue</code>中获取事件对象，有两种情况</p>
<p>第一：如果没有传参，通过形参接收<code>e</code></p>
<p>第二：如果传参了，通过<code>$event</code>指定事件对象<code>e</code>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a :href=&quot;link&quot; @click=&quot;fn&quot;&gt;百度&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="title function_">addAge</span>(<span class="params">age</span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">obj</span>.<span class="property">age</span>=<span class="variable language_">this</span>.<span class="property">obj</span>.<span class="property">age</span>+age;</span><br><span class="line">    &#125;, <span class="comment">// 注意分号</span></span><br><span class="line">        <span class="comment">// 定义了fn方法，通过参数e指定事件对象</span></span><br><span class="line">    <span class="title function_">fn</span>(<span class="params">e</span>)&#123;</span><br><span class="line">      e.<span class="title function_">preventDefault</span>();</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;单击了超链接&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>下面看一下第二种情况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a :href=&quot;link&quot; @click=&quot;fn(100,$event)&quot;&gt;百度&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fn</span>(<span class="params">num,e</span>)&#123;</span><br><span class="line">     e.<span class="title function_">preventDefault</span>();</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;num参数的值是:&quot;</span>+num);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>当单击<code>去百度</code>这链接的时候，会触发单击事件<code>click</code>，从而调用<code>fn</code>这个方法，在调用该方法的时候，没有传递任何的参数，所以在<code>fn</code>这个方法中通过形参<code>e</code>来获取事件对象。</p>
<p>而当单击<code>去百度2</code>这个链接的时候，也会触发单击事件<code>click</code>，调用<code>fn2</code>这个方法，这时候需要通过<code>$event</code>指定事件对象<code>e</code>.</p>
<h2 id="5、事件修饰符"><a href="#5、事件修饰符" class="headerlink" title="5、事件修饰符"></a>5、事件修饰符</h2><p><code>e.preventDefault()</code>单词很长不好写吧?</p>
<p>有没有一种更简单的方式实现呢?</p>
<p>这里就需要使用到事件修饰符</p>
<p>事件修饰符：<code>vue</code>提供事件修饰符，可以快速阻止默认行为或阻止冒泡</p>
<p><code>.prevent </code>阻止默认行为，<code>.stop</code>阻止冒泡</p>
<p>使用方式：<code>@事件名.prevent</code>  ，<code>@事件名.stop</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div @click=&quot;fatherFn&quot;&gt;</span><br><span class="line">  &lt;a href=&quot;https://www.jd.com&quot; @click.prevent.stop=&quot;fn1&quot;&gt;京东&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fn1</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;去京东&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">fatherFn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;父元素&#x27;</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>在第一个超链接和第二个超链接中，即指定了<code>.prevent</code>又指定了<code>.stop</code>.表示的含义是：当单击两个链接的时候，分别会执行<code>fn1</code>和<code>fn2</code>两个函数，但是由于添加了<code>.prevent</code>事件修饰符,所以不会跳转到<code>京东与淘宝</code>。同时由于添加了<code>.stop</code>这个事件修饰符，这里可以阻止冒泡，所以对应的两个<code>a</code>元素的父元素<code>div</code>中的单击事件不会触发，对应的<code>fatherFn</code>这个方法不会被调用。</p>
<p>注意：以上事件修饰符的使用方式，采用的是链式的写法，但是<code>.prevent</code>和<code>.stop</code>两个修饰符没有顺序的限制。</p>
<h2 id="6、按键修饰符"><a href="#6、按键修饰符" class="headerlink" title="6、按键修饰符"></a>6、按键修饰符</h2><p>我想判断用户是否按下回车了怎么做?</p>
<p>在监听键盘事件时，我们经常需要判断详细的按键。可用按键修饰符。</p>
<p>需求: 用户输入内容, 回车时, 打印输入的内容</p>
<p><code>@keyup.enter</code> 监听回车键</p>
<p><code>@keyup.esc </code>监听返回键</p>
<p>下面看一下具体的代码实现</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line"> &lt;input @keyup=&quot;handleKeyUp&quot;  /&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleKeyUp</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开始搜索&quot;</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>注意：在上图所展示的代码中，我们仅仅给<code>input</code>标签指定了<code>@keyup</code>事件。这样导致的结果是：当在文本框中输入任何内容的时候，都会调用<code>handleKeyup</code>这个方法，原因是<code>@keyup</code>监听的是键盘的弹起，也就是说键盘上的任意按键的弹起都会被监听到。</p>
<p>而这里，我们要求的是，用户在文本框中输入了内容后，按下回车键的时候，才会去调用<code>handleKeyup</code>这个方法打印相关的内容。</p>
<p>修改后的代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleKeyUp</span>(<span class="params">e</span>)&#123;</span><br><span class="line">     <span class="keyword">if</span>(e.<span class="property">key</span>===<span class="string">&#x27;Enter&#x27;</span>)&#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开始搜索&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line">   </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们是通过事件对象<code>e</code>来获取对应的<code>key</code>属性的值，判断是否是<code>Enter</code>。如果是，表示用户按下了回车键，这时候才会打印相关的内容。</p>
<p>这种处理方式可以满足我们的需求，但是写法上比较繁琐。</p>
<p>下面使用按键修饰符:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;input @keyup.enter=&quot;handleKeyUp&quot;  /&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleKeyUp</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="comment">// if(e.key===&#x27;Enter&#x27;)&#123;</span></span><br><span class="line">     <span class="comment">//   console.log(&quot;开始搜索&quot;);</span></span><br><span class="line">     <span class="comment">// &#125;</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开始搜索&quot;</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>在这里我们给<code>input</code>文本框添加了<code>@keyup.enter</code>,表示只有当用户按下了回车键后，才会执行<code>handleKeyup</code>这个方法打印相关的内容。当然在<code>handleKeyup</code>方法中不用在通过事件对象做按键的判断了。</p>
<p>这种写法更加的简洁。</p>
<p>如果想获取到用户在文本框中输入的内容，还是需要通过事件对象来完成</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleKeyUp</span>(<span class="params">e</span>)&#123;</span><br><span class="line">     <span class="comment">// if(e.key===&#x27;Enter&#x27;)&#123;</span></span><br><span class="line">     <span class="comment">//   console.log(&quot;开始搜索&quot;);</span></span><br><span class="line">     <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开始搜索&quot;</span>+e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<p><code>Vue</code>内置的按键修饰符列表如下所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/15.png"></p>
<p>通过上图我们可以看到，在<code>Vue</code>中只是提供了常用了的按键修饰符，如果你想对其它的一些按键做判断，只能采用事件对象的方式，来获取对应的键盘码或者键盘标识进行判断。</p>
<h2 id="7、v-show和v-if"><a href="#7、v-show和v-if" class="headerlink" title="7、v-show和v-if"></a>7、<code>v-show</code>和<code>v-if</code></h2><p>问题：在<code>Vue</code>中如何控制盒子的显示与隐藏呢？</p>
<p>这里可以通过<code>v-show</code>或者<code>v-if</code>指令来实现。</p>
<p>下面我们先来看一下<code>v-show</code>指令。</p>
<p><code>v-show</code>指令的语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-show=&quot;布尔值&quot; (true显示, false隐藏)</span><br></pre></td></tr></table></figure>

<p><code>v-show</code>指令的取值是布尔值，如果是<code>true</code>表示显示盒子，<code>false</code>表示隐藏盒子。</p>
<p>它的实现原理：实质是在控制元素的 <code>css</code> 样式, 通过<code>display:none</code>隐藏元素</p>
<p>再来看一下<code>v-if</code>指令</p>
<p><code>v-if</code>指令的语法如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-if=&quot;布尔值&quot; (true显示, false隐藏)</span><br></pre></td></tr></table></figure>

<p><code>v-if</code>指令的取值也是布尔值，<code>true</code>表示元素的显示，<code>false</code>表示元素的隐藏。</p>
<p>它的实现原理：实质是在动态的<strong>创建 或者 删除</strong>元素节点</p>
<p>下面看一下具体的代码实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;App&quot;</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>&#123;</span><br><span class="line">            <span class="attr">isShow</span>:<span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;button @click=&quot;isShow=!isShow&quot;&gt;控制显示与隐藏&lt;/button&gt;</span><br><span class="line">        &lt;div v-show=&quot;isShow&quot;&gt;v-show控制的盒子&lt;/div&gt; &lt;!--v-show指令--&gt;</span><br><span class="line">        &lt;div v-if=&quot;isShow&quot;&gt;v-if控制的盒子&lt;/div&gt; &lt;!--v-if指令--&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<p>这里在<code>data</code>函数中定义了具体的数据<code>isShow</code>,默认值是<code>true</code></p>
<p>在模板中两个<code>h3</code>元素分别通过<code>v-show</code>和<code>v-if</code>两个指令来控制显示与隐藏，两个指令的值就是<code>isShow</code></p>
<p>当单击<code>button</code>按钮的时候，触发点击事件，将改变<code>isShow</code>数据的值。</p>
<p>返回到浏览器中进行测试的时候，发现当不断单击<code>按钮</code>时候，两个<code>h3</code>标签会不断出现显示与隐藏的效果，这里大家可以在浏览器中审查元素，就会发现两个指令在显示与隐藏元素实现原理上的区别。</p>
<p>问题：两个指令的应用场景是什么？</p>
<p>第一：如果是频繁的切换显示隐藏，用<code>v-show</code>.</p>
<p>因为<code>v-show,</code> 只是控制<code>css</code>样式，而<code>v-if</code>, 频繁切换会大量的创建和删除元素, 消耗性能</p>
<p>第二：如果是不用频繁切换,而是出现了 要么显示, 要么隐藏的情况, 适合于用 <code>v-if</code></p>
<p><code>v-if</code> 是惰性的, 如果初始值为 <code>false</code>, 那么这些元素就直接不创建了, 节省一些初始渲染开销</p>
<h2 id="8、v-else-和-v-else-if"><a href="#8、v-else-和-v-else-if" class="headerlink" title="8、v-else 和 v-else-if"></a>8、<code>v-else</code> 和 <code>v-else-if</code></h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/2.png"></p>
<p>关于<code>v-else</code>和<code>v-else-if</code>两个指令，与<code>js</code>中的<code>if..else/else if</code>执行流程是一样的、</p>
<p>例如上图展示的代码中，先判断<code>flag</code>是否为<code>true</code>，如果为<code>true</code>展示的内容就是<code>尊敬的超级vip,里面请</code>,而后面的内容不会展示，如果<code>flag</code>为<code>false</code>，则展示的内容就是<code>你谁呀，请先登录</code></p>
<p>下面紧跟着判断<code>age</code>的取值范围，根据<code>age</code>不同的值，展示不同的内容。当前定义的<code>age</code>默认值是<code>12</code>,所以打开浏览器后，在页面上默认展示的内容就是：<code>11岁-20岁 蹦迪</code></p>
<p>最后需要注意的一点就是<code>v-if，v-else,v-else-if</code>指令之间需要连接写，如下的写法是错误的。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/3.png"></p>
<p>在<code>v-if</code>与<code>v-else-if</code>之间添加了<code>div</code>标签，这时候就出错了。</p>
<h2 id="9、v-model"><a href="#9、v-model" class="headerlink" title="9、v-model"></a>9、<code>v-model</code></h2><p><strong><code>v-model</code>指令是给表单元素使用，可以实现双向数据绑定。</strong></p>
<p>什么是双向数据绑定？</p>
<p>(1) 当数据发生了变化，视图会跟着变化。</p>
<p>(2) 当视图变了，数据也会跟着变化。</p>
<p>语法: <code>v-model =&#39;变量值&#39;</code></p>
<p>代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">       &lt;input v-model=&quot;msg&quot; /&gt;</span><br><span class="line">       &lt;button @click=&quot;msg=&#x27;hello&#x27;&quot;&gt;修改msg&lt;/button&gt;</span><br><span class="line">       &lt;input v-model=&quot;msg&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>我们看到，在上图的代码中，我们在<code>data</code>中定义l了<code>msg</code>，初始值是<code>abc</code>字符串。</p>
<p>然后在模板中两个文本框通过<code>v-model</code>都绑定了<code>msg</code>，所以在页面中展示的两个文本框中的值是<code>abc</code>字符串。</p>
<p>当我们修改视图中一个文本框中的值时，另外一个文本框中的值也发生了变化，说明：修改视图，数据会发生改变。</p>
<p>当单击了<code>修改msg</code>按钮的时候，修改了<code>msg</code>数据，视图中文本框的值也发生了变化。</p>
<p>这就是我们所说的双向数据绑定。</p>
<p>当然，这里让两个文本框绑定了同一个数据，但是在实际的应用中，每个文本框都会单独的绑定一个数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">          姓名:&lt;input v-model=&quot;username&quot; /&gt;</span><br><span class="line">          密码:&lt;input v-model=&quot;password&quot; type=&quot;password&quot;/&gt;</span><br><span class="line">          &lt;button @click=&quot;login&quot;&gt;登录&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">return</span>&#123;</span><br><span class="line">           <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">           <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">           <span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">methods</span>:&#123;</span><br><span class="line">       <span class="title function_">login</span>(<span class="params"></span>)&#123;</span><br><span class="line">           <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;用户登录:&quot;</span>,<span class="variable language_">this</span>.<span class="property">username</span>,<span class="variable language_">this</span>.<span class="property">password</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>在模板中添加了<code>登录</code>按钮，并且注册了单击事件，事件触发以后会调用<code>login</code>方法。在该方法中可以通过<code>this.username</code>和<code>this.password</code>来获取用户输入的姓名和密码。这就是视图发生了变化，数据也会进行改变。这里大家可以与传统的<code>js</code>编程做一下对比，这里不需要操作<code>DOM</code>，直接操作数据，更加的方便。</p>
<p><strong>综上所述，<code>v-model</code>可以快速的收集和设置表单中的数据。</strong></p>
<h2 id="10、v-model-处理其他表单元素"><a href="#10、v-model-处理其他表单元素" class="headerlink" title="10、v-model 处理其他表单元素"></a>10、<code>v-model</code> 处理其他表单元素</h2><p>在这一小节中，我们看一下<code>v-model</code>处理其他的表单元素。</p>
<p>先来看一下对下拉框的处理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">       &lt;select v-model=&quot;cityId&quot;&gt;</span><br><span class="line">           &lt;option value=&quot;101&quot;&gt;北京&lt;/option&gt;</span><br><span class="line">           &lt;option value=&quot;102&quot;&gt;上海&lt;/option&gt;</span><br><span class="line">           &lt;option value=&quot;103&quot;&gt;广州&lt;/option&gt;</span><br><span class="line">           &lt;option value=&quot;104&quot;&gt;深圳&lt;/option&gt;</span><br><span class="line">       &lt;/select&gt;&#123;&#123;cityId&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span>&#123;</span><br><span class="line">          <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">          <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">          <span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="attr">cityId</span>:<span class="number">103</span> <span class="comment">// 定义了cityId,默认值是103</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>这里定义了<code>cityId</code>数据，初始值是<code>103</code>,并且通过<code>v-model</code>与<code>select</code>标签进行了绑定。</p>
<p>这时候，打开浏览器查看，就会发现下拉框中默认选中的就是<code>广州</code>这一项，因为它的<code>option</code>选项中<code>value</code>属性的值就是<code>103</code>.</p>
<p>并且在下拉框旁边会展示出<code>cityId</code>的值。</p>
<p><strong>下面再来看一下复选框的使用</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">     是否单身：&lt;input type=&quot;checkbox&quot; v-model=&quot;isSingle&quot;/&gt; &#123;&#123; isSingle &#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">return</span>&#123;</span><br><span class="line">           <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">           <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">           <span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">cityId</span>:<span class="number">103</span>,</span><br><span class="line">           <span class="attr">isSingle</span>:<span class="literal">false</span> <span class="comment">// 定义了isSingle属性</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>

<p>这里定义了<code>isSingle</code>数据，初始值是<code>false</code>，并且通过<code>v-model</code>与复选框进行了绑定，看一下效果，这时候，我们可以看到复选框是不会被选中的。</p>
<p>当选中了复选框以后，<code>isSingle</code>的值就会变成<code>true</code>，也就表示复选框被选中了。</p>
<p>关于其它的表单元素，在后面使用到的时候在进行讲解。</p>
<h2 id="11、v-model修饰符"><a href="#11、v-model修饰符" class="headerlink" title="11、v-model修饰符"></a>11、<code>v-model</code>修饰符</h2><p>语法: <code>v-model.修饰符</code>&#x3D;”数据变量”</p>
<p>(1) <code>.number</code>转数字，以<code>parseFloat</code>t转成数字类型</p>
<p>(2) <code>.trim 去除首尾空白字符</code></p>
<p>(3)  <code>.lazy</code> 在<code>change</code>时触发而非<code>input</code>时</p>
<p>下面先来看一下<code>.number</code>的使用，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">     年龄：&lt;input type=&quot;text&quot; v-model=&quot;age&quot;/&gt;&#123;&#123; age &#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>&#123;</span><br><span class="line">            <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">            <span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">cityId</span>:<span class="number">103</span>,</span><br><span class="line">            <span class="attr">isSingle</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">age</span>:<span class="number">18</span> <span class="comment">// 定义了age属性</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，定义了<code>age</code>数据，默认值是18，并且与<code>年龄</code>文本框进行了绑定，这时候文本框中会展示18.</p>
<p>这里如果我们在文本框中输入的字符串也是没有问题的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">年龄：&lt;input type=&quot;text&quot; v-model.number=&quot;age&quot;/&gt;&#123;&#123;  age &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>这时候在输入字符串，视图页面中没有变化（注意：在数字后面输入字符串）</p>
<p>注意：如果用户在<code>年纪</code>文本框中输入了一个字符串<code>abc</code>，这时候是无法进行转换的，这时候<code>age</code>中的值就是<code>abc</code>字符串，<strong>当然，后面我们也会对文本框进行校验。</strong></p>
<p><strong>下面再来看一下<code>.trim</code>修饰符的使用</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">       标题：&lt;input v-model=&quot;title&quot;/&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">return</span>&#123;</span><br><span class="line">           <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">           <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">           <span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">cityId</span>:<span class="number">103</span>,</span><br><span class="line">           <span class="attr">isSingle</span>:<span class="literal">false</span>,</span><br><span class="line">           <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">           <span class="attr">title</span>:<span class="string">&#x27;hello&#x27;</span> <span class="comment">// 定义了title</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>

<p>这时候在文本框中会默认显示<code>hello</code>这个字符串，当然，这里我们可以在该字符串前面输入空格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">   标题：&lt;input v-model.trim=&quot;title&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>当添加了.trim<code>这个修饰符以后，在</code>hello&#96;这个字符串前输入空格的时候，会自动的清除掉空格。</p>
<p><strong>最后再来看一下<code>.</code>lazy修饰符的使用</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">       描述：&lt;input v-model=&quot;desc&quot; /&gt;&#123;&#123; desc &#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">return</span>&#123;</span><br><span class="line">           <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">           <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">           <span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">cityId</span>:<span class="number">103</span>,</span><br><span class="line">           <span class="attr">isSingle</span>:<span class="literal">false</span>,</span><br><span class="line">           <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">           <span class="attr">title</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">           <span class="attr">desc</span>:<span class="string">&#x27;&#x27;</span> <span class="comment">// 定义desc属性</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>

<p>默认情况下<code>描述</code>这个文本框只是通过<code>v-model</code>与<code>desc</code>进行了绑定，这时候在文本框中输入内容<code>desc</code>中的数据就会发生变化</p>
<p>出现这个情况的原因是，当给<code>文本框</code>添加了<code>v-model</code>以后，<code>Vue</code>会给文本框添加一个<code>input</code>事件，这样用户只要在文本框中输入内容，<code>input</code>事件就会触发。也就是说<code>input</code>事件是实时触发，只要修改文本框内容，就会触发。</p>
<p>还有一个事件是<code>change</code>事件，当在文本框中输入完内容并且失去焦点后或者是按下回车键的时候，触发<code>change</code>事件。要想实现该效果就需要添加<code>.lazy</code>修饰符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">      描述：&lt;input v-model.lazy=&quot;desc&quot; /&gt;&#123;&#123; desc &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>现在在<code>描述</code>文本框中输入了新的数据，但是文本框还没有失去焦点，这时候<code>desc</code>中的数据并没有发生改变。</p>
<p>当输入完内容按下回车键或者是文本框失去焦点后，<code>desc</code>中的内容就会发生改变了。</p>
<p>最后总结一下：</p>
<p>(1)<code>.number</code> – 转成数值类型赋予给<code>Vue</code>数据变量</p>
<p>(2) <code>.trim </code>– 去除左右两边空格后把值赋予给<code>Vue</code>数据变量</p>
<p>(3)<code>.lazy</code>– 等表单失去焦点, 才把值赋予给<code>Vue</code>数据变量</p>
<h2 id="12、v-text和v-html"><a href="#12、v-text和v-html" class="headerlink" title="12、v-text和v-html"></a>12、<code>v-text</code>和<code>v-html</code></h2><p><code>v-text</code>和<code>v-html</code>的作用是：更新元素的<code>innerText/innerHTML</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">     &lt;div v-text=&quot;str1&quot;&gt;&lt;/div&gt;</span><br><span class="line">     &lt;div v-html=&quot;str2&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">return</span>&#123;</span><br><span class="line">           <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">           <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">           <span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">cityId</span>:<span class="number">103</span>,</span><br><span class="line">           <span class="attr">isSingle</span>:<span class="literal">false</span>,</span><br><span class="line">           <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">           <span class="attr">title</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">           <span class="attr">desc</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">str1</span>:<span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;百度&lt;/a&gt;&#x27;</span>,</span><br><span class="line">           <span class="attr">str2</span>:<span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;百度&lt;/a&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>

<p>通过执行效果，我们可以看到<code>v-text</code>是不解析标签的，而<code>v-html</code>会解析标签。所以说，<code>v-text</code>就是<code>innerText</code>,而<code>v-html</code>就是<code>innerHTML</code></p>
<p>关于<code>v-text</code>指令我们不常用，一般都是使用插值表达式。</p>
<p>而当系统后台返回一些标签节点的时候，我们经常会使用<code>v-html</code>指令进行动态解析渲染。但是这里需要注意的是，永远不要直接将用户输入的内容直接作为<code>v-html</code>指令的值，容易造成<code>XSS</code>攻击(跨站脚本攻击)。因为用户的输入中可能包含<code>js</code>脚本，<code>v-html</code>会解析<code>js</code>脚本，从而导致<code>js</code>被执行，从而产生攻击漏洞。</p>
<h2 id="13、v-for-指令"><a href="#13、v-for-指令" class="headerlink" title="13、v-for 指令"></a>13、<code>v-for</code> 指令</h2><p><code>v-for</code>的作用：可以遍历 数组 或者 对象，用于渲染结构</p>
<p>下面先来看一下关于数组的遍历</p>
<p>遍历数组的语法，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v-for=<span class="string">&quot;item in 数组名&quot;</span></span><br><span class="line"> v-for=<span class="string">&quot;(item, index) in 数组名</span></span><br></pre></td></tr></table></figure>

<p>具体代码实现如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;item in arrList&quot; :key=&quot;item&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">return</span>&#123;</span><br><span class="line">           <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">           <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">           <span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">cityId</span>:<span class="number">103</span>,</span><br><span class="line">           <span class="attr">isSingle</span>:<span class="literal">false</span>,</span><br><span class="line">           <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">           <span class="attr">title</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">           <span class="attr">desc</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">           <span class="attr">str1</span>:<span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;百度&lt;/a&gt;&#x27;</span>,</span><br><span class="line">           <span class="attr">str2</span>:<span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;百度&lt;/a&gt;&#x27;</span>,</span><br><span class="line">           <span class="attr">arrList</span>:[<span class="string">&#x27;苹果&#x27;</span>,<span class="string">&#x27;桃子&#x27;</span>,<span class="string">&#x27;香蕉&#x27;</span>] <span class="comment">// 定义数组</span></span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，定义了数据<code>arrList</code>,它是一个数组。在视图中可以通过<code>v-for</code>来遍历<code>arrList</code>这个数组，而<code>item</code>就是数组中的每一项。所以将<code>item</code>中存储的数据展示到了<code>li</code>标签中。注意这里需要指定<code>key</code>属性，它的值暂时为<code>item</code>.<code>key</code>属性在这里起到唯一标识的作用</p>
<p>下面我们再来看一下<code>v-for</code>遍历数组的第二种使用方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-for=<span class="string">&quot;(item, index) in 数组名</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;(item,index) in arrList&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;---&#123;&#123; index &#125;&#125;&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，指定了<code>index</code>,并且在展示完了<code>item</code>中的数据后又展示了<code>index</code>中的数据</p>
<p>这里不仅展示了数组中的每一项，同时将其下标也给展示出来了。</p>
<p>注意：<code>item</code>与<code>index</code>的名称可以根据自己的情况随意命名，但是两者的顺序不能更换。第一个表示的就是数组中的每一项，第二个表示的就是数组中每一项的下标。</p>
<p>下面看一下针对对象的遍历</p>
<p><strong>遍历对象的语法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-for = <span class="string">&quot;(value, key) in 对象名&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>&#123;</span><br><span class="line">            <span class="attr">isShow</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">msg</span>:<span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">            <span class="attr">username</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">cityId</span>:<span class="number">103</span>,</span><br><span class="line">            <span class="attr">isSingle</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">            <span class="attr">title</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">            <span class="attr">desc</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">str1</span>:<span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;百度&lt;/a&gt;&#x27;</span>,</span><br><span class="line">            <span class="attr">str2</span>:<span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;百度&lt;/a&gt;&#x27;</span>,</span><br><span class="line">            <span class="attr">arrList</span>:[<span class="string">&#x27;苹果&#x27;</span>,<span class="string">&#x27;桃子&#x27;</span>,<span class="string">&#x27;香蕉&#x27;</span>],</span><br><span class="line">            <span class="comment">// 定义对象</span></span><br><span class="line">            <span class="attr">grilFriend</span>:&#123;</span><br><span class="line">                <span class="attr">name</span>:<span class="string">&quot;小于&quot;</span>,</span><br><span class="line">                <span class="attr">age</span>:<span class="number">23</span>,</span><br><span class="line">                <span class="attr">desc</span>:<span class="string">&quot;是一个贤惠姑娘&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;(value,key) in grilFriend&quot; :key=&quot;key&quot;&gt;&#123;&#123; value &#125;&#125;&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中定义了<code>girlFriend</code>对象，在视图中对该对象进行遍历。其中的<code>value</code>中存储的是属性值，而<code>key</code>中存储的是属性名。</p>
<p>同时也需要给<code>v-for</code>添加<code>key</code>这个属性作为唯一标识</p>
<p>最后再来看一下<strong>遍历数字</strong>，对应的语法如下 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-for = <span class="string">&quot;item in 数字</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=&quot;item in 30&quot; :key=&quot;item&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>这里通过<code>v-for</code>遍历数字，<code>item</code>中存储的就是<code>1--20</code>的数字。</p>
<p>以上就是<code>v-for</code>指令的基本使用。</p>
<h2 id="14、虚拟Dom"><a href="#14、虚拟Dom" class="headerlink" title="14、虚拟Dom"></a>14、虚拟<code>Dom</code></h2><p><code>html</code> 渲染出来的 真实<code>dom</code>树，是个树形结构（复杂）。每个标签，都只是树的某个节点</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/20.png"></p>
<p>每个标签，虽然只是树形结构的一个小节点，但属性也非常多。&#x3D;&gt; 遍历真实<code>dom</code>找差异，非常费时！</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/21.png"></p>
<p>真实DOM属性过多, 有很多无用的属性 ，无需遍历对比。</p>
<p>如何优化呢？对比属性少的虚拟<code>dom</code></p>
<p><strong>虚拟<code>dom</code>：本质就是 保存节点信息, 描述真实<code>dom</code>的<code> JS</code> 对象</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/22.png"></p>
<p><code>虚拟dom（一个js对象）</code>： 可以用最少的属性结构，描述真实的<code>dom</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-1.11.3.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      1,2,3,4,5,6,8,7</span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;sort&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span>按年纪排序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> datas = [</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;kongzhi11&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">32</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;kongzhi44&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">29</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;kongzhi22&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">31</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;kongzhi33&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">30</span> &#125;</span></span><br><span class="line"><span class="language-javascript">    ];</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> render = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> html = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      datas.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item, index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        html += <span class="string">`&lt;li&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;div class=&quot;u-cls&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;span class=&quot;name&quot;&gt;姓名:<span class="subst">$&#123;item.name&#125;</span>&lt;/span&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;span class=&quot;age&quot; style=&quot;margin-left:20px;&quot;&gt;年龄:<span class="subst">$&#123;item.age&#125;</span>&lt;/span&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;span class=&quot;closed&quot;&gt;x&lt;/span&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                  &lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;/li&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> html;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;#app&quot;</span>).<span class="title function_">html</span>(<span class="title function_">render</span>()); <span class="comment">// document.querySeletor(&quot;#app&quot;).innerHTML=render()</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;#sort&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      datas = datas.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> a.<span class="property">age</span> - b.<span class="property">age</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&#x27;#app&#x27;</span>).<span class="title function_">html</span>(<span class="title function_">render</span>());</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如上<code>demo</code>排序，虽然在使用<code>jquery</code>时代这种方式是可行的，我们点击按钮，它就可以从小到大的排序，但是它比较暴力，它会将之前的<code>dom</code>全部删除，然后重新渲染新的<code>dom</code>节点，我们知道，操作<code>DOM</code>会影响页面的性能，并且有时候数据根本就没有发生改变，我们希望未更改的数据不需要重新渲染操作。</p>
<p>因此虚拟<code>DOM</code>的思想就出来了，虚拟<code>DOM</code>的思想是先控制数据再到视图，但是数据状态是通过<code>diff</code>比对，它会比对新旧虚拟<code>DOM</code>节点，然后找出两者之前的不同，然后再把不同的节点再发生渲染操作。</p>
<p>所以可以概括的说，虚拟<code>DOM</code>,就是为了<strong>最小化</strong>找出差异这一步的性能损耗而出现的.</p>
<p>下面我们看一个案例，该案例的功能比较简单，单击按钮后，更新<code>div</code>中的内容。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;aaa&lt;/div&gt;</span><br><span class="line"><span class="keyword">const</span> div=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> btn=<span class="variable language_">document</span>.<span class="title function_">querySelectory</span>(<span class="string">&#x27;#btn&#x27;</span>)</span><br><span class="line">btn.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    div.<span class="property">textContent</span>=<span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码非常简单，而且是使用<code>DOM</code>操作的方式来实现的。</p>
<p>如果上面的案例，我们使用虚拟<code>DOM</code>来实现，应该怎样处理呢？首先，我们要创建一个虚拟<code>DOM</code>的对象，</p>
<p>虚拟<code>DOM</code>对象就是一个普通的<code>JS</code>对象。当单击按钮的时候，需要对比两次状态的差异。所以说，仅仅是该案例，</p>
<p>我们使用虚拟<code>DOM</code>的方式来实现，要比使用纯<code>DOM</code>的方式来实现，性能要低。</p>
<p>所以说，并不是所有的情况下使用虚拟<code>DOM</code>都会提升性能的。只<strong>有在视图比较复杂的情况下使用虚拟<code>DOM</code>才会提升渲染的性能。</strong></p>
<p>虚拟<code>DOM</code>除了渲染<code>DOM</code>以外，还<strong>可以实现渲染到其它的平台，</strong>例如可以实现服务端渲染(<code>ssr</code>),原生应用(<code>React Native</code>),<strong>小程序(</strong><code>uni-app</code>等)。以上列举的案例中，内部都使用了虚拟<code>DOM</code>.</p>
<h2 id="15、Diff算法"><a href="#15、Diff算法" class="headerlink" title="15、Diff算法"></a>15、<code>Diff</code>算法</h2><p>明确：通过对比 新旧虚拟<code>dom</code>，提高了对比性能。 但是就算是虚拟<code>dom</code>，和真实<code>dom</code>一样，也是树形结构 内部又是如何对比的呢?</p>
<p>内存中创建虚拟<code>dom</code>，快速比较变化, 给真实<code>DOM</code>打补丁(更新).</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff算法可以看作是一种对比算法，对比的对象是新旧虚拟Dom。顾名思义，diff算法可以找到新旧虚拟Dom之间的差异，但diff算法中其实并不是只有对比虚拟Dom，还有根据对比后的结果更新真实Dom。</span><br></pre></td></tr></table></figure>

<p><strong>在这有一个问题，虚拟DOM在什么时候会进行比对？</strong></p>
<p>当数据发生了变化的时候，就要进行虚拟DOM的比对了。</p>
<p><strong>什么时候会发生数据的改变呢？当<code>data</code>中的数据发生了变化。这时就需要使用<code>Diff</code>算法进行比对了。</strong></p>
<p>策略1：先同层级根元素比较。 &#x3D;&gt; 如果根元素变化，那么不考虑复用，整个<code>dom树</code>删除重建</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/23.png"></p>
<p>策略1：先同层级根元素比较。 &#x3D;&gt; 如果根元素不变，对比出属性的变化更新，并考虑往下递归复用。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/24.png"></p>
<p>策略2：对比同级兄弟元素时<strong>，默认按照下标</strong>进行对比复用</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/25.png"></p>
<p>对比同级兄弟元素时，<strong>如果指定了 key，就会按照相同 key 的元素来进行对比</strong></p>
<p>小结：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. 同层级根元素先比较</span><br><span class="line">（1）如果根元素变了，删除重建dom树</span><br><span class="line">（2）如果根元素没变，对比属性。并考虑往下递归复用。</span><br><span class="line">2. 兄弟元素比较</span><br><span class="line">（1）默认按照下标，进行对比复用</span><br><span class="line">（2）如果设置了key，就会按照相同key的元素进行复用</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>思考：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">同层级兄弟元素比较新旧变化，默认按下标比较，</span><br><span class="line">如果设置了key，则优先相同key的兄弟元素比较。</span><br><span class="line">那么设置 key 和 不设置key 有什么区别呢？ 设置key有什么用呢？</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>无key的情况：默认<code>diff</code>更新算法，是同级兄弟<strong>，按照 下标 对比新旧<code>dom</code>的差异</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/30.png"></p>
<p>以上没有给元素指定<code>key</code>，只能通过下标来对比新旧元素，性能相对来讲比较低</p>
<p>有key的情况：根据<code>diff</code>更新算法，同级兄弟元素，在设置了<code>key</code>后，会让相同<code>key</code>的元素进行对比</p>
<p><strong>key的要求：必须是字符串 或者 数字，且要保证唯一性！（标准的key需要指定成 id）</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/26.png"></p>
<p>通过上图，我们可以看到，老大，老二，老三，在新的虚拟<code>DOM</code>结构中<code>key</code>都是一样的，没有发生变化，这时候，新的<code>DOM</code>结构中新增了一个元素</p>
<p>列表循环加:key&#x3D;”唯一标识”，可以标识元素的唯一性，可以更好地区别各个元素。 </p>
<p><strong>key的作用：提高虚拟DOM的对比复用性能</strong></p>
<p>小节：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. 设置 和 不设置 key 有什么区别？</span><br><span class="line">不设置 key， 默认同级兄弟元素 按照下标 进行比较。</span><br><span class="line">设置了key，按照 相同key 的新旧元素比较。</span><br><span class="line">2. key值要求是?</span><br><span class="line">字符串或者数值，唯一不重复</span><br><span class="line">有 id 用 id, 有唯一值用唯一值，实在都没有，才用索引</span><br><span class="line">4. key的好处?</span><br><span class="line">key的作用：提高虚拟DOM的对比复用性能</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>但是有一点要注意，就是这个key值尽量不能为数组的索引的值，因为，如果key的值为index的话，就无法保证原始的虚拟DOM上的key值和新的虚拟DOM上的key值相同了，因为数组的index的值是随着数组里元素的添加或者是删除，会发生变化的。</p>
<p>所以，尽量不要使用index作为key值。</p>
<p><code>key</code>实际工作中应用的案例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;item in arr&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">            &#123;&#123; item.name &#125;&#125;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;button @click=&quot;fn&quot;&gt;新来的&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            arr: [</span><br><span class="line">            &#123; id: 1, name: &#x27;小明&#x27;, age: 6 &#125;,</span><br><span class="line">            &#123; id: 2, name: &#x27;小花&#x27;, age: 4 &#125;,</span><br><span class="line">            &#123; id: 3, name: &#x27;小美&#x27;, age: 8 &#125;,</span><br><span class="line">      ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        fn()&#123;</span><br><span class="line">             // push pop  unshift shift  </span><br><span class="line">         // arr.splice(从哪开始删除，删几个，添加项1，添加项2, ...)</span><br><span class="line">         this.arr.splice(1,0,&#123;</span><br><span class="line">            id:this.arr[this.arr.length-1]+1,</span><br><span class="line">            name:&#x27;小兰&#x27;,</span><br><span class="line">            age:10</span><br><span class="line">         &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="16、样式控制"><a href="#16、样式控制" class="headerlink" title="16、样式控制"></a>16、样式控制</h2><h3 id="16-1-控制类名"><a href="#16-1-控制类名" class="headerlink" title="16.1  控制类名"></a>16.1  控制类名</h3><p>控制样式，要么操作类，要么操作行内样式， 在<code>vue</code>中，应该如何操作 class 类呢？如何操作<code>style</code>行内样式呢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法 :class=&quot;对象/数组&quot;</span><br><span class="line"> 对象：如果键值对的值为true，那么就有这个类，否则没有这个类</span><br><span class="line">	数组：数组中所有的类，都会添加到盒子上</span><br><span class="line"> v-bind 对于类名操作的增强, 注意点 :class 不会影响到原来的 class 属性</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!--直接使用了box样式--&gt;</span><br><span class="line">        &lt;!--动态绑定了obj对象，如果值，是true，那么就会有这个类样式，类名就是对象的键--&gt;</span><br><span class="line">        &lt;!--这里动态添加的class，没有对原来的class=&quot;box&quot;造成影响--&gt;</span><br><span class="line">      &lt;div class=&quot;box&quot; :class=&quot;obj&quot;&gt;&lt;/div&gt;  </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">    data()&#123;</span><br><span class="line">       return &#123;</span><br><span class="line">        obj:&#123;</span><br><span class="line">            red:true, // obj对象中的red属性与css类名同名，并且值为true,说明会使用该类样式</span><br><span class="line">        &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.box &#123;</span><br><span class="line">  width: 100px;</span><br><span class="line">  height: 100px;</span><br><span class="line">  border: 2px solid #000;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.red &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">.orange &#123;</span><br><span class="line">  background-color: orange;</span><br><span class="line">&#125;</span><br><span class="line">.big &#123;</span><br><span class="line">  width: 200px;</span><br><span class="line">  height: 200px;</span><br><span class="line">&#125;</span><br><span class="line">.circle &#123;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>下面再来看另外一种比较常用的使用方式：</p>
<p>根据属性的值是<code>true</code>还是<code>false</code>来决定是否添加某个类样式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="attr">obj</span>:&#123;</span><br><span class="line">           <span class="attr">red</span>:<span class="literal">true</span>,</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="attr">isOrage</span>:<span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>这里定义了<code>isOrage</code>属性，根据该属性的取值来决定是否采用某个类样式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;box&quot; :class=&quot;&#123;orange:isOrage&#125;&quot; &gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>如果<code>isOrage</code>这个属性的值是<code>true</code>，就给<code>div</code>添加<code>orange</code>这个类样式，如果为<code>false</code>就不添加<code>orange</code>这个类样式</p>
<p><strong>下面再来看一下数组的使用</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">obj</span>:&#123;</span><br><span class="line">          <span class="attr">red</span>:<span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">isOrage</span>:<span class="literal">true</span>,</span><br><span class="line">      <span class="attr">arr</span>: [<span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;big&#x27;</span>, <span class="string">&#x27;circle&#x27;</span>] <span class="comment">// 定义了arr属性，它的取值是一个数组，数组中的元素都是类样式名称</span></span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- [类名1, 类名2, 类名3, ...]  数组里面有的项，就是要添加的类 （适合批量添加多个类）---&gt;   </span><br><span class="line">&lt;div class=&quot;box&quot; :class=&quot;arr&quot;&gt;&lt;/div&gt; </span><br></pre></td></tr></table></figure>



<h3 id="16-2-控制行内样式"><a href="#16-2-控制行内样式" class="headerlink" title="16.2 控制行内样式"></a>16.2 控制行内样式</h3><p>用 <code>v-bind</code> 动态设置标签的<code>style</code> 行内样式</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:style=&quot;对象/数组&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :style=&quot;&#123; background: &#x27;red&#x27;, width: &#x27;200px&#x27;, height: &#x27;100px&#x27;&#125;&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>下面看一下另外一种用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="attr">obj</span>:&#123;</span><br><span class="line">           <span class="attr">red</span>:<span class="literal">true</span>,</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="attr">isOrage</span>:<span class="literal">true</span>,</span><br><span class="line">       <span class="attr">arr</span>: [<span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;big&#x27;</span>, <span class="string">&#x27;circle&#x27;</span>],</span><br><span class="line">          <span class="comment">// 定义了styleObj对象，包含了样式属性</span></span><br><span class="line">       <span class="attr">styleObj</span>:&#123;</span><br><span class="line">           <span class="attr">width</span>: <span class="string">&#x27;200px&#x27;</span>,</span><br><span class="line">           <span class="attr">height</span>: <span class="string">&#x27;200px&#x27;</span>,</span><br><span class="line">        <span class="attr">backgroundColor</span>: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">       &#125;,</span><br><span class="line">          <span class="comment">// 定义了obj2对象</span></span><br><span class="line">       <span class="attr">obj2</span>: &#123;</span><br><span class="line">       <span class="attr">borderRadius</span>: <span class="string">&#x27;50%&#x27;</span></span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :style=&quot;styleObj&quot;&gt;&lt;/div&gt;  </span><br></pre></td></tr></table></figure>

<p>通过<code>style</code>动态绑定了<code>styleObj</code>对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :style=&quot;[styleObj, obj2]&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>通过<code>style</code>动态绑定了一个数组</p>
<h1 id="五、Composition-API"><a href="#五、Composition-API" class="headerlink" title="五、Composition API"></a>五、<code>Composition API</code></h1><h2 id="1、Composition-API设计动机"><a href="#1、Composition-API设计动机" class="headerlink" title="1、Composition API设计动机"></a>1、<code>Composition API</code>设计动机</h2><p><code>Vue2.x</code>在设计中小型项目的时候，使用非常方便，开发效率也高。但是在开发一些大型项目的时候也会带来一定的限制，</p>
<p>在<code>Vue2.x</code>中使用的<code>API</code>是<code>Options API</code>,该类型的<code>API</code>包含一个描述组件选项(<code>data</code>,<code>methods</code>,<code>props</code>等)的对象，在使用<code>Options API</code>开发复杂的组件的时候，同一个功能逻辑的代码被拆分到不同的选项中，这样在代码量比较多的情况下就会导致不停的拖动滚动条才能把代码全部看清，非常的不方便。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &#123;&#123; msg &#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default&#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">        const msg = &quot;hello&quot;;</span><br><span class="line">        return &#123;msg&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>可以将业务写到<code>setup</code>入口函数中，如果业务比较复杂，可以单独的在封装函数，然后在<code>setup</code>中进行调用。</p>
<h2 id="2、reactive-toRefs-ref"><a href="#2、reactive-toRefs-ref" class="headerlink" title="2、reactive/toRefs/ref"></a>2、<code>reactive/toRefs/ref</code></h2><h3 id="2-1-reactive函数基本使用"><a href="#2-1-reactive函数基本使用" class="headerlink" title="2.1 reactive函数基本使用"></a>2.1 <code>reactive</code>函数基本使用</h3><p>在上面的案例中定义的<code>msg</code>是一个普通的数据，并不是响应式的。而放在<code>data</code>函数中的数据都是响应式的。</p>
<p>而在<code>Vue3</code>中怎样创建响应式数据呢？</p>
<p><code>Compositiont API</code>中的三个函数<code>reactive/toRefs/ref</code>创建响应式数据</p>
<p><code>reactive</code>函数，可以将对象转换成响应式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">       &lt;p&gt;年龄:&#123;&#123; obj.age &#125;&#125;&lt;/p&gt;</span><br><span class="line">       &lt;button @click=&quot;addAge&quot;&gt;计算年龄&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;; // 注意：需要从vue中导入reactive函数</span><br><span class="line"></span><br><span class="line">  export default&#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">       let obj =reactive(&#123;</span><br><span class="line">        age:10</span><br><span class="line">       &#125;)</span><br><span class="line">       const addAge=()=&gt;&#123;</span><br><span class="line">        obj.age++;</span><br><span class="line">       &#125;</span><br><span class="line">       return &#123;</span><br><span class="line">        obj,</span><br><span class="line">        addAge</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>单击<code>计算年龄</code>按钮 的时候，调用<code>addAge</code>函数，在该函数中完成了<code>age</code>属性值的更新，同时视图中数据也发生了相应的变化。</p>
<h3 id="2-2-ref函数基本使用"><a href="#2-2-ref函数基本使用" class="headerlink" title="2.2 ref函数基本使用"></a>2.2 <code>ref</code>函数基本使用</h3><p><code>ref</code>函数的作用就是把普通数据转换成响应式数据。与<code>reactive</code>不同的是，<code>reactive</code>是把一个对象转换成响应式数据。</p>
<p><code>ref</code>可以把一个基本类型的数据包装成响应式对象。</p>
<p><code>KilgourNote:</code></p>
<blockquote>
<p>插值表达式会自动将ref过的对象取value</p>
</blockquote>
<p>下面，我们使用<code>ref</code>函数实现一个自增的案例。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">let</span> obj =<span class="title function_">reactive</span>(&#123;</span><br><span class="line">       <span class="attr">age</span>:<span class="number">10</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">const</span> num =<span class="title function_">ref</span>(<span class="number">0</span>); <span class="comment">// 定义num</span></span><br></pre></td></tr></table></figure>

<p>通过<code>ref</code>函数创建一个<code>num</code>，初始值是0</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 完成num值累加操作  </span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addNum</span>=(<span class="params">n</span>)=&gt;&#123;</span><br><span class="line">        num.<span class="property">value</span> += n;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">        obj,</span><br><span class="line">        addAge,</span><br><span class="line">        num,</span><br><span class="line">        addNum</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<p>创建一个<code>addNum</code>函数，接收传递过来的数值，然后完成累加操作。</p>
<p>注意：获取<code>num</code>的值需要通过<code>value</code>属性。</p>
<p>最后返回<code>num</code>和<code>addNum</code>函数，这样在模版中才能够使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;num:&#123;&#123; num &#125;&#125;&lt;/p&gt;</span><br><span class="line">     &lt;button @click=&quot;addNum(3)&quot;&gt;计算&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>注意: 需要从<code>vue</code>中导入<code>ref</code>函数。</p>
<h3 id="2-3-toRefs函数基本使用"><a href="#2-3-toRefs函数基本使用" class="headerlink" title="2.3 toRefs函数基本使用"></a>2.3 <code>toRefs</code>函数基本使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;年龄:&#123;&#123; age &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>这里如果想在模版中展示<code>obj</code>对象中<code>age</code>属性，可以简写成如上形式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">      ...obj, <span class="comment">//解构</span></span><br><span class="line">      addAge,</span><br><span class="line">      num,</span><br><span class="line">      addNum</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<p>这里就需要将<code>obj</code>对象进行解构。</p>
<p>但是，当单击<code>计算年龄</code>按钮的时候，模版中的<code>年龄</code>数据没有变化，说明解构完以后，数据不是响应式的。</p>
<p>为了解决这个问题，需要使用到<code>toRefs</code>函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, ref,toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>导入<code>toRefs</code>函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">      ...<span class="title function_">toRefs</span>(obj), <span class="comment">// 使用toRefs函数</span></span><br><span class="line">      addAge,</span><br><span class="line">      num,</span><br><span class="line">      addNum</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<p>通过<code>toRefs</code>函数包裹了<code>obj</code>对象。</p>
<p>这时候解构出的数据就是响应式的。</p>
<h2 id="3、学生列表案例"><a href="#3、学生列表案例" class="headerlink" title="3、学生列表案例"></a>3、学生列表案例</h2><h3 id="3-1-基本结构"><a href="#3-1-基本结构" class="headerlink" title="3.1  基本结构"></a>3.1  基本结构</h3><p>创建一个<code>学生列表.vue</code>组件。</p>
<p>同时修改一下<code>main.js</code>入口文件中的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./学生列表.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>上面导入的是<code>学生列表组件</code></p>
<p>该组件中的基本结构代码，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;score-case&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;table&quot;&gt;</span><br><span class="line">      &lt;table&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;编号&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;科目&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;成绩&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;考试时间&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/thead&gt;</span><br><span class="line">      </span><br><span class="line">        &lt;tfoot&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;td colspan=&quot;5&quot;&gt;</span><br><span class="line">              &lt;span&gt;总分：321&lt;/span&gt;</span><br><span class="line">              &lt;span style=&quot;margin-left:50px&quot;&gt;平均分：80.25&lt;/span&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/tfoot&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;form&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;form-item&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;label&quot;&gt;科目：&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;input&quot;&gt;</span><br><span class="line">          &lt;input  type=&quot;text&quot; placeholder=&quot;请输入科目&quot; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;form-item&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;label&quot;&gt;分数：&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;input&quot;&gt;</span><br><span class="line">          &lt;input type=&quot;text&quot; placeholder=&quot;请输入分数&quot; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;form-item&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;label&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;input&quot;&gt;</span><br><span class="line">          &lt;button class=&quot;submit&quot;&gt;添加&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;StudList&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;less&quot;&gt;</span><br><span class="line">.score-case &#123;</span><br><span class="line">  width: 1000px;</span><br><span class="line">  margin: 50px auto;</span><br><span class="line">  display: flex;</span><br><span class="line">  .table &#123;</span><br><span class="line">    flex: 4;</span><br><span class="line">    table &#123;</span><br><span class="line">      width: 100%;</span><br><span class="line">      border-spacing: 0;</span><br><span class="line">      border-top: 1px solid #ccc;</span><br><span class="line">      border-left: 1px solid #ccc;</span><br><span class="line">      th &#123;</span><br><span class="line">        background: #f5f5f5;</span><br><span class="line">      &#125;</span><br><span class="line">      tr:hover td &#123;</span><br><span class="line">        background: #f5f5f5;</span><br><span class="line">      &#125;</span><br><span class="line">      td,</span><br><span class="line">      th &#123;</span><br><span class="line">        border-bottom: 1px solid #ccc;</span><br><span class="line">        border-right: 1px solid #ccc;</span><br><span class="line">        text-align: center;</span><br><span class="line">        padding: 10px;</span><br><span class="line">        &amp;.red &#123;</span><br><span class="line">          color: red;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .none &#123;</span><br><span class="line">      height: 100px;</span><br><span class="line">      line-height: 100px;</span><br><span class="line">      color: #999;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .form &#123;</span><br><span class="line">    flex: 1;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    .form-item &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      margin-bottom: 20px;</span><br><span class="line">      align-items: center;</span><br><span class="line">    &#125;</span><br><span class="line">    .form-item .label &#123;</span><br><span class="line">      width: 60px;</span><br><span class="line">      text-align: right;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">    &#125;</span><br><span class="line">    .form-item .input &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">    &#125;</span><br><span class="line">    .form-item input,</span><br><span class="line">    .form-item select &#123;</span><br><span class="line">      appearance: none;</span><br><span class="line">      outline: none;</span><br><span class="line">      border: 1px solid #ccc;</span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 40px;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">      padding: 10px;</span><br><span class="line">      color: #666;</span><br><span class="line">    &#125;</span><br><span class="line">    .form-item input::placeholder &#123;</span><br><span class="line">      color: #666;</span><br><span class="line">    &#125;</span><br><span class="line">    .form-item .cancel,</span><br><span class="line">    .form-item .submit &#123;</span><br><span class="line">      appearance: none;</span><br><span class="line">      outline: none;</span><br><span class="line">      border: 1px solid #ccc;</span><br><span class="line">      border-radius: 4px;</span><br><span class="line">      padding: 4px 10px;</span><br><span class="line">      margin-right: 10px;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      background: #ccc;</span><br><span class="line">    &#125;</span><br><span class="line">    .form-item .submit &#123;</span><br><span class="line">      border-color: #069;</span><br><span class="line">      background: #069;</span><br><span class="line">      color: #fff;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>上面使用的是<code>less</code>构建的样式，为了能够进行解析，需要安装如下包</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install  less-loader less</span><br></pre></td></tr></table></figure>

<h3 id="3-2-展示数据"><a href="#3-2-展示数据" class="headerlink" title="3.2 展示数据"></a>3.2 展示数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive,toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>; </span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> list=<span class="title function_">reactive</span>(&#123;</span><br><span class="line">            <span class="attr">stuList</span>:[</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">15</span>, <span class="attr">subject</span>: <span class="string">&#x27;语文&#x27;</span>, <span class="attr">score</span>: <span class="number">89</span>, <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2022/06/07 10:00:00&#x27;</span>)&#125;,</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">27</span>, <span class="attr">subject</span>: <span class="string">&#x27;数学&#x27;</span>, <span class="attr">score</span>: <span class="number">100</span>, <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2022/06/07 15:00:00&#x27;</span>)&#125;,</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">32</span>, <span class="attr">subject</span>: <span class="string">&#x27;英语&#x27;</span>, <span class="attr">score</span>: <span class="number">56</span>, <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2022/06/08 10:00:00&#x27;</span>)&#125;,</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">41</span>, <span class="attr">subject</span>: <span class="string">&#x27;物理&#x27;</span>, <span class="attr">score</span>: <span class="number">76</span>, <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2022/06/08 10:00:00&#x27;</span>)&#125;</span><br><span class="line"></span><br><span class="line">            ]</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            ...<span class="title function_">toRefs</span>(list)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>构建数据</p>
<p>模版中的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;thead&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;th&gt;编号&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;科目&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;成绩&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;考试时间&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/thead&gt;</span><br><span class="line">    &lt;!--判断是否有数据---&gt;</span><br><span class="line">      &lt;tbody v-if=&quot;stuList.length&gt;0&quot;&gt;</span><br><span class="line">          &lt;!--数据遍历--&gt;</span><br><span class="line">          &lt;tr v-for=&quot;(item,index) in stuList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                  &#123;&#123; index+1 &#125;&#125;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                  &#123;&#123; item.subject &#125;&#125;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                  &#123;&#123; item.score &#125;&#125;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                  &#123;&#123; item.date &#125;&#125;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                  &lt;a href=&quot;#&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">      &lt;/tbody&gt;</span><br><span class="line">    &lt;!--没有数据的处理--&gt;</span><br><span class="line">      &lt;tbody v-else&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">              &lt;td colspan=&quot;5&quot;&gt;</span><br><span class="line">                  &lt;span class=&quot;none&quot;&gt;暂无数据&lt;/span&gt;</span><br><span class="line">              &lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">      &lt;/tbody&gt;</span><br></pre></td></tr></table></figure>

<p><strong>进行日期格式的处理</strong>。（<code>https://momentjs.com/</code>）</p>
<p>安装日期处理的包<code>moment</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install moment</span><br></pre></td></tr></table></figure>

<p>定义日期处理的函数，并且返回</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> moment  <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理日期格式</span></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">format</span>=(<span class="params">date</span>)=&gt;&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">monment</span>(date).<span class="title function_">format</span>(<span class="string">&#x27;YYYY/MM/DD HH:mm:ss&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            ...<span class="title function_">toRefs</span>(list),</span><br><span class="line">            add,</span><br><span class="line">            format <span class="comment">// 返回format函数</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>修改模版中的代码，调用<code>format</code>函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;td&gt;</span><br><span class="line">                 &#123;&#123; format(item.date) &#125;&#125;</span><br><span class="line">             &lt;/td&gt;</span><br></pre></td></tr></table></figure>

<p>最后，将小于60分的成绩，添加样式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;td :class=&quot;&#123;red:item.score &lt; 60  &#125;&quot;&gt;</span><br><span class="line">                  &#123;&#123; item.score &#125;&#125;</span><br><span class="line">              &lt;/td&gt;</span><br></pre></td></tr></table></figure>

<p>判断的条件成立，将使用<code>red</code>样式</p>
<h3 id="3-3-添加数据"><a href="#3-3-添加数据" class="headerlink" title="3.3  添加数据"></a>3.3  添加数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list=<span class="title function_">reactive</span>(&#123;</span><br><span class="line">           <span class="attr">stuList</span>:[</span><br><span class="line">           &#123;<span class="attr">id</span>: <span class="number">15</span>, <span class="attr">subject</span>: <span class="string">&#x27;语文&#x27;</span>, <span class="attr">score</span>: <span class="number">89</span>, <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2022/06/07 10:00:00&#x27;</span>)&#125;,</span><br><span class="line">           &#123;<span class="attr">id</span>: <span class="number">27</span>, <span class="attr">subject</span>: <span class="string">&#x27;数学&#x27;</span>, <span class="attr">score</span>: <span class="number">100</span>, <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2022/06/07 15:00:00&#x27;</span>)&#125;,</span><br><span class="line">           &#123;<span class="attr">id</span>: <span class="number">32</span>, <span class="attr">subject</span>: <span class="string">&#x27;英语&#x27;</span>, <span class="attr">score</span>: <span class="number">56</span>, <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2022/06/08 10:00:00&#x27;</span>)&#125;,</span><br><span class="line">           &#123;<span class="attr">id</span>: <span class="number">41</span>, <span class="attr">subject</span>: <span class="string">&#x27;物理&#x27;</span>, <span class="attr">score</span>: <span class="number">76</span>, <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2022/06/08 10:00:00&#x27;</span>)&#125;</span><br><span class="line"></span><br><span class="line">           ],</span><br><span class="line">           <span class="attr">subject</span>:<span class="string">&#x27;&#x27;</span>,<span class="comment">// 科目</span></span><br><span class="line">           <span class="attr">score</span>:<span class="number">0</span> <span class="comment">// 成绩</span></span><br><span class="line">       &#125;)</span><br></pre></td></tr></table></figure>

<p>定义响应数据<code>subject,score</code>，然后与视图中的文本框进行绑定。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input  type=&quot;text&quot; placeholder=&quot;请输入科目&quot;   v-model.trim=&quot;subject&quot;/&gt;</span><br><span class="line"></span><br><span class="line"> &lt;input type=&quot;text&quot; placeholder=&quot;请输入分数&quot; v-model.number=&quot;score&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>给按钮注册单击事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button class=&quot;submit&quot; @click=&quot;add&quot;&gt;添加&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加数据</span></span><br><span class="line">       <span class="keyword">const</span> <span class="title function_">add</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">           <span class="keyword">if</span>(list.<span class="property">subject</span>===<span class="string">&#x27;&#x27;</span>||list.<span class="property">score</span> &gt; <span class="number">100</span>)&#123;</span><br><span class="line">               <span class="title function_">alert</span>(<span class="string">&quot;请输入正确的数据&quot;</span>);</span><br><span class="line">               <span class="keyword">return</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           list.<span class="property">stuList</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">               <span class="attr">id</span>:list.<span class="property">stuList</span>[list.<span class="property">stuList</span>.<span class="property">length</span>-<span class="number">1</span>]+<span class="number">1</span>,</span><br><span class="line">               <span class="attr">subject</span>:list.<span class="property">subject</span>,</span><br><span class="line">               <span class="attr">score</span>:list.<span class="property">score</span>,</span><br><span class="line">               <span class="attr">date</span>:<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">           &#125;)</span><br><span class="line">           list.<span class="property">score</span> = <span class="number">0</span>;</span><br><span class="line">           list.<span class="property">subject</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">           </span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">           ...<span class="title function_">toRefs</span>(list),</span><br><span class="line">           add <span class="comment">// 返回add方法</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>完成数据的添加</p>
<h3 id="3-4-数据删除"><a href="#3-4-数据删除" class="headerlink" title="3.4 数据删除"></a>3.4 数据删除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;td&gt;</span><br><span class="line">                  &lt;a href=&quot;#&quot;  @click.prevent=&quot;del(item.id)&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">              &lt;/td&gt;</span><br></pre></td></tr></table></figure>

<p>给删除的链接，注册单击事件，去掉默认行为。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除数据</span></span><br><span class="line">     <span class="keyword">const</span> <span class="title function_">del</span>=(<span class="params">id</span>)=&gt;&#123;</span><br><span class="line">         <span class="keyword">if</span>(<span class="title function_">confirm</span>(<span class="string">`确定要删除编号<span class="subst">$&#123;id&#125;</span>的数据吗？`</span>))&#123;</span><br><span class="line">              <span class="comment">// 根据 id 唯一标识（发请求 / 从数组直接删）</span></span><br><span class="line">   <span class="comment">// 删除某一id的项 =&gt; 过滤出所有不是该 id 的项  filter</span></span><br><span class="line">           list.<span class="property">stuList</span> = list.<span class="property">stuList</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>item.<span class="property">id</span> !==id)</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> &#123;</span><br><span class="line">         ...<span class="title function_">toRefs</span>(list),</span><br><span class="line">         add,</span><br><span class="line">         del, <span class="comment">// 返回del方法</span></span><br><span class="line">         format</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<h1 id="六、计算属性"><a href="#六、计算属性" class="headerlink" title="六、计算属性"></a>六、计算属性</h1><h2 id="1、计算属性说明"><a href="#1、计算属性说明" class="headerlink" title="1、计算属性说明"></a>1、计算属性说明</h2><p>计算属性: 一个特殊属性, 值依赖于另外一些数据变化动态计算出来</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">注意:</span><br><span class="line"> 1. 计算属性必须定义在 computed 节点中</span><br><span class="line"> 2. 计算属性必须是一个 function或者是对象,计算属性必须有返回值</span><br><span class="line"> 3. 计算属性不能被当作方法调用, 要作为属性来</span><br></pre></td></tr></table></figure>

<p>计算属性特点：所使用的变量改变, 重新计算结果返回</p>
<p>参考文档:<code>https://cn.vuejs.org/guide/essentials/computed.html</code>(根据文档进行说明)</p>
<p><code>KilgourNote:</code></p>
<blockquote>
<p>只要template中的属性发生变化，则全部的template代码都得执行一遍，因此，使用累加、计算总和这样的函数就会被重新执行一遍。</p>
<p>这大大增加了内存的负担，计算属性也就应运而生了。</p>
</blockquote>
<h2 id="2、通过计算属性计算总分与平均分"><a href="#2、通过计算属性计算总分与平均分" class="headerlink" title="2、通过计算属性计算总分与平均分"></a>2、通过计算属性计算总分与平均分</h2><p><strong>计算总分</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed, reactive,toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>导入<code>computed</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过计算属性完成总分与平均分的计算</span></span><br><span class="line">      <span class="keyword">const</span> total =  <span class="title function_">computed</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">           <span class="comment">// arr.reduce((上一次累加的结果, 每一项, 下标) =&gt; &#123;</span></span><br><span class="line">     <span class="comment">//   return 累加的结果</span></span><br><span class="line">     <span class="comment">// &#125;, 起始累加值)</span></span><br><span class="line">         <span class="keyword">const</span> result = list.<span class="property">stuList</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum,item</span>)=&gt;</span>&#123;</span><br><span class="line">             <span class="keyword">return</span> sum + item.<span class="property">score</span></span><br><span class="line">           &#125;,<span class="number">0</span>);</span><br><span class="line">           <span class="keyword">return</span> result</span><br><span class="line">       &#125;)</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">           ...<span class="title function_">toRefs</span>(list),</span><br><span class="line">           add,</span><br><span class="line">           del,</span><br><span class="line">           format,</span><br><span class="line">           total <span class="comment">// 返回total</span></span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<p>模版中的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;总分：&#123;&#123; total &#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure>

<p><strong>计算平均分</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 计算平均分  </span></span><br><span class="line"><span class="keyword">const</span> avg = <span class="title function_">computed</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// 获取total中的值时，是通过value</span></span><br><span class="line">          <span class="keyword">const</span> result = list.<span class="property">stuList</span>.<span class="property">length</span> &gt;<span class="number">0</span> ? total.<span class="property">value</span>/list.<span class="property">stuList</span>.<span class="property">length</span>:<span class="number">0</span>;</span><br><span class="line">          <span class="keyword">return</span> result.<span class="title function_">toFixed</span>(<span class="number">2</span>); </span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            ...<span class="title function_">toRefs</span>(list),</span><br><span class="line">            add,</span><br><span class="line">            del,</span><br><span class="line">            format,</span><br><span class="line">            total,</span><br><span class="line">            avg <span class="comment">// 返回avg</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>模版中的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span style=&quot;margin-left:50px&quot;&gt;平均分：&#123;&#123;avg&#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3、计算属性缓存"><a href="#3、计算属性缓存" class="headerlink" title="3、计算属性缓存"></a>3、计算属性缓存</h2><p>若我们将同样的函数定义为一个方法而不是计算属性，两种方式在结果上确实是完全相同的，不同之处在于<strong>计算属性值会基于其响应式依赖被缓存</strong>。一个计算属性仅会在其响应式依赖更新时才重新计算。</p>
<p>例如上面的代码中，只要计算属性所依赖的<code>list.stuList</code>中的数据没有变化，也就是不会发生改变，不管访问多少次，都会立即返回之前的计算结果，而不是重复执行计算。实现了缓存的效果。</p>
<p>但是，如果定义成普通的方法来实现，就会每次访问的时候，都会调用所定义的方法重新计算，不管<code>list.stuList</code>中的数据是否发生变化。</p>
<p>所以计算属性提升了性能。</p>
<p>总结：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">计算属性特点？</span><br><span class="line">	1 计算完了一次，就会自动进行缓存</span><br><span class="line">	2 如果依赖项不变, 下次使用直接从缓存取</span><br><span class="line">	3 直到依赖项改变, 函数才会重新执行并重新缓</span><br></pre></td></tr></table></figure>

<h2 id="4、计算属性完整写法"><a href="#4、计算属性完整写法" class="headerlink" title="4、计算属性完整写法"></a>4、计算属性完整写法</h2><p>计算属性默认是只读的。当你尝试修改一个计算属性时，你会收到一个运行时警告。只在某些特殊场景中你可能才需要用到“可写”的属性，你可以通过同时提供 <code>getter</code> 和<code> setter</code> 来创建：</p>
<p>创建一个<code>计算属性.vue</code>组件，进行演示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; v-model=&quot;name1&quot; /&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; v-model=&quot;name2&quot;/&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; computed, reactive, toRefs &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line"> export default&#123;</span><br><span class="line">    name:&quot;ComputedApp&quot;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">        const obj = reactive(&#123;</span><br><span class="line">            name1:&#x27;李&#x27;,</span><br><span class="line">            name2:&#x27;霸天&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">        // 这里computed需要的参数是一个对象</span><br><span class="line">        const fullName = computed(&#123;</span><br><span class="line">            get()&#123;</span><br><span class="line">                return obj.name1+&quot;-&quot;+obj.name2;</span><br><span class="line">            &#125;,</span><br><span class="line">            set(value)&#123;</span><br><span class="line">                console.log(&quot;value=&quot;,value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">        return &#123;</span><br><span class="line">            ...toRefs(obj),</span><br><span class="line">            fullName</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>上面代码中，定义了<code>obj</code>对象。并且将该对象中的属性与视图中的文本框进行了绑定。</p>
<p>这里创建了一个计算属性<code>fullName</code>,当在视图中展示<code>fullName</code> 的时候，会执行<code>get</code>函数。</p>
<p>问题：什么时候执行<code>set</code>函数呢？</p>
<p>当更新计算属性的时候，才会执行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;/span&gt;</span><br><span class="line">     &lt;button @click=&quot;changeName&quot;&gt;更改姓名&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>在模版中添加了<code>更改姓名</code>按钮</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更改姓名</span></span><br><span class="line">      <span class="keyword">const</span> <span class="title function_">changeName</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">          fullName.<span class="property">value</span>=<span class="string">&quot;张-三丰&quot;</span> </span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">          ...<span class="title function_">toRefs</span>(obj),</span><br><span class="line">          fullName, </span><br><span class="line">          changeName <span class="comment">// 返回changeName方法</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>在<code>changeName</code>方法中，完成了对<code>fullName</code>值的修改。</p>
<p>这时候会执行<code>set</code>方法。</p>
<p>下面要做的就是完善<code>set</code>方法，给<code>obj</code>对象中的<code>name1和name2</code>属性进行赋值，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fullName = <span class="title function_">computed</span>(&#123;</span><br><span class="line">           <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">               <span class="keyword">return</span> obj.<span class="property">name1</span>+<span class="string">&quot;-&quot;</span>+obj.<span class="property">name2</span>;</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">               <span class="comment">// console.log(&quot;value=&quot;,value);</span></span><br><span class="line">               obj.<span class="property">name1</span> = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">               obj.<span class="property">name2</span> = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br></pre></td></tr></table></figure>

<p>当<code>set</code>方法执行完毕以后，文本框中的内容也发生了变化。</p>
<h2 id="5、实现全选与反选"><a href="#5、实现全选与反选" class="headerlink" title="5、实现全选与反选"></a>5、实现全选与反选</h2><p>展示基本的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;item in userList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; v-model=&quot;item.flag&quot;/&gt;</span><br><span class="line">               &lt;span&gt;&#123;&#123; item.username &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, toRefs &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line"> export default&#123;</span><br><span class="line">   name:&#x27;SelectAll&#x27;,</span><br><span class="line">   setup()&#123;</span><br><span class="line">      const list=reactive(&#123;</span><br><span class="line">        userList:[</span><br><span class="line">            &#123;</span><br><span class="line">               id:1,</span><br><span class="line">               username:&#x27;张三&#x27;,</span><br><span class="line">               flag:false     </span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">               id:2,</span><br><span class="line">               username:&#x27;李四&#x27;,</span><br><span class="line">               flag:true     </span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">               id:3,</span><br><span class="line">               username:&#x27;王五&#x27;,</span><br><span class="line">               flag:false     </span><br><span class="line">         &#125;</span><br><span class="line">    ]</span><br><span class="line">      &#125;)</span><br><span class="line">      return &#123;</span><br><span class="line">        ...toRefs(list)</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>模版中添加一个全选的复选框</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;span&gt;全选&lt;/span&gt;</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; v-model=&quot;isAll&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>这里给复选框双向绑定了<code>isAll</code>这个计算属性。当复选框的状态发生变化的时候，会执行<code>isAll</code>这个计算属性的<code>set</code>方法（修改计算属性的值）。</p>
<p>例如：最开始的时候，<code>全选</code>复选框没有选中，当单击该复选框，将其选中，会执行<code>set</code>方法，在该方法中的<code>value</code>参数值就是<code>true</code>。</p>
<p>这样数据中的<code>flag</code>属性都是<code>true</code>，所有的小复选框都被选中了。</p>
<p>当然，第一次打开页面的时候，也会执行<code>isAll</code>这个计算属性的<code>get</code>方法，这时候，我们发现，有的小复选框没有选中，这样<code>every</code>返回的就是<code>false</code>，从而<code>全选</code>复选框也不会被选中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 计算属性</span></span><br><span class="line">     <span class="keyword">const</span> isAll=<span class="title function_">computed</span>(&#123;</span><br><span class="line">       <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">           <span class="comment">// every 必须每一个小复选框，都选中，isAll才为true</span></span><br><span class="line">           <span class="keyword">return</span> list.<span class="property">userList</span>.<span class="title function_">every</span>(<span class="function"><span class="params">item</span>=&gt;</span>item.<span class="property">flag</span>===<span class="literal">true</span>);</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">           <span class="comment">//console.log(value);</span></span><br><span class="line">           <span class="comment">// value 参数就是设置全选框的新状态</span></span><br><span class="line">           list.<span class="property">userList</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span>=&gt;</span>item.<span class="property">flag</span> = value);</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">     <span class="keyword">return</span> &#123;</span><br><span class="line">       ...<span class="title function_">toRefs</span>(list),</span><br><span class="line">       isAll</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 总结：计算属性使用场景：</span><br><span class="line">1. 求和，求总价 计算求值...</span><br><span class="line"> 2. 全选反选 ...</span><br></pre></td></tr></table></figure>

<h1 id="七、侦听器"><a href="#七、侦听器" class="headerlink" title="七、侦听器"></a>七、侦听器</h1><p><code>vue</code>中想监听数据的变化，应该怎么办？（监听器）</p>
<p>通过<code>watch</code>可以侦听到数据的变化。</p>
<p>我们可以在<code>setup</code>函数中使用<code>watch</code>函数创建一个侦听器。<strong>监听响应式数据的变化，</strong>然后执行一个回调函数，可以获取到监听的数据的新值与旧值。</p>
<p><code>watch</code>的三个参数</p>
<p>第一个参数：要监听的数据</p>
<p>第二个参数：监听到的数据变化后执行的函数，这个函数有两个参数，分别是新值和旧值。</p>
<p>第三个参数：选项对象，<code>deep</code>(深度监听)和<code>immediate</code>（立即执行）</p>
<p><code>Watch</code>函数的返回值是一个函数，作用是用来取消监听。</p>
<p>基本使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">     </span><br><span class="line">          &lt;!--这里使用了lazy,保证当文本框失去焦点后，才去执行对应操作--&gt;</span><br><span class="line">        &lt;span&gt;&lt;input type=&quot;text&quot; v-model.lazy=&quot;question&quot; /&gt;&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;answer&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">  export default&#123;</span><br><span class="line">    name:&#x27;WatchApp&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">     const question = ref(&#x27;&#x27;);</span><br><span class="line">     const answer = ref(&#x27;&#x27;);</span><br><span class="line">     watch(question,async(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    // console.log(&#x27;newValue=&#x27;,newValue);</span><br><span class="line">    //  console.log(&quot;oldValue=&quot;,oldValue);</span><br><span class="line">      const response = await fetch(&#x27;https://www.yesno.wtf/api&#x27;);</span><br><span class="line">      const data = await response.json();</span><br><span class="line">      answer.value = data.answer;</span><br><span class="line"></span><br><span class="line">     &#125;)</span><br><span class="line">     return &#123;</span><br><span class="line">      question,</span><br><span class="line">      answer</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，<code>setup</code>函数内，定义两个响应式对象分别是<code>question</code>与<code>answer</code>,这两项的内容都是字符串，所以通过<code>ref</code>来创建。使用<code>watch</code>来监听<code>quest</code>的变化，由于<code>question</code>与文本框进行了双向绑定，当在文本框中输入内容后，<code>question</code>的值会发生变化，发生变化后，就会执行<code>watch</code>的第二个参数，也就是回调函数。该回调函数内，发送一个异步请求，注意这里使用了<code>fetch</code>方法，发送请求，该方法返回的是一个<code>promise</code>对象，所以这里使用了<code>await</code>,下面调用<code>json</code>方法获取<code>json</code>对象，注意该方法返回的也是<code>promise</code>,所以这里也使用了<code>await</code>,最后把获取到的数据给了<code>answer</code>中的<code>value</code>属性。</p>
<h2 id="1、立即执行"><a href="#1、立即执行" class="headerlink" title="1、立即执行"></a>1、<strong>立即执行</strong></h2><p>通过上面的案例，我们可以看到，当访问该页面的时候，<code>watch</code>方法并没有执行。</p>
<p>而是等待数据发生了变化以后，才执行的。</p>
<p>如果想立即执行，需要通过<code>immediate:true</code>来完成配置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(question,<span class="title function_">async</span>(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;newValue=&#x27;</span>,newValue);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;oldValue=&quot;</span>,oldValue);</span><br><span class="line">     <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://www.yesno.wtf/api&#x27;</span>);</span><br><span class="line">     <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">     answer.<span class="property">value</span> = data.<span class="property">answer</span>;</span><br><span class="line"></span><br><span class="line">    &#125;,&#123;</span><br><span class="line">     <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>这里给<code>watch</code>函数添加了第三个参数，也是一个对象，在该对象中配置了<code>immediate</code></p>
<h2 id="2、深度侦听"><a href="#2、深度侦听" class="headerlink" title="2、深度侦听"></a>2、<strong>深度侦听</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;button @click=&quot;person.user.userInfo.username = &#x27;wangwu&#x27;&quot;&gt;改名&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;person.user.userInfo.age = 80&quot;&gt;改年纪&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;  watch, ref &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">  export default&#123;</span><br><span class="line">    name:&#x27;WatchDemo&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">        //（1）ref函数参数可以是基本数据类型，也可以接受对象类型；</span><br><span class="line">          //（2）如果参数是对象类型时，其实底层的本质还是reactive,</span><br><span class="line">        const person = ref(</span><br><span class="line">           &#123;</span><br><span class="line">           user:&#123;</span><br><span class="line">              userInfo: &#123;</span><br><span class="line">                    username:&quot;zhangsan&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">            age:18,</span><br><span class="line">            address:&#x27;北京&#x27;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        )</span><br><span class="line">        watch(person.value.user.userInfo,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">            //对于复杂类型的监视，oldValue 和 newValue 会指向同一个对象, 所以值相同，oldValue无意义</span><br><span class="line">            console.log(&quot;newValue = &quot;,newValue);</span><br><span class="line">            console.log(&quot;oldValue = &quot;,oldValue);</span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            deep:true  // 指定了深度监听</span><br><span class="line">        &#125;)</span><br><span class="line">        return &#123;</span><br><span class="line">            person</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>reactive</code>的数据，用不用<code>deep：true</code>是没有影响的</p>
<p>非业务需求：尽可能不要直接深度监视 &#x3D;&gt; 相对消耗性能</p>
<p>如果是业务需求，就需要深度监视，就正常监视即可</p>
<p>最后我们把计算属性与侦听器做一个总结，看一下它们的应用场景。</p>
<p>第一点：语境上的差异</p>
<p><code>watch</code>适合一个值发生了变化，对应的要做一些其它的事情</p>
<p>而计算属性<code>computed</code>:一个值由其它的值得来，其它值发生了变化，对应的值也会变化</p>
<p>第二点：计算属性有缓存性,侦听器没有</p>
<p>由于这个特点，我们在实际的应用中，能用计算属性的，会首先考虑先使用计算属性。</p>
<p>第三点：侦听器选项提供了更加通用的方法，适合执行异步操作或者较大开销操作。</p>
<h1 id="八、组件基础"><a href="#八、组件基础" class="headerlink" title="八、组件基础"></a>八、组件基础</h1><h2 id="1、为什么使用组件"><a href="#1、为什么使用组件" class="headerlink" title="1、为什么使用组件"></a>1、为什么使用组件</h2><p>问题1: 以前遇到重复的结构代码, 怎么做的? </p>
<p>问题2: 复制粘贴? 可维护性高吗 ?</p>
<p>为什么使用组件？</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/31.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/32.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/33.png"></p>
<p>组件的好处: 各自独立, 便于复用，可维护性高</p>
<h2 id="2、什么是组件化开发"><a href="#2、什么是组件化开发" class="headerlink" title="2、什么是组件化开发"></a>2、什么是组件化开发</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 组件是可复用的 Vue 实例, 封装标签, 样式和JS代码</span><br><span class="line">2. 组件化 ：封装的思想，把页面上 `可重用的部分` 封装为 `组件`，从而方便项目的 开发 和 维护</span><br><span class="line">3. 一个页面， 可以拆分成一个个组件，一个组件就是一个整体</span><br><span class="line">4. 每个组件可以有自己独立的 结构 样式 和 行为(html, css和js)</span><br><span class="line">5. 例如：http://www.bootstrap.cn/ 所展示的效果，就契合了组件化开发的思想。</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/34.png"></p>
<p><strong>问题是，如何确定页面中哪些内容划分到一个组件中呢？</strong></p>
<p>但你如何确定应该将哪些部分划分到一个组件中呢？你可以将组件当作一种函数或者是对象来考虑（函数的功能是单一的），根据[<strong>单一功能原则</strong>]来判定组件的范围。也就是说，一个组件原则上只能负责一个功能。如果它需要负责更多的功能，这时候就应该考虑将它拆分成更小的组件。 </p>
<h2 id="3、如何创建和使用组件"><a href="#3、如何创建和使用组件" class="headerlink" title="3、如何创建和使用组件"></a>3、如何创建和使用组件</h2><p><code>App.vue</code> 是根组件, 这个比较特殊, 是最大的一个根组件。其实里面还可以注册使用其他小组件</p>
<p>使用组件的四步   单页面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 创建组件, 封装要复用的标签, 样式, JS代码</span><br><span class="line">2. 引入组件</span><br><span class="line">3. 注册组件</span><br><span class="line">4. 使用组件：组件名当成标签使用即可</span><br><span class="line">&lt;组件名&gt;&lt;/组件名&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>compnents</code>目录下面创建一个组件：<code>Header.vue</code>,该组件中的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;hm-header&quot;&gt;</span><br><span class="line">        头部区域</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name:&#x27;HeaderComp&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;less&quot;&gt;</span><br><span class="line">.hm-header &#123;</span><br><span class="line">  height: 150px;</span><br><span class="line">  border: 3px solid #000;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">div &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>App.vue</code>组件中使用上面定义的<code>Header</code>组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    </span><br><span class="line">        &lt;Header&gt;&lt;/Header&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        App</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // 导入</span><br><span class="line">import Header from &#x27;./components/Header.vue&#x27;</span><br><span class="line"> export default&#123;</span><br><span class="line">    name:&quot;App&quot;,</span><br><span class="line">     // 注册</span><br><span class="line">    components:&#123;</span><br><span class="line">        Header</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4、组件样式处理"><a href="#4、组件样式处理" class="headerlink" title="4、组件样式处理"></a>4、组件样式处理</h2><p>默认情况下，写在组件中的样式会 <code>全局生效</code>，因此很容易造成多个组件之间的样式冲突问题</p>
<p>例如，上一小节案例中，我们在<code>Header.vue</code>这个子组件中，创建了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在<code>App.vue</code>这个父组件中使用了<code>Header.vue</code>这个子组件以后，以上样式不仅对<code>Header.vue</code>组件起作用，对<code>App.vue</code>组件也是起作用。</p>
<p>如果在<code>Header.vue</code>这个组件中定义的样式，只在该组件中起作用，应该怎样处理？</p>
<p>可以给组件加上 <code>scoped</code> 属性, 可以让样式只作用于当前组件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"><span class="selector-class">.hm-header</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong><code>scoped</code>原理</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（1）当前组件内标签都被添加 data-v-hash值 的属性</span><br><span class="line">（2）css选择器都被添加 [data-v-hash值] 的属性选择</span><br></pre></td></tr></table></figure>

<p>最终效果: 必须是当前组件的元素, 才会有这个自定义属性, 才会被这个样式作用到</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/35.png"></p>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="九、组件通信"><a href="#九、组件通信" class="headerlink" title="九、组件通信"></a>九、组件通信</h1><p>每个组件有自己的数据</p>
<p>每个组件数据独立, 组件数据无法互相直接访问 (合理的)</p>
<p>但是如果需要跨组件访问数据, 怎么办呢？ &#x3D;&gt; 组件通信</p>
<p>组件通信的方式有很多: 现在先关注两种, 父传子 子传</p>
<h2 id="1、组件通信-父传子"><a href="#1、组件通信-父传子" class="headerlink" title="1、组件通信 - 父传子"></a>1、组件通信 - 父传子</h2><p>首先明确父和子是谁</p>
<p>父传子语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Son price=&quot;100&quot; title=&quot;不错&quot; :info=&quot;msg&quot;&gt;&lt;/Son</span><br></pre></td></tr></table></figure>

<p><code>App.vue</code>组件中的代码，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Header msg=&quot;hello&quot; :title=&quot;title&quot;&gt;&lt;/Header&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">const</span> title = <span class="title function_">ref</span>(<span class="string">&quot;Vue&quot;</span>);</span><br><span class="line">     <span class="keyword">return</span>&#123;</span><br><span class="line">         title</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><code>Header.vue</code>子组件中的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;HeaderComp&#x27;</span>, </span><br><span class="line">        <span class="comment">// 通过props进行接收</span></span><br><span class="line">    <span class="attr">props</span>:&#123;</span><br><span class="line">        <span class="attr">msg</span>:&#123;</span><br><span class="line">            <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">            <span class="attr">default</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">       <span class="attr">title</span>:&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">            <span class="attr">required</span>:<span class="literal">true</span></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;hm-header&quot;&gt;</span><br><span class="line">       头部区域:&#123;&#123; msg &#125;&#125;,标题：&#123;&#123; title &#125;&#125;</span><br><span class="line">   &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">父传子的基本步骤是什么?</span><br><span class="line">	父组件内, 给子组件添加属性的方式传值</span><br><span class="line">	子组件内, 通过 props 接</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">以后的数据，肯定是后台回来的，商品应该是动态渲染的</span><br><span class="line">	问题1: 一个个的写组件合理么？能循环使用组件吗?</span><br><span class="line">	问题2: 循环使用组件, 又如何向组件内传值呢?</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2、v-for-遍历展示组件练习"><a href="#2、v-for-遍历展示组件练习" class="headerlink" title="2、v-for 遍历展示组件练习"></a>2、<code>v-for</code> 遍历展示组件练习</h2><p>在<code>components</code>目录下面创建<code>MyProduct.vue</code>组件，该组件中的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;标题：&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;价格: &#123;&#123; price &#125;&#125; 元一根&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;描述: &#123;&#123; info &#125;&#125; &lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> export default&#123;</span><br><span class="line">    name:&#x27;MyProduct&#x27;,</span><br><span class="line">    props:[&quot;title&quot;,&quot;price&quot;,&quot;info&quot;,&quot;pid&quot;],</span><br><span class="line">    setup()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>App.vue</code>组件中的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">MyProduct</span> <span class="keyword">from</span> <span class="string">&#x27;./components/MyProduct.vue&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注册组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">components</span>:&#123;</span><br><span class="line">       <span class="title class_">Header</span>,</span><br><span class="line">       <span class="title class_">MyProduct</span></span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>

<p>准备数据源</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list =<span class="title function_">reactive</span>(&#123;</span><br><span class="line">          <span class="attr">productList</span>:[</span><br><span class="line">          &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">proname</span>: <span class="string">&#x27;超级好吃棒棒糖&#x27;</span>, <span class="attr">proprice</span>: <span class="number">188</span>, <span class="attr">low</span>: <span class="number">160</span>, <span class="attr">desc</span>: <span class="string">&#x27;甜&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">proname</span>: <span class="string">&#x27;超级好吃的大鸡腿&#x27;</span>, <span class="attr">proprice</span>: <span class="number">360</span>, <span class="attr">low</span>: <span class="number">320</span>, <span class="attr">desc</span>: <span class="string">&#x27;香&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">proname</span>: <span class="string">&#x27;超级无敌冰激凌&#x27;</span>, <span class="attr">proprice</span>: <span class="number">42</span>, <span class="attr">low</span>: <span class="number">30</span>, <span class="attr">desc</span>: <span class="string">&#x27;冰&#x27;</span> &#125;</span><br><span class="line">          ]</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span>&#123;</span><br><span class="line">          title,</span><br><span class="line">          ...<span class="title function_">toRefs</span>(list)</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>修改模版中的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;hr/&gt;</span><br><span class="line">      &lt;MyProduct v-for=&quot;item in productList&quot; </span><br><span class="line">      :key=&quot;item.id&quot; </span><br><span class="line">      :title=&quot;item.proname&quot; </span><br><span class="line">      :price=&quot;item.proprice&quot;</span><br><span class="line">      :info =&quot;item.desc&quot;</span><br><span class="line">      :pid =&quot;item.id&quot;</span><br><span class="line">      /&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3、单向数据流"><a href="#3、单向数据流" class="headerlink" title="3、单向数据流"></a>3、单向数据流</h2><p>在vue中需要遵循单向数据流原则： （从父到子的单向数据流动, 叫单向数据流）</p>
<ol>
<li>父组件的数据变化了，会自动向下流动影响到子组件 </li>
<li>子组件不能直接修改父组件传递过来的<code> props， props</code>是只读的！</li>
</ol>
<h2 id="4、组件通信-子传父"><a href="#4、组件通信-子传父" class="headerlink" title="4、组件通信 - 子传父"></a>4、组件通信 - 子传父</h2><p>需求: 商品组件, 实现砍价功能</p>
<p>给商品这个子组件，添加一个<code>砍价</code>的按钮，当单击该按钮的时候，将对应商品的价格减去对应的值。</p>
<p>注意：商品的价格是在父组件中。</p>
<p>这就需要子组件向父组件中传递所砍价的钱数，以及商品的编号，这样在父组件中才会找到对应的商品，然后减去对应的钱数。</p>
<p>这就是子组件向父组件中传递数据。</p>
<p>修改<code>/components/MyProduct.vue</code>子组件中的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;标题：&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;价格: &#123;&#123; price &#125;&#125; 元一根&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;描述: &#123;&#123; info &#125;&#125; &lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;setPrice&quot;&gt;砍价&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>添加了<code>砍价</code>按钮</p>
<p><code>setPrice</code>方法的实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一个参数是props</span></span><br><span class="line"><span class="comment">// 从第二个参数中解构出emit方法</span></span><br><span class="line"><span class="title function_">setup</span>(<span class="params">props,&#123;emit&#125;</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">setPrice</span> =(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">            <span class="title function_">emit</span>(<span class="string">&quot;setPrice&quot;</span>,<span class="number">10</span>,props.<span class="property">pid</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            setPrice</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>通过<code>emit</code>方法，触发父组件传递过来的<code>setPrice</code>事件，同时传递了响应的参数</p>
<p>下面修改父组件<code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyProduct v-for=&quot;item in productList&quot; </span><br><span class="line">       :key=&quot;item.id&quot; </span><br><span class="line">       :title=&quot;item.proname&quot; </span><br><span class="line">       :price=&quot;item.proprice&quot;</span><br><span class="line">       :info =&quot;item.desc&quot;</span><br><span class="line">       :pid =&quot;item.id&quot;</span><br><span class="line">       @setPrice=&quot;handleSetPrice&quot;</span><br><span class="line">       /&gt;</span><br></pre></td></tr></table></figure>

<p>这里为子组件<code>MyProduct</code>指定了事件<code>setPrice</code>事件，当子组件通过<code>emit</code>方法触发了该事件以后，会调用<code>handleSetPrice</code>方法，该方法中的实现代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 砍价</span></span><br><span class="line">     <span class="keyword">const</span> <span class="title function_">handleSetPrice</span>=(<span class="params">price,id</span>)=&gt;&#123;</span><br><span class="line">         <span class="comment">//根据id查找到对应的商品</span></span><br><span class="line">         <span class="keyword">const</span> good = list.<span class="property">productList</span>.<span class="title function_">find</span>(<span class="function"><span class="params">item</span>=&gt;</span>item.<span class="property">id</span>===id);</span><br><span class="line">         <span class="comment">// 砍价，条件是必须大于成本价，才能够砍价成功。</span></span><br><span class="line">         <span class="keyword">if</span>(good.<span class="property">proprice</span>-price&gt;good.<span class="property">low</span>)&#123;</span><br><span class="line">             good.<span class="property">proprice</span> -= price;</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">             good.<span class="property">price</span> = good.<span class="property">low</span>;</span><br><span class="line">             <span class="title function_">alert</span>(<span class="string">&quot;已经是成本价了，不能在砍了&quot;</span>);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span>&#123;</span><br><span class="line">         title,</span><br><span class="line">         ...<span class="title function_">toRefs</span>(list),</span><br><span class="line">         handleSetPrice</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<h2 id="5、组件通信–兄弟组件通信"><a href="#5、组件通信–兄弟组件通信" class="headerlink" title="5、组件通信–兄弟组件通信"></a>5、组件通信–兄弟组件通信</h2><p>这里通过<code>mitt</code>这个第三方包来实现。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mitt</span><br></pre></td></tr></table></figure>

<p>第一：创建<code>mitt</code>的实例。</p>
<p>在<code>src</code>下面创建<code>untils</code>目录，在该目录中创建<code> mitt.js</code>文件，该文件中的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"><span class="keyword">const</span> m = <span class="title function_">mitt</span>();</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> m;</span><br></pre></td></tr></table></figure>

<p>第二：在<code>components/Header.vue</code>组件中触发事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;hm-header&quot;&gt;</span><br><span class="line">       头部区域:&#123;&#123; msg &#125;&#125;,标题：&#123;&#123; title &#125;&#125;</span><br><span class="line">       &lt;button @click=&quot;handleClick&quot;&gt;兄弟组件&lt;/button&gt;</span><br><span class="line">   &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleClick</span> =(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">      </span><br><span class="line">        mitt.<span class="title function_">emit</span>(<span class="string">&quot;handleChange&quot;</span>,<span class="number">10</span>); <span class="comment">// 触发事件</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        handleClick</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>import mitt from &#39;@/utils/mitt</code>‘</p>
<p>第三：在<code>components/MyProduct.vue</code>中处理事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;onMounted&#125;<span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;@/utils/mitt&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">someMethod</span>=(<span class="params">num</span>)=&gt;&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;num=&#x27;</span>,num);</span><br><span class="line">&#125;</span><br><span class="line">       </span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onMounted&quot;</span>);</span><br><span class="line">    mitt.<span class="title function_">on</span>(<span class="string">&#x27;handleChange&#x27;</span>,someMethod);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="十、组件进阶"><a href="#十、组件进阶" class="headerlink" title="十、组件进阶"></a>十、组件进阶</h1><h2 id="1、获取Dom元素"><a href="#1、获取Dom元素" class="headerlink" title="1、获取Dom元素"></a>1、获取<code>Dom</code>元素</h2><p><code>KilgourNote:</code></p>
<blockquote>
<p>给标签加ref属性可以获取dom对象，</p>
<p>给组件标签加可以获取组件实例</p>
</blockquote>
<p>在 <code>Vue</code>中 如何获取真实<code>DOM</code>元素呢 ?</p>
<p><strong>利用<code>ref</code>可以用于 获取<code> dom</code> 元素</strong></p>
<p>基本使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3 ref=&quot;myH3&quot;&gt;标题&lt;/h3&gt;</span><br><span class="line">        &lt;button @click=&quot;handleGet&quot;&gt;获取dom元素&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"> export default&#123;</span><br><span class="line">    name:&quot;DomApp&quot;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">        const myH3 =ref(&quot;&quot;);</span><br><span class="line">        const handleGet=()=&gt;&#123;</span><br><span class="line">            console.log(myH3.value);</span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">            myH3,</span><br><span class="line">            handleGet</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>当单击按钮的时候，可以获取到对应的<code>Dom</code>元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleGet</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">           <span class="comment">// console.log(myH3.value);</span></span><br><span class="line">           myH3.<span class="property">value</span>.<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&#x27;blue&#x27;</span></span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<p>这里给获取到的<code>Dom</code>元素设置了背景色。</p>
<p><strong>通过ref属性获取组件对象</strong></p>
<p>在<code>components</code>目录下面创建<code>Demo.vue</code>组件，该组件中的代码如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;button @click=&quot;handleMethod&quot;&gt;单击&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> export default&#123;</span><br><span class="line">    name:&#x27;DemoApp&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">        const handleMethod=()=&gt;&#123;</span><br><span class="line">            console.log(&quot;hello demo&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return &#123;</span><br><span class="line">            handleMethod</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>修改<code>获取Dom元素.vue</code>组件中的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Demo</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Demo.vue&#x27;</span></span><br><span class="line"> <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;DomApp&quot;</span>,</span><br><span class="line">    <span class="attr">components</span>:&#123;</span><br><span class="line">        <span class="title class_">Demo</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>导入<code>Demo</code>组件，并且完成组件的注册</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Demo ref=&quot;demo&quot;&gt;&lt;/Demo&gt;</span><br><span class="line">       &lt;button @click=&quot;handldeDemoGet&quot;&gt;获取Demo组件&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>在模版中使用了<code>Demo</code>组件，并且添加一个<code>button</code>按钮</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> myH3 =<span class="title function_">ref</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">      <span class="keyword">const</span> demo =<span class="title function_">ref</span>(<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>创建了<code>demo</code>对象，与<code>Demo</code>组件通过<code>ref</code>属性进行关联。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handldeDemoGet</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">          demo.<span class="property">value</span>.<span class="title function_">handleMethod</span>();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">          myH3,</span><br><span class="line">          handleGet,</span><br><span class="line">          demo,</span><br><span class="line">          handldeDemoGet</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>在<code>handleDemoGet</code>方法中，可以调用<code>Demo</code>组件中的<code>hanldeMethod</code>方法。</p>
<h2 id="2、nextTick函数"><a href="#2、nextTick函数" class="headerlink" title="2、nextTick函数"></a>2、<code>nextTick</code>函数</h2><p>判断如下代码的输出结果？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);  </span><br><span class="line"><span class="keyword">const</span> pcount = <span class="title function_">ref</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"> <span class="comment">// 数字累加</span></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">btnHandle</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">            count.<span class="property">value</span> += <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// 获取对应的`DOM`元素（马上获取原生的dom内容）</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(pcount.<span class="property">value</span>.<span class="property">innerHTML</span>);</span><br><span class="line">        </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            myH3,</span><br><span class="line">            handleGet,</span><br><span class="line">            demo,</span><br><span class="line">            handldeDemoGet,</span><br><span class="line">            count, <span class="comment">// 返回count</span></span><br><span class="line">            btnHandle, <span class="comment">// 返回</span></span><br><span class="line">            pcount<span class="comment">// 返回</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>模版中的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p ref=&quot;pcount&quot;&gt;数字：&#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">       &lt;button @click=&quot;btnHandle&quot;&gt;计算&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>当单击<code>计算</code>按钮的时候，是可以完成<code>count</code>值的累加。</p>
<p>但是问题是：在浏览器的控制台中输出的是之前的<code>dom</code>，造成这一问题的原因是：<code>Vue</code>在更新<code>Dom</code>的时候是<code>异步的</code>。</p>
<p>也就是说，在更新完<code>count</code>这个状态数据以后，不是立即更新对应的<code>dom</code>元素。</p>
<p>但是，我们想更新完<code>count</code>这个状态数据库以后，立即获取到最新的<code>dom</code>元素，应该怎样处理呢？</p>
<p>这就需要使用到<code>nextTick</code>函数，如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,nextTick&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"> <span class="comment">// 数字累加</span></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">btnHandle</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">            count.<span class="property">value</span> += <span class="number">1</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="title function_">nextTick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(pcount.<span class="property">value</span>.<span class="property">innerHTML</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">        </span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p><code>nextTick(函数体)</code>：等DOM更新后, 才会触发执行此方法里的函数体</p>
<h2 id="3、dynamic动态组件"><a href="#3、dynamic动态组件" class="headerlink" title="3、dynamic动态组件"></a>3、<code>dynamic</code>动态组件</h2><p>动态组件是什么?</p>
<p><strong>是 可以改变 的 组件</strong></p>
<p>动态组件能解决什么需求呢 ?</p>
<p><strong>解决多组件同一位置, 切换显示的需求</strong></p>
<p>思考: 需要2个组件, 互斥的显示隐藏切换, 应该怎么做?</p>
<p>可以使用<code>v-show</code>，但是使用<code>动态组件</code>更加简单。</p>
<p>基本语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. component 组件(位置) + is 属性 (哪个组件)</span><br><span class="line">	&lt;component :is=&quot;要显示的组件&quot; /&gt;</span><br><span class="line">2. 修改is属性绑定的值完成组件切换	</span><br></pre></td></tr></table></figure>

<p>具体代码演示：</p>
<p>在<code>components</code>目录下面创建<code>UserAccount.vue</code>组件，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;user-account form-box&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;form-box-item&quot;&gt;</span><br><span class="line">        &lt;label for=&quot;username&quot;&gt;账 户: &lt;/label&gt;</span><br><span class="line">        &lt;input id=&quot;username&quot; type=&quot;text&quot; placeholder=&quot;请输入用户名&quot;&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;div class=&quot;form-box-item&quot;&gt;</span><br><span class="line">        &lt;label for=&quot;password&quot;&gt;密 码: &lt;/label&gt;</span><br><span class="line">        &lt;input id=&quot;password&quot; type=&quot;text&quot; placeholder=&quot;请输入密码&quot;&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;UserAccount&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;style lang=&quot;less&quot;&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>再创建<code>UserInfo.vue</code>组件，代码如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;user-info form-box&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;form-box-item&quot;&gt;</span><br><span class="line">        &lt;label for=&quot;words&quot;&gt;人生格言: &lt;/label&gt;</span><br><span class="line">        &lt;input id=&quot;words&quot; type=&quot;text&quot; placeholder=&quot;请填写人生格言&quot;&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;div class=&quot;form-box-item&quot;&gt;</span><br><span class="line">        &lt;label for=&quot;info&quot;&gt;个人简介: &lt;/label&gt;</span><br><span class="line">        &lt;input id=&quot;info&quot; type=&quot;text&quot; placeholder=&quot;请填写个人简介&quot;&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;div class=&quot;form-box-item&quot;&gt;</span><br><span class="line">        &lt;label for=&quot;hobby&quot;&gt;兴趣爱好: &lt;/label&gt;</span><br><span class="line">        &lt;input id=&quot;hobby&quot; type=&quot;text&quot; placeholder=&quot;请填写兴趣爱好&quot;&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;UserInfo&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;style lang=&quot;less&quot;&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>然后在<code>src</code>目录下面创建<code>动态组件.vue</code>这个组件，代码如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;动态组件dynamic的学习&lt;/h1&gt;</span><br><span class="line">    &lt;button class=&quot;my-btn-primary&quot; @click=&quot;comName = &#x27;UserAccount&#x27;&quot;&gt;</span><br><span class="line">      账号密码填写</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">    &lt;button class=&quot;my-btn-success&quot; @click=&quot;comName = &#x27;UserInfo&#x27;&quot;&gt;</span><br><span class="line">      个人信息填写</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">      &lt;!-- 挖个坑，在这个位置切换组件 --&gt;</span><br><span class="line">      &lt;component :is=&quot;comName&quot;&gt;&lt;/component&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import UserInfo from &#x27;./components/UserInfo.vue&#x27;</span><br><span class="line">import UserAccount from &#x27;./components/UserAccount.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class="line"> export default&#123;</span><br><span class="line">    name:&quot;DynamicApp&quot;,</span><br><span class="line">    components:&#123;</span><br><span class="line">        UserInfo,</span><br><span class="line">        UserAccount</span><br><span class="line">    &#125;,</span><br><span class="line">   setup()&#123;</span><br><span class="line">    const comName = ref(&quot;UserAccount&quot;);</span><br><span class="line">    return &#123;</span><br><span class="line">        comName</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125; </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;less&quot;&gt;</span><br><span class="line">.form-box &#123;</span><br><span class="line">  box-shadow: 0 2px 12px 0 #ddd;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  border: 1px solid #ebeef5;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  color: #303133;</span><br><span class="line">  transition: .3s;</span><br><span class="line">  min-height: 100px;</span><br><span class="line">  margin: 20px 0;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  .form-box-item &#123;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    input &#123;</span><br><span class="line">      -webkit-appearance: none;</span><br><span class="line">      background-color: #fff;</span><br><span class="line">      background-image: none;</span><br><span class="line">      border-radius: 4px;</span><br><span class="line">      border: 1px solid #dcdfe6;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">      color: #606266;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      font-size: inherit;</span><br><span class="line">      height: 40px;</span><br><span class="line">      line-height: 40px;</span><br><span class="line">      outline: none;</span><br><span class="line">      padding: 0 15px;</span><br><span class="line">      transition: border-color .2s cubic-bezier(.645,.045,.355,1);</span><br><span class="line">      margin-left: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.my-btn() &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  line-height: 1;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  background: #fff;</span><br><span class="line">  border: 1px solid #dcdfe6;</span><br><span class="line">  color: #606266;</span><br><span class="line">  -webkit-appearance: none;</span><br><span class="line">  text-align: center;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  outline: none;</span><br><span class="line">  margin: 0;</span><br><span class="line">  transition: .1s;</span><br><span class="line">  font-weight: 500;</span><br><span class="line">  padding: 12px 20px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line">.my-btn-primary &#123;</span><br><span class="line">  .my-btn();</span><br><span class="line">  background-color: #409eff;</span><br><span class="line">  border-color: #409eff;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">.my-btn-success &#123;</span><br><span class="line">  .my-btn();</span><br><span class="line">  background-color: #67c23a;</span><br><span class="line">  border-color: #67c23a;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4、插槽"><a href="#4、插槽" class="headerlink" title="4、插槽"></a>4、插槽</h2><p>需求: 要在页面中显示一个对话框, 封装成一个组件 </p>
<p>问题：组件的内容部分，不希望写死，希望能使用的时候自定义。怎么办？</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/36.png"></p>
<p>（1）父传子: 父传子固然可以完成一定层面的组件文本的定制(可以用于传值), 但是自定义性较差, 且无法自定义结构。 </p>
<p> （2）如果希望能够自定义组件内部的一些结构 &#x3D;&gt; 就需要用到插槽（可以传递结构）</p>
<h3 id="4-1-默认插槽"><a href="#4-1-默认插槽" class="headerlink" title="4.1  默认插槽"></a>4.1  默认插槽</h3><p><strong>基本使用</strong></p>
<p>默认插槽：没有起名字，默认名字叫<code>defalut</code></p>
<p>下面看一下插槽的基本使用。</p>
<p>在<code>components</code>目录下面创建<code>Dialog.vue</code>组件，该组件中的代码如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;dialog-header&quot;&gt;</span><br><span class="line">      &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> export default &#123;</span><br><span class="line">    name:&#x27;DialogApp&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.dialog &#123;</span><br><span class="line">  width: 400px;</span><br><span class="line">  border: 3px solid #000;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  margin: 10px;</span><br><span class="line">  padding: 0 10px;</span><br><span class="line">  padding-bottom: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在<code>插槽.vue</code>组件中使用上面创建的<code>Dialog.vue</code>组件，代码如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">     &lt;h3&gt;友情提示&lt;/h3&gt;</span><br><span class="line">     &lt;Dialog&gt;</span><br><span class="line">        &lt;p&gt;请输入手机号码&lt;/p&gt;</span><br><span class="line">     &lt;/Dialog&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Dialog from &#x27;./components/Dialog.vue&#x27;</span><br><span class="line">  export default&#123;</span><br><span class="line">    name:&#x27;SlotApp&#x27;,</span><br><span class="line">    components:&#123;</span><br><span class="line">        Dialog</span><br><span class="line">    &#125;,</span><br><span class="line">    setup()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在使用<code>Dialog</code>组件的时候，指定了内容。</p>
<p>在<code>Dialog.vue</code>组件中，可以指定插槽中默认显示的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;dialog-header&quot;&gt;</span><br><span class="line">     &lt;slot&gt;</span><br><span class="line">       &lt;p&gt;请输入邮箱&lt;/p&gt;</span><br><span class="line">     &lt;/slot&gt;</span><br><span class="line">   &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>这样在<code>插槽.vue</code>组件中，如果不指定内容，显示插槽中默认的内容，如果指定了内容，就展示所指定的内容。</p>
<h3 id="4-2-具名插槽"><a href="#4-2-具名插槽" class="headerlink" title="4.2 具名插槽"></a>4.2 具名插槽</h3><p>组件内有 2处以上 的内容，不确定怎么办?</p>
<p>可以自定义名字，通过<code>name</code>自定义名字，可以实现定向分发</p>
<p>需求：一个组件内有多处，需要外部传入标签，进行定制</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法:</span><br><span class="line">1. 多个slot使用name属性区分名字 &lt;slot name=&quot;content&quot;&gt;&lt;/slot&gt;</span><br><span class="line">2. template配合v-slot:名字来分发对应标签</span><br><span class="line">v-slot:可以简化成#</span><br></pre></td></tr></table></figure>

<p><code>Dialog.vue</code>组件中的代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;dialog-header&quot;&gt;</span><br><span class="line">        &lt;slot name=&quot;header&quot; &gt;&lt;/slot&gt;</span><br><span class="line">      &lt;slot&gt;</span><br><span class="line">        &lt;p&gt;请输入邮箱&lt;/p&gt;</span><br><span class="line">      &lt;/slot&gt;</span><br><span class="line">      &lt;slot name = &quot;footer&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>添加了两个具名插槽，分别是<code>header</code>和<code>footer</code></p>
<p>修改<code>插槽.vue</code>组件中的代码，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">     &lt;h3&gt;友情提示&lt;/h3&gt;</span><br><span class="line">     &lt;Dialog&gt;</span><br><span class="line">        &lt;p&gt;请输入手机号码&lt;/p&gt;</span><br><span class="line">     &lt;/Dialog&gt;</span><br><span class="line">     &lt;Dialog &gt;</span><br><span class="line">         &lt;!--使用header插槽--&gt;</span><br><span class="line">        &lt;template v-slot:header&gt;</span><br><span class="line">            &lt;p&gt;我是头部&lt;/p&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line"> &lt;!--使用footer插槽--&gt;</span><br><span class="line">        &lt;template v-slot:footer&gt;</span><br><span class="line">            &lt;p&gt;我是底部&lt;/p&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">     &lt;/Dialog&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在 Vue 中，很多指令都有简写形式，v-slot:name 指令也有简写形式，比如看我们下面的示例。</p>
<p><strong>原写法：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-slot:footer&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p><strong>简写</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;template #footer&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-作用域插槽"><a href="#4-3-作用域插槽" class="headerlink" title="4.3  作用域插槽"></a>4.3  作用域插槽</h3><p>我们仔细思考插槽的使用，会发现这有一点类似于父子组件传递，<strong>只不过插槽传递的是模板内容罢了</strong>。那么涉及到传值，就会有一个作用域的问题</p>
<p>作用域插槽: 定义 <code>slot </code>插槽的同时, 是可以传值的。给插槽上可以绑定数据，将来使用组件时可以用。</p>
<p>修改<code>Dialog.vue</code>组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;slot title=&quot;标题1&quot; msg = &quot;hello title&quot;&gt;</span><br><span class="line">       &lt;p&gt;请输入邮箱&lt;/p&gt;</span><br><span class="line">     &lt;/slot&gt;</span><br></pre></td></tr></table></figure>

<p>这里指定了<code>title,msg</code>两个属性</p>
<p>在<code>插槽.vue</code>组件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Dialog &gt;</span><br><span class="line">         &lt;template v-slot:header&gt;</span><br><span class="line">            &lt;p&gt;头部布局 &lt;/p&gt;</span><br><span class="line">         &lt;/template&gt;</span><br><span class="line">                    </span><br><span class="line">        &lt;template v-slot=&quot;&#123;title,msg&#125;&quot;&gt;</span><br><span class="line">              &lt;p&gt;请输入用户名:&#123;&#123; title &#125;&#125;--&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">       </span><br><span class="line">      &lt;template v-slot:footer&gt;</span><br><span class="line">                &lt;p&gt;底部布局 &lt;/p&gt;</span><br><span class="line">             &lt;/template&gt;</span><br><span class="line">            </span><br><span class="line">        &lt;/Dialog&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>通过<code>v-slot</code>来指定了一个值<code>slotProps</code>，它是一个对象，该对象中存储了对应的数据。</p>
<p>我们都知道对象是可以解构的，所以我们在父组件（<code>插槽.vue</code>）中还可以直接使用解构的写法来获取数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;友情提示&lt;/h3&gt;</span><br><span class="line">     &lt;Dialog   v-slot=&quot;&#123;title,msg&#125;&quot;&gt;</span><br><span class="line">        &lt;p&gt;请输入手机号码&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; title &#125;&#125;,&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class="line">     &lt;/Dialog&gt;</span><br></pre></td></tr></table></figure>



<h1 id="十一、生命周期"><a href="#十一、生命周期" class="headerlink" title="十一、生命周期"></a>十一、生命周期</h1><h2 id="1、生命周期基本认知"><a href="#1、生命周期基本认知" class="headerlink" title="1、生命周期基本认知"></a>1、生命周期基本认知</h2><p><code>vue</code>组件生命周期：从创建 到 销毁 的整个过程就是 – <code>Vue</code>实例的 - 生命周</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/37.png"></p>
<h2 id="2、生命周期探讨"><a href="#2、生命周期探讨" class="headerlink" title="2、生命周期探讨"></a>2、生命周期探讨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">在这一小节中，我们看一下`vue`生命周期中其它的一些钩子函数内容。</span><br><span class="line"></span><br><span class="line">其实`Vue`实例的生命周期，主要分为三个阶段，分别为</span><br><span class="line"></span><br><span class="line">- 挂载(初始化相关属性,例如`watch`属性，`method`属性)</span><br><span class="line">  1. `beforeCreate`</span><br><span class="line">  2. `created`</span><br><span class="line">  3. `beforeMount`</span><br><span class="line">  4. `mounted`</span><br><span class="line">- 更新(元素或组件的变更操作)</span><br><span class="line">  1. `beforeUpdate`</span><br><span class="line">  2. `updated`</span><br><span class="line">- 销毁（销毁相关属性）</span><br><span class="line">  1. `beforeUnmount`</span><br><span class="line">  2. ``unmounted`</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> export default&#123;</span><br><span class="line">    name:&#x27;CreateLife&#x27;,</span><br><span class="line">    beforeCreate()&#123;</span><br><span class="line">        console.log(&quot;beforCreate&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">          console.log(&quot;created&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeMount() &#123;</span><br><span class="line">          console.log(&quot;beforeMount&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">        mounted() &#123;</span><br><span class="line">          console.log(&quot;mounted&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeUpdate() &#123;</span><br><span class="line">          console.log(&quot;beforeUpdate&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">       updated() &#123;</span><br><span class="line">          console.log(&quot;updated&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeUnmount() &#123;</span><br><span class="line">          console.log(&quot;beforeUnmount&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">        unmounted() &#123;</span><br><span class="line">          console.log(&quot;`unmounted&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们将所有的钩子函数都添加上了，然后打开浏览器，看下执行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">beforCreate</span><br><span class="line">created</span><br><span class="line">beforeMount</span><br><span class="line">mounted</span><br></pre></td></tr></table></figure>

<p><code>beforeCreate</code>: <code>Vue</code>实例初始化之后，以及事件初始化，以及组件的父子关系确定后执行该钩子函数，一般在开发中很少使用</p>
<p><code>created</code>: 在调用该方法之前，初始化会被使用到的状态，状态包括<code>props</code>,<code>methods</code>,<code>data</code>,<code>computed</code>,<code>watch</code>.由于<code>data</code>数据已经初始化，所以可以获取到组件的数据。</p>
<p><code>beforeMount</code>:在执行该钩子函数的时候，虚拟<code>DOM</code>已经创建完成，马上就要渲染了,经过这一步后，在模板中所写的<code>&#123;&#123;foo&#125;&#125;</code>会被具体的数据所替换掉。</p>
<p>所以下面执行<code>mounted</code>的时候，可以看到真实的数据。同时整个组件内容已经挂载到页面中了，数据以及真实<code>DOM</code>都已经处理好了，可以在这里操作真实<code>DOM</code>了，也就是在<code>mounted</code>的时候，页面已经被渲染完毕了，在这个钩子函数中，我们可以去发送<code>ajax</code>请求。</p>
<p>下面看一下更新的操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">&#123;&#123; foo &#125;&#125;</span><br><span class="line">&lt;button @click=&quot;update&quot;&gt;更新&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">     <span class="attr">update</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">foo</span> = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">       &#125;,</span><br><span class="line">      </span><br><span class="line"> &#125;,</span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">     <span class="attr">foo</span>:<span class="string">&#x27;hello&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>这里在<code>data</code>函数中定义了<code>foo</code>，然后单击<code>更新</code>按钮的时候，调用<code>update</code>函数完成<code>foo</code>的值更新。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">当整个组件挂在完成后，有可能会进行数据的修改，当`Vue`发现`data`中的数据发生了变化，会触发对应组件的重新渲染，先后调用了`beforeUpdate` 和`updated`钩子函数。</span><br><span class="line"></span><br><span class="line">在`updated`之前`beoreUpdate`之后有一个非常重要的操作就是虚拟`DOM`会重新构建，也就是新构建的虚拟`DOM`与上一次的虚拟`DOM`树利用`diff`算法进行对比之后重新渲染。</span><br><span class="line"></span><br><span class="line">而到了`updated`这个方法，就表示数据已经更新完成，`dom`也重新`render`完成。</span><br></pre></td></tr></table></figure>

<p>销毁：</p>
<p><code>beforeUnmount,unmounted</code></p>
<p><code>Vue</code>实例已经被销毁，所有的事件监听器会被移除，所有的子实例也会被销毁。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0.png"></p>
<p><code>setup</code>是在组件初始化之前执行的，是在<code>beforeCreate</code>与<code>created</code>之间执行的，所以<code>beforeCreate</code>与<code>created</code>的代码都可以放到<code>setup</code>函数中。</p>
<p>所以，在上图中，我们可以看到<code>beforeCreate</code>与<code>created</code>在<code>setup</code>中没有对应的实现。</p>
<p>其它的都是在钩子函数名称前面添加上<code>on</code>,并且首字母大写。</p>
<p>注意:<code>onUnmounted</code>类似于之前的<code>destoryed</code>，调用组件的<code>onUnmounted</code>方法会触发<code>unmounted</code>钩子函数</p>
<h1 id="十二、路由"><a href="#十二、路由" class="headerlink" title="十二、路由"></a>十二、路由</h1><h2 id="1、单页应用程序-SPA-Single-Page-Application"><a href="#1、单页应用程序-SPA-Single-Page-Application" class="headerlink" title="1、单页应用程序: SPA - Single Page Application"></a>1、单页应用程序: <code>SPA - Single Page Application</code></h2><p>具体使用示例: 网易云音乐 <code>https://music.163.com</code></p>
<p>单页面应用(<code>SPA</code>): 所有功能在一个<code>html</code>页面上实现 (多页面应用程序<code>MPA</code>)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">优点：</span><br><span class="line">	 不整个刷新页面，每次请求仅获取需要的部分，用户体验更好</span><br><span class="line">	 数据传递容易, 开发效率高</span><br><span class="line"> 缺点：</span><br><span class="line">	 开发成本高(需要学习专门知识 - 路由)</span><br><span class="line">	 首次加载会比较慢一点。不利于seo     </span><br></pre></td></tr></table></figure>

<h2 id="2、路由的介绍"><a href="#2、路由的介绍" class="headerlink" title="2、路由的介绍"></a>2、路由的介绍</h2><p>前端<code>Vue</code>中的路由是什么</p>
<p>路径 和 组件的映射关系</p>
<p>路径 和 组件的切换匹配, 怎么实现呢?</p>
<p><code>vue-router</code>：<code> vue-router</code>本质是<code>vue</code>官方的一个路由插件，是一个第三方包</p>
<p>官网:<code> https://router.vuejs.org/zh</code></p>
<p><code>vue-router</code>集成了 路径 和 组件的切换匹配处理，我们只需要配置规则即可。</p>
<p>在具体学习<code>vue-router</code>如何使用之前，我们需要认知 组件的两种分类</p>
<p>组件分类： .vue文件分2类, 一个是页面组件, 一个是复用组件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/images/39.png"></p>
<p><code>src/views</code>文件夹: 页面组件 - 页面展示 - 配合路由用</p>
<p><code>src/components文件夹</code>:复用组件 - 展示数据 - 常用于复用</p>
<h2 id="3、vue-router基本使用"><a href="#3、vue-router基本使用" class="headerlink" title="3、vue-router基本使用"></a>3、<code>vue-router</code>基本使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router</span><br></pre></td></tr></table></figure>

<p>首先在项目中单的<code>src</code>目录下面创建一个<code>views</code>文件夹，在该文件夹中创建以下页面组件</p>
<p><code>find.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;发现音乐&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;发现音乐&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;发现音乐&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;FindIndex&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>my.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;我的音乐&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;我的音乐&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;我的音乐&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;MyIndex&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>part.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;好朋友&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;好朋友&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;好朋友&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;PartIndex&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>src</code>目录下面<code>router</code>目录，在<code>router</code>目录下面创建<code>index.js</code>文件，该文件中的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes =[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;/find&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;find&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/find.vue&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;/my&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;my&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/my.vue&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;/part&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;part&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/part.vue&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> router =<span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="comment">//  //history模式：createWebHistory</span></span><br><span class="line">    <span class="attr">history</span>:<span class="title function_">createWebHashHistory</span>(),<span class="comment">//使用hash模式</span></span><br><span class="line">    routes</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<p>在<code>main.js</code>入口文件中导入以上创建的路由对象，并且挂在到<code>Vue</code>实例中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>; <span class="comment">// 导入路由实例</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(router).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>) <span class="comment">// 使用路由</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在<code>App.vue</code>中添加路由出口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;div class=&quot;footer_wrap&quot;&gt;</span><br><span class="line"> &lt;!-- router-link本质还是a标签，通过 to 配置属性指定跳转路径，to无需# --&gt;</span><br><span class="line">    </span><br><span class="line">      &lt;router-link to=&quot;/find&quot;&gt;发现音乐&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link to=&quot;/my&quot;&gt;我的音乐&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link to=&quot;/part&quot;&gt;朋友&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">     </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;top&quot;&gt;</span><br><span class="line">      &lt;!-- 指定出口：决定匹配的组件，在哪渲染 --&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default&#123;</span><br><span class="line">    name:&#x27;App&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">.footer_wrap &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  left: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  display: flex;</span><br><span class="line">  width: 100%;</span><br><span class="line">  text-align: center;</span><br><span class="line">  background-color: #333;</span><br><span class="line">  color: #ccc;</span><br><span class="line">&#125;</span><br><span class="line">.footer_wrap a &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  text-decoration: none;</span><br><span class="line">  padding: 20px 0;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  background-color: #333;</span><br><span class="line">  color: #ccc;</span><br><span class="line">  border: 1px solid black;</span><br><span class="line">&#125;</span><br><span class="line">.footer_wrap a:hover &#123;</span><br><span class="line">  background-color: #555;</span><br><span class="line">&#125;</span><br><span class="line">.top &#123;</span><br><span class="line">  padding-top: 62px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.active &#123;</span><br><span class="line">  background-color: olive!important;</span><br><span class="line">  color: #fff!important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>启动项目进行测试。</p>
<h2 id="4、声明式导航-跳转传参"><a href="#4、声明式导航-跳转传参" class="headerlink" title="4、声明式导航 - 跳转传参"></a>4、声明式导航 - 跳转传参</h2><p>目标：在跳转路由时, 可以给路由对应的组件内传值</p>
<p>在<code>router-link</code>上的<code>to</code>属性传值, 语法格式如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/path?参数名=值</span><br><span class="line">/path/值 – 需要路由对象提前配置 path: “/path/参数名</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/my?id=1&quot;&gt;我的音乐&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>这里传递了参数<code>id</code>,表示音乐的编号。</p>
<p>看一下<code>my.vue</code>组件中怎样接收参数？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;我的音乐:&#123;&#123; $route.query.id &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>setup</code>函数中，通过如下方方式接收参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;MyIndex&#x27;</span>,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> route =<span class="title function_">useRoute</span>();</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>.<span class="property">id</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>下面再来看另外一种传递参数的情况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/find/10&quot;&gt;发现音乐&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>修改<code>App.vue</code>组件中的链接</p>
<p>修改<code>router/index.js</code>定义的路由规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes =[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;/find/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;find&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/find.vue&quot;</span>)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>在配置路由规则的时候，需要指定对应的参数。</p>
<p>修改<code>views/find.vue</code>组件中的代码，在该组件中接收传递过来的参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;发现音乐：&#123;&#123; $route.params.id &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>在模版中通过<code>$route.params</code>来接收传递过来的参数</p>
<p>同理<code>setup</code>入口函数中的处理如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;FindIndex&#x27;</span>,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> route = <span class="title function_">useRoute</span>();</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;id=&quot;</span>,route.<span class="property">params</span>.<span class="property">id</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5、重定向"><a href="#5、重定向" class="headerlink" title="5、重定向"></a>5、重定向</h2><p>匹配<code>path</code>后, 强制跳转<code>path</code>路径</p>
<p>修改<code>router/index.js</code>中所定义的路由规则：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> routes =[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">redirect</span>:<span class="string">&quot;/my&quot;</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>当在浏览器中输入地址：<code>http://localhost:8080/#/</code>的时候，直接调整到<code>/my</code></p>
<h2 id="6、404"><a href="#6、404" class="headerlink" title="6、404"></a>6、404</h2><p>问题: 当访问不存在的页面应该要显示什么呢？</p>
<p>404：当找不到路径匹配时，给个提示页面</p>
<p>在<code>router/index.js</code>文件中的<code>routes</code>数组中添加如下路由规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">       <span class="attr">path</span>:<span class="string">&#x27;/part&#x27;</span>,</span><br><span class="line">       <span class="attr">name</span>:<span class="string">&#x27;part&#x27;</span>,</span><br><span class="line">       <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/part.vue&quot;</span>)</span><br><span class="line">   &#125;,</span><br><span class="line">       <span class="comment">// 404</span></span><br><span class="line">     &#123; <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)*&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;NotFound&#x27;</span>, <span class="attr">component</span>: <span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/NotFound.vue&quot;</span>) &#125;,</span><br></pre></td></tr></table></figure>

<p>在<code>src/views</code>目录中创建<code>NotFound.vue</code>组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    你访问的页面不存在</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="7、编程式导航"><a href="#7、编程式导航" class="headerlink" title="7、编程式导航"></a>7、编程式导航</h2><p>编程式导航：用<code>JS</code>代码来进行跳转</p>
<p>语法: <code>path</code>或者<code>name</code>任选一个 &#x2F;&#x2F;  location.href&#x3D;”&#x2F;home&#x2F;index”</p>
<p>修改<code>views/find.vue</code>组件中的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;发现音乐&lt;/p&gt;</span><br><span class="line">   &lt;button @click=&quot;handleClick&quot;&gt;跳转到我的音乐&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里需要导入useRouter </span></span><br><span class="line"><span class="keyword">import</span> &#123; useRoute,useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;FindIndex&#x27;</span>,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> route = <span class="title function_">useRoute</span>();</span><br><span class="line">      <span class="keyword">const</span> router = <span class="title function_">useRouter</span>(); <span class="comment">// 创建router实例</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;id=&quot;</span>,route.<span class="property">params</span>.<span class="property">id</span>);</span><br><span class="line">        <span class="comment">// 创建handleClick函数</span></span><br><span class="line">      <span class="keyword">const</span> <span class="title function_">handleClick</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">        router.<span class="title function_">push</span>(<span class="string">&quot;/my&quot;</span>) <span class="comment">// 根据路径进行跳转</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span>&#123;</span><br><span class="line">        handleClick</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>或者采用如下写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleClick</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">       router.<span class="title function_">push</span>(&#123;</span><br><span class="line">         <span class="attr">path</span>:<span class="string">&quot;/my&quot;</span></span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<p>下面通过<code>name</code>的方式实现跳转</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleClick</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">       router.<span class="title function_">push</span>(&#123;</span><br><span class="line">         <span class="attr">name</span>:<span class="string">&#x27;my&#x27;</span> <span class="comment">// 这里指定的就是路由的名字</span></span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>



<p>当然在编程式导航的时候，可以进行参数的传递。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleClick</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">       router.<span class="title function_">push</span>(&#123;</span><br><span class="line">         <span class="attr">name</span>:<span class="string">&#x27;my&#x27;</span>,</span><br><span class="line">         <span class="attr">query</span>:&#123;</span><br><span class="line">           <span class="string">&quot;id&quot;</span>:<span class="number">12</span></span><br><span class="line">         &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<p>这里是通过<code>query</code>的方式来进行传参的在<code>my.vue</code>组件中通过<code>$route.query.id </code>方式来进行接收。</p>
<h2 id="8、路由嵌套"><a href="#8、路由嵌套" class="headerlink" title="8、路由嵌套"></a>8、路由嵌套</h2><p>在现有的一级路由下, 再嵌套二级路</p>
<p>二级路由示例-网易云音乐-发现音乐下 <code>https://music.163.com</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="E:/netcore/Vue%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/%E8%AE%B2%E4%B9%89/images/50.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 创建需要用的所有组件</span><br><span class="line"> src/views/Find.vue -- 发现音乐页</span><br><span class="line"> src/views/My.vue -- 我的音乐页</span><br><span class="line"> src/views/second/recommend.vue -- 发现音乐页 / 推荐页面</span><br><span class="line"> src/views/second/ranking.vue -- 发现音乐页 / 排行榜页面</span><br><span class="line"> src/views/second/songList.vue -- 发现音乐页 / 歌单页</span><br></pre></td></tr></table></figure>

<p>在<code>views</code>目录下面创建<code>second</code>目录，并且在该目录下面创建以上对应的组件</p>
<p>修改<code>router/index.js</code>文件中所定义的路由规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes =[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">redirect</span>:<span class="string">&quot;/my&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;/find/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;find&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/find.vue&quot;</span>),</span><br><span class="line">        <span class="comment">// 配置子路由</span></span><br><span class="line">        <span class="attr">children</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>:<span class="string">&#x27;ranking&#x27;</span>,</span><br><span class="line">                <span class="attr">name</span>:<span class="string">&#x27;ranking&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/second/rank.vue&quot;</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>:<span class="string">&#x27;recommend&#x27;</span>,</span><br><span class="line">                <span class="attr">name</span>:<span class="string">&#x27;recommend&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/second/recommend.vue&quot;</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>:<span class="string">&#x27;songlist&#x27;</span>,</span><br><span class="line">                <span class="attr">name</span>:<span class="string">&quot;songlist&quot;</span>,</span><br><span class="line">                <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/second/songList.vue&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;/my&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;my&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&quot;../views/my.vue&quot;</span>)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>在<code>find.vue</code>组件中添加<code>router-view</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;发现音乐：&#123;&#123; $route.params.id &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;发现音乐&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;发现音乐&lt;/p&gt;</span><br><span class="line">      &lt;button @click=&quot;handleClick&quot;&gt;跳转到我的音乐&lt;/button&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/#/find/10/recommend</span><br></pre></td></tr></table></figure>

<p>输入以上地址进行测试。</p>
<p>有可能会出现文件名称的错误，所以在<code>vue.config.js</code>文件中关闭检测功能</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">lintOnSave</span>: <span class="literal">false</span> <span class="comment">// 关闭检测</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>参考：<code>https://blog.csdn.net/qq_57587705/article/details/124674660</code></p>
<p>以上是关于路由的基本应用，关于其他的应用，在项目中会进行讲解。</p>
<h1 id="十三、Vuex"><a href="#十三、Vuex" class="headerlink" title="十三、Vuex"></a>十三、<code>Vuex</code></h1><h2 id="1、vuex-概述"><a href="#1、vuex-概述" class="headerlink" title="1、vuex 概述"></a>1、<code>vuex</code> 概述</h2><p><code>vuex</code>是<code>vue</code>的状态管理工具，<strong>状态即数据</strong>。 状态管理就是集中管理<code>vue</code>中 <strong>通用的</strong> 一些数据</p>
<p>注意（官方原文）：<code>https://vuex.vuejs.org/zh/guide/</code></p>
<ul>
<li>不是所有的场景都适用于<code>vuex</code>，只有在必要的时候才使用<code>vuex</code></li>
<li>使用了<code>vuex</code>之后，会附加更多的框架中的概念进来，增加了项目的复杂度  （数据的操作更便捷，数据的流动更清晰）</li>
</ul>
<p><code>vuex</code>的优点: 方便的解决多组件的共享状态</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="E:/netcore/Vue%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/%E8%AE%B2%E4%B9%89/images/vuex1.png"></p>
<ul>
<li><p>它是独立于组件而单独存在的，所有的组件都可以把它当作  <strong>一座桥梁</strong> 来进行通讯。</p>
</li>
<li><p>特点：</p>
<ul>
<li><strong>响应式</strong>： 只要仓库一变化，其他所有地方都更新 （太爽了！！！）</li>
<li>操作更简洁</li>
</ul>
</li>
</ul>
<p><strong>什么数据适合存到<code>vuex</code>中</strong></p>
<p>一般情况下，只有  <strong>多个组件均需要共享的数据</strong> ，才有必要存储在<code>vuex</code>中，</p>
<p>对于某个组件中的私有数据，依旧存储在组件自身的data中。</p>
<p>例如：</p>
<ul>
<li>对于所有组件而言，当前登陆的   <strong>用户信息</strong>  是需要在全体组件之间共享的，则它可以放在vuex中</li>
<li>对于文章详情页组件来说，当前的用户浏览的文章列表数据则应该属于这个组件的私有数据，应该要放在这个组件data中。</li>
</ul>
<h2 id="2、Vuex基本使用"><a href="#2、Vuex基本使用" class="headerlink" title="2、Vuex基本使用"></a>2、<code>Vuex</code>基本使用</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="E:/netcore/Vue%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/%E8%AE%B2%E4%B9%89/images/Vuex.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Vuex是专门为Vue.js设计的状态管理库。</span><br><span class="line"></span><br><span class="line">Vuex采用集中式的方式存储需要共享的状态。</span><br><span class="line"></span><br><span class="line">Vuex的作用是进行状态管理，解决复杂组件通信，数据共享的问题。</span><br><span class="line"></span><br><span class="line">什么情况下使用Vuex?</span><br><span class="line"></span><br><span class="line">非必要的情况下不要使用Vuex.</span><br><span class="line"></span><br><span class="line">如果是小项目，并且不会涉及到大量组件的通信，不需要使用Vuex,使用反而增加了项目的复杂度。</span><br><span class="line"></span><br><span class="line">如果是开发大型的单页应用程序，这时会涉及到多个视图依赖于同一状态，并且来自不同视图的行为需要变更同一状态，这时就需要用到Vuex.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">以上图能够理解，那么我们就理解了Vuex.</span><br><span class="line"></span><br><span class="line">我们先来看一下State,State是全局管理的状态，把状态绑定了到了组件，也就是视图(Vue Components)上,渲染到界面上，展示给用户。用户可以和视图进行交互，例如单击视图中的按钮。这时会通过Dispatch来分发Actions.在Actions中可以进行异步操作(Backend API),例如单击按钮后，可以发送异步的ajax请求。到异步操作结束后，可以执行Commit提交Mutations的操作，记录状态的更改。Mutations必须是同步的，所有状态的更改都需要通过Mutations来完成。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">下面我们再来总结一下关于Vuex中核心概念</span><br><span class="line"></span><br><span class="line">Store:就是仓库，是使用Vuex的核心，每一个应用只有一个Store,Store是一个容器。包含了应用中的大部分的状态，当然我们是不能直接改变Store中的状态，我们要通过提交Mutation的方式来修改状态。</span><br><span class="line"></span><br><span class="line">State:就是状态，保存在Store中，因为Store是唯一的，所以State也是唯一的。但是所有的状态都保存在State中，会让状态难以维护，我们后面可以通过模块来解决这个问题。注意这里的状态是响应式的。</span><br><span class="line"></span><br><span class="line">Getter:就是Vuex中的计算属性，方便从一个属性，派生出其它的值。它的内部可以对计算的结果进行缓存，只有当所依赖的状态发生了改变后，才会重新进行计算。</span><br><span class="line"></span><br><span class="line">Mutation:状态的变化必须通过提交Mutation来完成，Action与Mutation类似，不同的地方是：Action可以进行异步的操作，内部需要改变状态的时候，都要提交Mutation</span><br><span class="line"></span><br><span class="line">Module:如果我们把所有的状态都存储到了State中，后期会变得非常难维护，Store也就变得非常臃肿，为了解决这个问题，Vuex允许我们将Store分隔成模块。每一个模块都有自己的State,Mutation,Action,Getter,在后期的案例中，我们会体会Module的使用。</span><br></pre></td></tr></table></figure>

<p>在这里我们先来看一下<code>vuex</code>的基本使用</p>
<p>在<code>store/index.js</code>文件中，添加了如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex</span><br></pre></td></tr></table></figure>

<p>在<code>src</code>目录下面创建<code>store</code>目录，在该目录下面创建<code>index.js</code>文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;&#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在仓库中添加了一个状态数据，<code>username</code>。</p>
<p>下面就可以在组件中获取对应的状态数据。（创建一个<code>App.vue</code>组件）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;HelloWorld：&#123;&#123;$store.state.username &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default&#123;</span><br><span class="line">    name:&#x27;App&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>main.js</code>文件中使用<code>vuex</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="comment">// import router from &quot;./router&quot;;</span></span><br><span class="line"><span class="comment">// createApp(App).use(router).mount(&#x27;#app&#x27;)</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(store).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>这里为了方便测试，暂时将路由注释掉。</p>
<p>如果在<code>setup</code>入口函数中获取状态数据，可以采用如下的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">//使用vuex仓库</span></span><br><span class="line">  <span class="keyword">const</span> store = <span class="title function_">useStore</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="property">state</span>.<span class="property">username</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3、getters用法"><a href="#3、getters用法" class="headerlink" title="3、getters用法"></a>3、<code>getters</code>用法</h2><p><code>getters</code>的作用是对<code>state</code>属性进行计算，类似于<code>vue</code>中的计算属性，getter 的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算。</p>
<p>例如把<code>username</code>中的数据倒序输出，或者过滤商品数据等。</p>
<p>在<code>store/index.js</code>文件中，添加对应的<code>getters</code>代码，如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">newName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">username</span> + <span class="string">&quot;你好！&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;&#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>返回到<code>App.vue</code>模板中使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;HelloWorld：&#123;&#123;$store.state.username &#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">      &#123;&#123; $store.getters.newName &#125;&#125;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，通过<code>$store.getters.newName</code>获取<code>getters</code>中的数据，或者是采用如下写法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;</span><br><span class="line">      &#123;&#123; $store.getters[&quot;newName&quot;] &#125;&#125;</span><br><span class="line">    &lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p><code>newName</code>本身就是对象中的一个属性。所以可以采用如上的写法。</p>
<p>在<code>setup</code>入口函数中可以采用如下的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="comment">//使用vuex仓库</span></span><br><span class="line"> <span class="keyword">const</span> store = <span class="title function_">useStore</span>();</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="property">state</span>.<span class="property">username</span>);</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="property">getters</span>.<span class="property">newName</span>);<span class="comment">// 获取仓库中的getters</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、mutations用法"><a href="#4、mutations用法" class="headerlink" title="4、mutations用法"></a>4、<code>mutations</code>用法</h2><p>状态数据的修改必须提交<code>Mutaion</code>,并且<code>Mutaion</code>的修改必须是同步执行的。</p>
<p>继续修改<code>store/index.js</code>文件中的代码，如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">newName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">username</span> + <span class="string">&quot;你好！&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">updateName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">username</span> = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;&#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在上面的<code>mutations</code>中，定义了<code>updateName</code>方法来修改<code>state</code>状态中的<code>username</code>属性的值。</p>
<p>下面返回到<code>App.vue</code>中，我们来看一下怎样使用<code>mutations</code>中的<code>updateName</code>方法完成状态更新操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;HelloWorld：&#123;&#123;$store.state.username &#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">      &#123;&#123; $store.getters.newName &#125;&#125;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">      &#123;&#123; $store.getters[&quot;newName&quot;] &#125;&#125;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;mutationsFn&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在模板中，我们添加了一个<code>提交按钮</code>，单击该按钮执行<code>mutaionsFn</code>这个函数。</p>
<p>该函数的实现如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">//使用vuex仓库</span></span><br><span class="line">  <span class="keyword">const</span> store = <span class="title function_">useStore</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="property">state</span>.<span class="property">username</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="property">getters</span>.<span class="property">newName</span>);<span class="comment">// 获取仓库中的getters</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">mutationsFn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      store.<span class="title function_">commit</span>(<span class="string">&quot;updateName&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      mutationsFn,</span><br><span class="line">    &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>mutationsFn</code>函数中，我们通过<code>store.commit</code>提交了一个<code>updateName mutations</code>，完成用户名的更新操作。</p>
<p>注意：这里需要将<code>mutationsFn</code>方法返回，在模板中才能使用。</p>
<h2 id="5、actions用法"><a href="#5、actions用法" class="headerlink" title="5、actions用法"></a>5、<code>actions</code>用法</h2><p><strong><code>actions</code>的作用：</strong></p>
<p>如果需要执行异步操作，我们需要通过<code>Action</code>来完成。</p>
<p>如果异步执行完毕后，需要修改状态，需要提交<code>Mutation</code>来修改<code>State</code>状态。因为所有的状态的修改都需要通过<code>Mutation</code>来完成。</p>
<p>例如：我们需要异步获取商品数据，就需要在<code>Action</code>中发送请求，异步完成后，需要提交<code>Mutation</code>,把数据记录到<code>State</code>中。</p>
<p>下面修改<code>store/index.js</code>中的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">      <span class="attr">count</span>:<span class="number">0</span> <span class="comment">// 添加了count这个状态值</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">newName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">username</span> + <span class="string">&quot;你好！&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">updateName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">username</span> = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">       <span class="comment">//payload是调用mutations的时候传递的额外的值。</span></span><br><span class="line">    <span class="comment">//这里就是传递过来的要累加的值</span></span><br><span class="line">    <span class="title function_">increate</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span> += payload;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//context:上下文，该对象中包含了state,commit,getters等成员</span></span><br><span class="line">    <span class="title function_">increateAsync</span>(<span class="params">context, playload</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        context.<span class="title function_">commit</span>(<span class="string">&quot;increate&quot;</span>, playload);</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;&#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们首先定义了一个<code>count</code>状态属性</p>
<p>在<code>actions</code>中定义了一个<code>increateAsync</code>方法，该方法中通过<code>setTimeout</code>进行异步请求的模拟，在1秒中以后提交<code>increate</code>这个<code>mutations</code>修改<code>count</code>的状态，这里传递了参数<code>playload</code></p>
<p>在<code>mutations</code>中定义了<code>increate</code>方法，完成了<code>count</code>这个状态值的更新。</p>
<p>返回到<code>App.vue</code>中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;</span><br><span class="line">     &#123;&#123; $store.state.count &#125;&#125;</span><br><span class="line">   &lt;/p&gt;</span><br><span class="line">   &lt;button @click=&quot;mutationsFn&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">   &lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>展示了<code>count</code>这个状态值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mutationsFn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">   <span class="comment">// store.commit(&quot;updateName&quot;);</span></span><br><span class="line">   store.<span class="title function_">dispatch</span>(<span class="string">&quot;increateAsync&quot;</span>, <span class="number">6</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    mutationsFn,</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<p>在<code>mutationsFn</code>方法中，通过<code>store.dispatch</code>来派发<code>increateAsync</code>方法，并且传递的参数是6.</p>
<p>以上就是<code>Vuex</code>的基本使用。</p>
<h2 id="6、模块基本使用"><a href="#6、模块基本使用" class="headerlink" title="6、模块基本使用"></a>6、模块基本使用</h2><p>这节课我们来看一下<code>Module</code>模块的内容。</p>
<p>如果我们把所有的状态都存储到了<code>State</code>中，后期会变得非常难维护，<code>Store</code>也就变得非常臃肿，为了解决这个问题，<code>Vuex</code>允许我们将<code>Store</code>分隔成模块。每一个模块都有自己的<code>State</code>,<code>Mutation</code>,<code>Action</code>,<code>Getter</code>等。当状态内容非常多的时候，<code>Module</code>是非常有用的。</p>
<p>例如：我们这里把用户的数据放到<code>User</code>模块中，购物车中的数据放到<code>Cart</code>模块中等等。</p>
<p>下面我们先来定义模块的内容，当模块定义好以后，还需要在<code>Store</code>中进行注册。</p>
<p>修改<code>store/index.js</code>文件中的代码，如下所示：</p>
<p>在下面的代码中，我们定义了<code>A</code>模块和<code>B</code>模块，这两个模块中都定义了<code>state</code>和<code>getters</code></p>
<p>并且B模块中开启了命名空间，A模块没有开启命名空间。</p>
<p>最后把两个模块都在<code>createStore</code>方法中的<code>modules</code>进行了注册。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="comment">// A模块</span></span><br><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;moduleA&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">newName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">username</span> + <span class="string">&quot;你好&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// B模块</span></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;moduleB&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">newName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">username</span> + <span class="string">&quot;你好&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    moduleA,</span><br><span class="line">    moduleB,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// export default createStore(&#123;</span></span><br><span class="line"><span class="comment">//   state: &#123;</span></span><br><span class="line"><span class="comment">//     username: &quot;张三&quot;,</span></span><br><span class="line"><span class="comment">//     count:0</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   getters: &#123;</span></span><br><span class="line"><span class="comment">//     newName(state) &#123;</span></span><br><span class="line"><span class="comment">//       return state.username + &quot;你好！&quot;;</span></span><br><span class="line"><span class="comment">//     &#125;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   mutations: &#123;</span></span><br><span class="line"><span class="comment">//     updateName(state) &#123;</span></span><br><span class="line"><span class="comment">//       state.username = &quot;李四&quot;;</span></span><br><span class="line"><span class="comment">//     &#125;,</span></span><br><span class="line"><span class="comment">//        //payload是调用mutations的时候传递的额外的值。</span></span><br><span class="line"><span class="comment">//     //这里就是传递过来的要累加的值</span></span><br><span class="line"><span class="comment">//     increate(state, payload) &#123;</span></span><br><span class="line"><span class="comment">//       state.count += payload;</span></span><br><span class="line"><span class="comment">//     &#125;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   actions: &#123;</span></span><br><span class="line"><span class="comment">//     //context:上下文，该对象中包含了state,commit,getters等成员</span></span><br><span class="line"><span class="comment">//     increateAsync(context, playload) &#123;</span></span><br><span class="line"><span class="comment">//       setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//         context.commit(&quot;increate&quot;, playload);</span></span><br><span class="line"><span class="comment">//       &#125;, 1000);</span></span><br><span class="line"><span class="comment">//     &#125;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   modules: &#123;&#125;,</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下面，返回到<code>App.vue</code>组件中，使用一下（将原有的<code>App.vue</code>组件进行备份）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;!-- 使用A模块中的state数据 --&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; $store.state.moduleA.username &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; $store.getters.newName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>要获取<code>A</code>模块中的<code>state</code>数据的时候，需要添加上模块的名字，但是在获取<code>getters</code>中的内容的时候不需要添加模块的名字，如果添加了模块的名字，会出错。</p>
<p>原因:由于A模块没有添加命名空间，所以除了<code>state</code>需要添加模块名称，模块内部的<code>getters</code>,<code>action</code>,<code>mutaions</code>都是注册在全局下的。</p>
<p>下面我们再来看一下模块B的访问</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;!-- 使用A模块中的state数据 --&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; $store.state.moduleA.username &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; $store.getters.newName &#125;&#125;&lt;/p&gt;</span><br><span class="line">       &lt;!-- 使用B模块中的state --&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; $store.state.moduleB.username &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!-- 使用B模块中的getters --&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; $store.getters[&quot;moduleB/newName&quot;] &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在使用<code>B</code>模块中的<code>state</code>的时候需要添加<code>模块</code>名称。</p>
<p>这里重点需要注意的是：在访问<code>B</code>模块中的<code>getters</code>的时候的写法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; $store.<span class="property">getters</span>[<span class="string">&quot;moduleB/newName&quot;</span>] &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>在方括号中，先写模块的名称，后面再写<code>getters</code>的名称。</p>
<p>下面我们在把<code>B</code>模块中的<code>mutations</code>和<code>actions</code>都补充一下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="comment">// A模块</span></span><br><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;moduleA&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">newName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">username</span> + <span class="string">&quot;你好&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// B模块</span></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;moduleB&quot;</span>,</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">newName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">username</span> + <span class="string">&quot;你好&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">updateName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">username</span> = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//payload是调用mutations的时候传递的额外的值。</span></span><br><span class="line">    <span class="comment">//这里就是传递过来的要累加的值</span></span><br><span class="line">    <span class="title function_">increate</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span> += payload;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//context:上下文，该对象中包含了state,commit,getters等成员</span></span><br><span class="line">    <span class="title function_">increateAsync</span>(<span class="params">context, playload</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        context.<span class="title function_">commit</span>(<span class="string">&quot;increate&quot;</span>, playload);</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    moduleA,</span><br><span class="line">    moduleB,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>通过上面的代码，我们可以看到<code>mutations</code>和<code>actions</code>的内容和前面写的是一样的。</p>
<p>下面返回到<code>App.vue</code>组件中使用一下<code>mutations</code>和<code>actions</code>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 使用A模块中的state数据 --&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; $store.state.moduleA.username &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; $store.getters.newName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!-- 使用B模块中的state --&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; $store.state.moduleB.username &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!-- 使用B模块中的getters --&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; $store.getters[&quot;moduleB/newName&quot;] &#125;&#125;&lt;/p&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;p&gt;&#123;&#123; $store.state.moduleB.count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;mutationsFn&quot;&gt;mutationsFn&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;actionsFn&quot;&gt;actionsFn&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们添加了<code>count</code>这个状态，同时添加了两个按钮。</p>
<p>下面看一下当按钮的单击事件触发以后，对应的方法的实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;App&quot;</span>,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> store = <span class="title function_">useStore</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">mutationsFn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="comment">// 调用B模块中的mutations</span></span><br><span class="line">      store.<span class="title function_">commit</span>(<span class="string">&quot;moduleB/updateName&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">actionsFn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="comment">// 调用B模块中的actions</span></span><br><span class="line"></span><br><span class="line">      store.<span class="title function_">dispatch</span>(<span class="string">&quot;moduleB/increateAsync&quot;</span>, <span class="number">6</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      mutationsFn,</span><br><span class="line">      actionsFn,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，不管是执行<code>commit</code>或者是<code>dispatch</code>方法，都指定了<code>模块的名字</code>，然后后面跟上<code>mutations</code>的名字或者是<code>actions</code>的名字。</p>
<p>我们在项目中都需要给模块添加命名空间。</p>
<p>7、<code>Vuex</code>数据持久化操作</p>
<p>在项目中，我们需要将<code>vuex</code>中存储的数据持久化到本地，例如：我们在项目中的用户信息需要存储到<code>vuex</code>中，但是需要持久化到本地，否则刷新浏览器数据会丢失。</p>
<p>还是就是购物车的数据，也是存储到<code>vuex</code>中，当然在用户未登录的情况是可以向购物车中添加数据的，而<code>vuex</code>中存储的购物车中的商品数据也需要持久化到本地。</p>
<p>关于对<code>vuex</code>中的数据持久化的操作，这里我们使用<code>vuex-persistedstate</code>插件来实现</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vuex-persistedstate</span><br></pre></td></tr></table></figure>

<p><strong>下面在<code>src/store</code>目录下面创建<code>modules</code>文件夹</strong>，在该文件夹下面创建<code>cart.js</code>和<code>user.js</code>两个模块文件。</p>
<p><code>cart.js</code>文件中的代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 购物车模块</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 购物车中的商品列表</span></span><br><span class="line">      <span class="attr">list</span>: [],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这里我们定义了<code>cart</code>这个模块，并且开启了命名空间。注意这里的<code>state</code>是一个方法，这是语法上的要求。最终返回的是购物车中的商品列表数据。</p>
<p><code>user.js</code>文件中定义的内容如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户模块</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 用户信息</span></span><br><span class="line">      <span class="attr">profile</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">avatar</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 用户头像</span></span><br><span class="line">        <span class="attr">nickname</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 用户昵称</span></span><br><span class="line">        <span class="attr">account</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 用户账号名称</span></span><br><span class="line">        <span class="attr">mobile</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 手机号码</span></span><br><span class="line">        <span class="attr">token</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// token 数据</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这里也是开启了命名空间，同时用户的信息存储到了<code>profile</code>对象中，该对象中定义的属性与服务端接口返回的内容是一致的。</p>
<p>这一点，后面讲解到的时候，我们可以再来看一下。</p>
<p>下面在添加一个<code>category.js</code>文件，代码如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 商品分类模块</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 分类信息的集合</span></span><br><span class="line">      <span class="attr">list</span>: [],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下面在修改<code>store/index.js</code>文件中的代码，如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> cart <span class="keyword">from</span> <span class="string">&quot;./modules/cart&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&quot;./modules/user&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> category <span class="keyword">from</span> <span class="string">&quot;./modules/category&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    cart,</span><br><span class="line">    user,</span><br><span class="line">    category,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在上面的代码中完成了模块的注册操作。</p>
<p>在进行持久化之前，我们先来做一个测试，看一下当刷新浏览器以后，<code>vuex</code>容器中的数据是否会丢失。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户模块</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 用户信息</span></span><br><span class="line">      <span class="attr">profile</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">avatar</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 用户头像</span></span><br><span class="line">        <span class="attr">nickname</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 用户昵称</span></span><br><span class="line">        <span class="attr">account</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 用户账号名称</span></span><br><span class="line">        <span class="attr">mobile</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 手机号码</span></span><br><span class="line">        <span class="attr">token</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// token 数据</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="comment">// 更新用户的信息，payload就是用户信息对象</span></span><br><span class="line">    <span class="title function_">setUser</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">      state.<span class="property">profile</span> = payload;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>我们在<code>store/modules/user.js</code>文件中添加了一个<code>mutations</code>方法<code>setUser</code>，该方法的作用就是修改用户信息。</p>
<p>下面返回到<code>App.vue</code>这个组件中（这里将原来的<code>App</code>组件重新命名，这里创建一个新的<code>App.vue</code>组件），该组件中的代码如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 修改用户数据，测试是否实现了持久化 --&gt;</span><br><span class="line">    &#123;&#123; $store.state.user.profile.account &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;$store.commit(&#x27;user/setUser&#x27;, &#123; account: &#x27;zhangsan&#x27; &#125;)&quot;&gt;</span><br><span class="line">      更改用户信息</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在模板中先获取<code>user</code>模块中的<code>profile</code>对象中的<code>account</code>用户名数据。</p>
<p>下面单击按钮以后，完成<code>account</code>属性值的修改，注意<code>commit</code>方法在提交的时候，需要指定模块的名称以及对应的<code>mutations</code>中的方法名。</p>
<p>​     返回到浏览器中进行测试，当单击了按钮以后，页面中展示了<code>zhangsan</code>这个用户名，但是当刷新后，用户名信息丢失了。</p>
<p>所以下面需要对<code>vuex</code>中的数据实现持久化的操作。</p>
<p>要想持久化，我们可以把<code>vuex</code>中的数据持久化到<code>localStorage</code>中，但是问题是，每次写关于操作<code>localStorage</code>的代码也是非常麻烦的。</p>
<p>所以这里我们可以通过<code> vuex-persistedstate</code>这个插件来实现。</p>
<p>这个插件安装好以后，下面看一下怎样使用？</p>
<p>在<code>store/index.js</code>文件中配置该插件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> cart <span class="keyword">from</span> <span class="string">&quot;./modules/cart&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&quot;./modules/user&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> category <span class="keyword">from</span> <span class="string">&quot;./modules/category&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> createPersistedState <span class="keyword">from</span> <span class="string">&quot;vuex-persistedstate&quot;</span>; <span class="comment">// 导入vuex-persistedstate插件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    cart,</span><br><span class="line">    user,</span><br><span class="line">    category,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 配置插件</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">createPersistedState</span>(&#123;</span><br><span class="line">      <span class="comment">// 本地存储的名字</span></span><br><span class="line">      <span class="attr">key</span>: <span class="string">&quot;shop-project-vuex-store&quot;</span>,</span><br><span class="line">      <span class="comment">// 指定要存储的模块(这里将user和cart购物车中的数据进行持久化)</span></span><br><span class="line">      <span class="attr">paths</span>: [<span class="string">&quot;user&quot;</span>, <span class="string">&quot;cart&quot;</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们导入了<code>vuex-persistedstate</code>这个插件，并且指定了存储到本地的数据的名字，以及要存储的模块。</p>
<p>下面返回到浏览器中进行测试，当单击了按钮以后，完成了数据的更新，然后刷新浏览器发现数据没有丢失。</p>
<p>数据都存储到了<code>localStorage</code>中了，这里可以看一下。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://www.kilgour.top">kilgour</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.kilgour.top/2024/07/27/%E8%80%81%E7%8E%8B-19%E3%80%81Vue-%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/">http://www.kilgour.top/2024/07/27/%E8%80%81%E7%8E%8B-19%E3%80%81Vue-%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.kilgour.top" target="_blank">Kilgour Notes</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover17.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/08/02/%E8%80%81%E7%8E%8B-20%E3%80%81%E4%BA%BA%E5%8A%9B%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE/" title=""><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover8.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2024/07/25/%E8%80%81%E7%8E%8B-18%E3%80%81Net-Core-Web-Api/" title=""><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/5.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">kilgour</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">35</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kilg0ur"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue-%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF"><span class="toc-number">1.</span> <span class="toc-text">Vue 核心技术</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Vue%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.</span> <span class="toc-text">一、Vue介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Vue%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">1、Vue概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Vue%E6%98%AF%E4%B8%80%E4%B8%AAMVVM%E7%9A%84%E6%A1%86%E6%9E%B6"><span class="toc-number">2.2.</span> <span class="toc-text">2、Vue是一个MVVM的框架</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81Vue%E7%BB%84%E4%BB%B6%E5%8C%96%E6%80%9D%E6%83%B3"><span class="toc-number">2.3.</span> <span class="toc-text">3、Vue组件化思想</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">3.</span> <span class="toc-text">二、脚手架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%84%9A%E6%89%8B%E6%9E%B6%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.1.</span> <span class="toc-text">1、脚手架基本介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Vue%E8%84%9A%E6%89%8B%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">3.2.</span> <span class="toc-text">2、Vue脚手架的基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%A6%82%E4%BD%95%E8%A6%86%E7%9B%96%E8%84%9A%E6%89%8B%E6%9E%B6%E4%B8%8B%E7%9A%84webpack%E9%85%8D%E7%BD%AE-96"><span class="toc-number">3.3.</span> <span class="toc-text">3、如何覆盖脚手架下的webpack配置&#96;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E8%84%9A%E6%89%8B%E6%9E%B6%E7%9B%AE%E5%BD%95%E5%88%86%E6%9E%90"><span class="toc-number">3.4.</span> <span class="toc-text">4、脚手架目录分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">3.5.</span> <span class="toc-text">5、单文件组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81Vue%E6%8F%92%E5%80%BC%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">三、Vue插值表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Vue%E5%A6%82%E4%BD%95%E6%8F%90%E4%BE%9B%E6%95%B0%E6%8D%AE"><span class="toc-number">4.1.</span> <span class="toc-text">1、Vue如何提供数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%8F%92%E5%80%BC%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text">2、插值表达式的语法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%8C%87%E4%BB%A4"><span class="toc-number">5.</span> <span class="toc-text">四、指令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E6%8C%87%E4%BB%A4"><span class="toc-number">5.1.</span> <span class="toc-text">1、什么是指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81v-bind%E6%8C%87%E4%BB%A4"><span class="toc-number">5.2.</span> <span class="toc-text">2、v-bind指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81v-on%E6%8C%87%E4%BB%A4"><span class="toc-number">5.3.</span> <span class="toc-text">3、v-on指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-number">5.4.</span> <span class="toc-text">4、如何获取事件对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">5.5.</span> <span class="toc-text">5、事件修饰符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">5.6.</span> <span class="toc-text">6、按键修饰符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81v-show%E5%92%8Cv-if"><span class="toc-number">5.7.</span> <span class="toc-text">7、v-show和v-if</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81v-else-%E5%92%8C-v-else-if"><span class="toc-number">5.8.</span> <span class="toc-text">8、v-else 和 v-else-if</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81v-model"><span class="toc-number">5.9.</span> <span class="toc-text">9、v-model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%81v-model-%E5%A4%84%E7%90%86%E5%85%B6%E4%BB%96%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0"><span class="toc-number">5.10.</span> <span class="toc-text">10、v-model 处理其他表单元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%81v-model%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">5.11.</span> <span class="toc-text">11、v-model修饰符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%81v-text%E5%92%8Cv-html"><span class="toc-number">5.12.</span> <span class="toc-text">12、v-text和v-html</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E3%80%81v-for-%E6%8C%87%E4%BB%A4"><span class="toc-number">5.13.</span> <span class="toc-text">13、v-for 指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E3%80%81%E8%99%9A%E6%8B%9FDom"><span class="toc-number">5.14.</span> <span class="toc-text">14、虚拟Dom</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15%E3%80%81Diff%E7%AE%97%E6%B3%95"><span class="toc-number">5.15.</span> <span class="toc-text">15、Diff算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16%E3%80%81%E6%A0%B7%E5%BC%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">5.16.</span> <span class="toc-text">16、样式控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-%E6%8E%A7%E5%88%B6%E7%B1%BB%E5%90%8D"><span class="toc-number">5.16.1.</span> <span class="toc-text">16.1  控制类名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-%E6%8E%A7%E5%88%B6%E8%A1%8C%E5%86%85%E6%A0%B7%E5%BC%8F"><span class="toc-number">5.16.2.</span> <span class="toc-text">16.2 控制行内样式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81Composition-API"><span class="toc-number">6.</span> <span class="toc-text">五、Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Composition-API%E8%AE%BE%E8%AE%A1%E5%8A%A8%E6%9C%BA"><span class="toc-number">6.1.</span> <span class="toc-text">1、Composition API设计动机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81reactive-toRefs-ref"><span class="toc-number">6.2.</span> <span class="toc-text">2、reactive&#x2F;toRefs&#x2F;ref</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-reactive%E5%87%BD%E6%95%B0%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">6.2.1.</span> <span class="toc-text">2.1 reactive函数基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-ref%E5%87%BD%E6%95%B0%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">6.2.2.</span> <span class="toc-text">2.2 ref函数基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-toRefs%E5%87%BD%E6%95%B0%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">6.2.3.</span> <span class="toc-text">2.3 toRefs函数基本使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%AD%A6%E7%94%9F%E5%88%97%E8%A1%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">6.3.</span> <span class="toc-text">3、学生列表案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">6.3.1.</span> <span class="toc-text">3.1  基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">6.3.2.</span> <span class="toc-text">3.2 展示数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">6.3.3.</span> <span class="toc-text">3.3  添加数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E6%95%B0%E6%8D%AE%E5%88%A0%E9%99%A4"><span class="toc-number">6.3.4.</span> <span class="toc-text">3.4 数据删除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">7.</span> <span class="toc-text">六、计算属性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E8%AF%B4%E6%98%8E"><span class="toc-number">7.1.</span> <span class="toc-text">1、计算属性说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E9%80%9A%E8%BF%87%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E8%AE%A1%E7%AE%97%E6%80%BB%E5%88%86%E4%B8%8E%E5%B9%B3%E5%9D%87%E5%88%86"><span class="toc-number">7.2.</span> <span class="toc-text">2、通过计算属性计算总分与平均分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E7%BC%93%E5%AD%98"><span class="toc-number">7.3.</span> <span class="toc-text">3、计算属性缓存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E5%AE%8C%E6%95%B4%E5%86%99%E6%B3%95"><span class="toc-number">7.4.</span> <span class="toc-text">4、计算属性完整写法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%AE%9E%E7%8E%B0%E5%85%A8%E9%80%89%E4%B8%8E%E5%8F%8D%E9%80%89"><span class="toc-number">7.5.</span> <span class="toc-text">5、实现全选与反选</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">8.</span> <span class="toc-text">七、侦听器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C"><span class="toc-number">8.1.</span> <span class="toc-text">1、立即执行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%B7%B1%E5%BA%A6%E4%BE%A6%E5%90%AC"><span class="toc-number">8.2.</span> <span class="toc-text">2、深度侦听</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E7%BB%84%E4%BB%B6%E5%9F%BA%E7%A1%80"><span class="toc-number">9.</span> <span class="toc-text">八、组件基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">9.1.</span> <span class="toc-text">1、为什么使用组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-number">9.2.</span> <span class="toc-text">2、什么是组件化开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E5%92%8C%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">9.3.</span> <span class="toc-text">3、如何创建和使用组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E5%A4%84%E7%90%86"><span class="toc-number">9.4.</span> <span class="toc-text">4、组件样式处理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">10.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">11.</span> <span class="toc-text">九、组件通信</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1-%E7%88%B6%E4%BC%A0%E5%AD%90"><span class="toc-number">11.1.</span> <span class="toc-text">1、组件通信 - 父传子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81v-for-%E9%81%8D%E5%8E%86%E5%B1%95%E7%A4%BA%E7%BB%84%E4%BB%B6%E7%BB%83%E4%B9%A0"><span class="toc-number">11.2.</span> <span class="toc-text">2、v-for 遍历展示组件练习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%8D%95%E5%90%91%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-number">11.3.</span> <span class="toc-text">3、单向数据流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1-%E5%AD%90%E4%BC%A0%E7%88%B6"><span class="toc-number">11.4.</span> <span class="toc-text">4、组件通信 - 子传父</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E2%80%93%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">11.5.</span> <span class="toc-text">5、组件通信–兄弟组件通信</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6"><span class="toc-number">12.</span> <span class="toc-text">十、组件进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%8E%B7%E5%8F%96Dom%E5%85%83%E7%B4%A0"><span class="toc-number">12.1.</span> <span class="toc-text">1、获取Dom元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81nextTick%E5%87%BD%E6%95%B0"><span class="toc-number">12.2.</span> <span class="toc-text">2、nextTick函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81dynamic%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">12.3.</span> <span class="toc-text">3、dynamic动态组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%8F%92%E6%A7%BD"><span class="toc-number">12.4.</span> <span class="toc-text">4、插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="toc-number">12.4.1.</span> <span class="toc-text">4.1  默认插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">12.4.2.</span> <span class="toc-text">4.2 具名插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-number">12.4.3.</span> <span class="toc-text">4.3  作用域插槽</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">13.</span> <span class="toc-text">十一、生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9F%BA%E6%9C%AC%E8%AE%A4%E7%9F%A5"><span class="toc-number">13.1.</span> <span class="toc-text">1、生命周期基本认知</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8E%A2%E8%AE%A8"><span class="toc-number">13.2.</span> <span class="toc-text">2、生命周期探讨</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">14.</span> <span class="toc-text">十二、路由</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F-SPA-Single-Page-Application"><span class="toc-number">14.1.</span> <span class="toc-text">1、单页应用程序: SPA - Single Page Application</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">14.2.</span> <span class="toc-text">2、路由的介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81vue-router%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">14.3.</span> <span class="toc-text">3、vue-router基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA-%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%8F%82"><span class="toc-number">14.4.</span> <span class="toc-text">4、声明式导航 - 跳转传参</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">14.5.</span> <span class="toc-text">5、重定向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81404"><span class="toc-number">14.6.</span> <span class="toc-text">6、404</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">14.7.</span> <span class="toc-text">7、编程式导航</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E8%B7%AF%E7%94%B1%E5%B5%8C%E5%A5%97"><span class="toc-number">14.8.</span> <span class="toc-text">8、路由嵌套</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81Vuex"><span class="toc-number">15.</span> <span class="toc-text">十三、Vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81vuex-%E6%A6%82%E8%BF%B0"><span class="toc-number">15.1.</span> <span class="toc-text">1、vuex 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Vuex%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">15.2.</span> <span class="toc-text">2、Vuex基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81getters%E7%94%A8%E6%B3%95"><span class="toc-number">15.3.</span> <span class="toc-text">3、getters用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81mutations%E7%94%A8%E6%B3%95"><span class="toc-number">15.4.</span> <span class="toc-text">4、mutations用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81actions%E7%94%A8%E6%B3%95"><span class="toc-number">15.5.</span> <span class="toc-text">5、actions用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E6%A8%A1%E5%9D%97%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">15.6.</span> <span class="toc-text">6、模块基本使用</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By kilgour</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">2</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><!-- hexo injector body_end end --></body></html>