<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JavaScript高级 | Kilgour Notes</title><meta name="author" content="kilgour"><meta name="copyright" content="kilgour"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="JavaScript高级1、作用域1.1  局部作用域作用域（scope）规定了变量能够被访问的“范围”，离开了这个“范围”变量便不能被访问， 作用域分为： （1）局部作用域 （2）全局作用域 局部作用域分为函数作用域和块作用域。 （1） 函数作用域 在函数内部声明的变量只能在函数内部被访问，外部无法直接访问。  123456总结：1. 函数内部声明的变量，在函数外部无法被访问2. 函数的参数也是">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript高级">
<meta property="og:url" content="http://www.kilgour.top/2024/07/03/%E8%80%81%E7%8E%8B-10%E3%80%81JavaScript%E9%AB%98%E7%BA%A7/index.html">
<meta property="og:site_name" content="Kilgour Notes">
<meta property="og:description" content="JavaScript高级1、作用域1.1  局部作用域作用域（scope）规定了变量能够被访问的“范围”，离开了这个“范围”变量便不能被访问， 作用域分为： （1）局部作用域 （2）全局作用域 局部作用域分为函数作用域和块作用域。 （1） 函数作用域 在函数内部声明的变量只能在函数内部被访问，外部无法直接访问。  123456总结：1. 函数内部声明的变量，在函数外部无法被访问2. 函数的参数也是">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover2.jpg">
<meta property="article:published_time" content="2024-07-03T14:33:00.000Z">
<meta property="article:modified_time" content="2024-07-04T16:11:53.932Z">
<meta property="article:author" content="kilgour">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover2.jpg"><link rel="shortcut icon" href="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/logo.png"><link rel="canonical" href="http://www.kilgour.top/2024/07/03/%E8%80%81%E7%8E%8B-10%E3%80%81JavaScript%E9%AB%98%E7%BA%A7/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaScript高级',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-05 00:11:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/panarama.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/5.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">35</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover2.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Kilgour Notes"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/logo.png"/><span class="site-name">Kilgour Notes</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaScript高级</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-03T14:33:00.000Z" title="发表于 2024-07-03 22:33:00">2024-07-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-04T16:11:53.932Z" title="更新于 2024-07-05 00:11:53">2024-07-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">18.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>72分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaScript高级"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="JavaScript高级"><a href="#JavaScript高级" class="headerlink" title="JavaScript高级"></a>JavaScript高级</h1><h1 id="1、作用域"><a href="#1、作用域" class="headerlink" title="1、作用域"></a>1、作用域</h1><h2 id="1-1-局部作用域"><a href="#1-1-局部作用域" class="headerlink" title="1.1  局部作用域"></a>1.1  局部作用域</h2><p>作用域（scope）规定了变量能够被访问的“范围”，离开了这个“范围”变量便不能被访问，</p>
<p>作用域分为：</p>
<p>（1）局部作用域</p>
<p>（2）全局作用域</p>
<p>局部作用域分为函数作用域和块作用域。</p>
<p><strong>（1） 函数作用域</strong></p>
<p>在函数内部声明的变量只能在函数内部被访问，外部无法直接访问。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032215461.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">总结：</span><br><span class="line">1. 函数内部声明的变量，在函数外部无法被访问</span><br><span class="line">2. 函数的参数也是函数内部的局部变量</span><br><span class="line">3. 不同函数内部声明的变量无法互相访问</span><br><span class="line">4. 函数执行完毕后，函数内部的变量实际被清空了</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>（2）块级作用域</strong></p>
<p>在 JavaScript 中使用 { } 包裹的代码称为代码块，代码块内部声明的变量外部将【有可能】无法被访问</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032215526.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">总结：</span><br><span class="line">1. let 声明的变量会产生块作用域，var 不会产生块作用域</span><br><span class="line">2. const 声明的常量也会产生块作用域</span><br><span class="line">3. 不同代码块之间的变量无法互相访问</span><br><span class="line">4. 推荐使用 let 或 const</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="1-2-全局作用域"><a href="#1-2-全局作用域" class="headerlink" title="1.2  全局作用域"></a>1.2  全局作用域</h2><p><code>&lt;script&gt;</code> 标签 和<code>.js</code>文件 的【最外层】就是所谓的全局作用域，在此声明的变量在函数内部也可以被访问。</p>
<p>全局作用域中声明的变量，任何其它作用域都可以被访问</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032215400.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">注意：</span><br><span class="line">1. 为 window 对象动态添加的属性默认也是全局的，不推荐！</span><br><span class="line">2. 函数中未使用任何关键字声明的变量为全局变量，不推荐！！！</span><br><span class="line">3. 尽可能少的声明全局变量，防止全局变量被污染</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="1-3-作用域链"><a href="#1-3-作用域链" class="headerlink" title="1.3 作用域链"></a>1.3 作用域链</h2><p>下面代码的执行结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 全局作用域</span></span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">	<span class="comment">// 局部作用域</span></span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;</span><br><span class="line">       lets a = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 局部作用域</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">g</span>(<span class="params"></span>)&#123;</span><br><span class="line">            a = <span class="number">2</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">g</span>();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="title function_">f</span>();</span><br><span class="line">&lt;/script&gt;    </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">作用域链本质上是底层的变量查找机制。</span><br><span class="line">在函数被执行时，会优先查找当前函数作用域中查找变量</span><br><span class="line">如果当前作用域查找不到则会依次逐级查找父级作用域直到全局作用域</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">总结：</span><br><span class="line">1. 嵌套关系的作用域串联起来形成了作用域链</span><br><span class="line">2. 相同作用域链中按着从小到大的规则查找变量</span><br><span class="line">3. 子作用域能够访问父作用域，父级作用域无法访问子级作用域</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">作用域链查找的规则是什么？</span><br><span class="line">	会优先查找当前函数作用域中查找变量</span><br><span class="line">	查找不到则会依次逐级查找父级作用域直到全局作用域</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="1-4-闭包"><a href="#1-4-闭包" class="headerlink" title="1.4 闭包"></a>1.4 闭包</h2><p>概念：一个函数对周围状态的引用捆绑在一起，内层函数中访问到其外层函数的作用域</p>
<p>简单理解：<strong>闭包</strong> <strong>&#x3D;</strong>  <strong>内层函数</strong> <strong>+</strong> <strong>外层函数的变量</strong> </p>
<p>先看个简单的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">f</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">outer</span>()</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常见的闭包的形式   外部可以访问使用 函数内部的变量</span></span><br><span class="line">     <span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">let</span> a = <span class="number">100</span></span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> fn</span><br><span class="line">     &#125;</span><br><span class="line">  <span class="keyword">const</span> fun = <span class="title function_">outer</span>()</span><br><span class="line">  <span class="title function_">fun</span>() <span class="comment">// 外层函数使用内部函数的变量</span></span><br></pre></td></tr></table></figure>

<p>以上代码，经常被简化成如下的形式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> fun = <span class="title function_">outer</span>()</span><br><span class="line">   <span class="title function_">fun</span>() <span class="comment">// 调用函数</span></span><br></pre></td></tr></table></figure>

<p>闭包应用：实现数据的私有</p>
<p>比如，我们要做个统计函数调用次数，函数调用一次，就++</p>
<p>大家可能想到的就是通过全局变量来实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">1</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">      i++</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`函数被调用了<span class="subst">$&#123;i&#125;</span>次`</span>)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="title function_">fn</span>()</span><br><span class="line"><span class="title function_">fn</span>()</span><br></pre></td></tr></table></figure>

<p>但是，这个<code>i</code>是一个全局变量，很容易被修改。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">count</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line">     <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">       i++</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`函数被调用了<span class="subst">$&#123;i&#125;</span>次`</span>)</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> fn</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">const</span> fun = <span class="title function_">count</span>()</span><br><span class="line">   <span class="title function_">fun</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这样通过闭包的形式实现了数据的私有，无法直接修改<code>count</code></p>
<h2 id="1-5-变量提升"><a href="#1-5-变量提升" class="headerlink" title="1.5 变量提升"></a>1.5 变量提升</h2><p>变量提升是<code> JavaScript</code> 中比较“奇怪”的现象，它允许在变量声明之前即被访问（仅存在于<code>var</code>声明变量）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">注意：</span><br><span class="line">1. 变量在未声明即被访问时会报语法错误</span><br><span class="line">2. 变量在var声明之前即被访问，变量的值为 undefined</span><br><span class="line">3. let/const 声明的变量不存在变量提升</span><br><span class="line">4. 变量提升出现在相同作用域当中</span><br><span class="line">5. 实际开发中推荐先声明再访问变量</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 访问变量 str </span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str +<span class="string">&quot;world&quot;</span>)</span><br><span class="line">    <span class="comment">// 声明变量</span></span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&quot;hello&quot;</span></span><br><span class="line">    <span class="comment">//-------------------------------------</span></span><br><span class="line">     <span class="keyword">var</span> str;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(str +<span class="string">&quot;world&quot;</span>)</span><br><span class="line">str = <span class="string">&quot;hello&quot;</span></span><br><span class="line">&lt;script&gt;    </span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 1. 把所有var声明的变量提升到 当前作用域的最前面</span></span><br><span class="line">    <span class="comment">// 2. 只提升声明， 不提升赋值</span></span><br><span class="line">    <span class="comment">// var num</span></span><br><span class="line">    <span class="comment">// console.log(num + &#x27;件&#x27;)</span></span><br><span class="line">    <span class="comment">// num = 10</span></span><br><span class="line">    <span class="comment">// console.log(num)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(num)</span><br><span class="line">      <span class="keyword">var</span> num = <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fn</span>()</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="2、函数进阶"><a href="#2、函数进阶" class="headerlink" title="2、函数进阶"></a>2、函数进阶</h1><h2 id="2-1-函数提升"><a href="#2-1-函数提升" class="headerlink" title="2.1  函数提升"></a>2.1  函数提升</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> fun</span><br><span class="line">    <span class="comment">// 1. 会把所有函数声明提升到当前作用域的最前面</span></span><br><span class="line">    <span class="comment">// 2. 只提升函数声明，不提升函数调用</span></span><br><span class="line">    <span class="comment">// fn()</span></span><br><span class="line">    <span class="comment">// function fn() &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(&#x27;函数提升&#x27;)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// 下面的会出错</span></span><br><span class="line">    <span class="comment">// fun()</span></span><br><span class="line">    <span class="comment">// var fun = function () &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(&#x27;函数表达式&#x27;)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">      <span class="comment">// 函数表达式 必须先声明和赋值， 后调用 否则 报错</span></span><br><span class="line">    <span class="comment">///   var fun;</span></span><br><span class="line">      <span class="comment">// fun()</span></span><br><span class="line">    </span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-2-函数参数"><a href="#2-2-函数参数" class="headerlink" title="2.2 函数参数"></a>2.2 函数参数</h2><h3 id="2-2-1-动态参数"><a href="#2-2-1-动态参数" class="headerlink" title="2.2.1 动态参数"></a>2.2.1 动态参数</h3><p>产品需求： 写一个求和函数</p>
<p>不管用户传入几个实参，都要把和求出来</p>
<p>实参：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032215480.png"></p>
<p>问题是形参应该怎样写？</p>
<p><code>arguments</code> 是函数内部内置的伪数组变量，它包含了调用函数时传入的所有实参</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getSum</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// arguments 动态参数 只存在于 函数里面</span></span><br><span class="line">      <span class="comment">// 是伪数组 里面存储的是传递过来的实参</span></span><br><span class="line">      <span class="comment">// console.log(arguments)  [2,3,4]</span></span><br><span class="line">      <span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">arguments</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        sum += <span class="variable language_">arguments</span>[i]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(sum)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getSum</span>(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="title function_">getSum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">总结：</span><br><span class="line">	arguments 是一个伪数组，只存在于函数中</span><br><span class="line">	arguments 的作用是动态获取函数的实参</span><br><span class="line">	可以通过for循环依次得到传递过来的实参</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-2-2-剩余参数"><a href="#2-2-2-剩余参数" class="headerlink" title="2.2.2 剩余参数"></a>2.2.2 剩余参数</h3><p>产品需求： 写一个求和函数</p>
<p>不管用户传入几个实参，都要把和求出来</p>
<p>实参：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032215064.png"></p>
<p>形参应该怎样写？</p>
<p>剩余参数允许我们将一个不定数量的参数表示为一个数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getSum</span>(<span class="params">a, b, ...arr</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(arr)  <span class="comment">// 使用的时候不需要写 ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getSum</span>(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="title function_">getSum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>问题是与<code>arguments</code>有什么不同？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. ... 是语法符号，置于最末函数形参之前，用于获取多余的实参</span><br><span class="line">2. 借助 ... 获取的剩余实参，是个真数组</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>开发中提倡多使用剩余参数</p>
<h3 id="2-2-3-展开运算符"><a href="#2-2-3-展开运算符" class="headerlink" title="2.2.3  展开运算符"></a>2.2.3  展开运算符</h3><p>与剩余参数数书写类似的是展开运算符。</p>
<p>展开运算符(…),将一个数组进行展开</p>
<p><strong>典型运用场景： 求数组最大值</strong>**(<strong><strong>最小值</strong></strong>)**<strong>、合并数组等</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   <span class="keyword">const</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">   <span class="comment">// 展开运算符 可以展开数组</span></span><br><span class="line">   <span class="comment">// console.log(...arr)  1,2,3</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// console.log(Math.max(1, 2, 3)) // 不能给max函数传递数组</span></span><br><span class="line">   <span class="comment">// ...arr1  === 1,2,3</span></span><br><span class="line">   <span class="comment">// 1 求数组最大值</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(...arr1)) <span class="comment">// 3</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(...arr1)) <span class="comment">// 1</span></span><br><span class="line">   <span class="comment">// 2. 合并数组</span></span><br><span class="line">   <span class="keyword">const</span> arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">   <span class="keyword">const</span> arr = [...arr1, ...arr2]</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br><span class="line"></span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>说明：展开运算符不会修改原有的数组</p>
<h2 id="2-3-箭头函数"><a href="#2-3-箭头函数" class="headerlink" title="2.3  箭头函数"></a>2.3  箭头函数</h2><h3 id="2-3-1-基本语法"><a href="#2-3-1-基本语法" class="headerlink" title="2.3.1  基本语法"></a>2.3.1  基本语法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// const fn = function () &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(123)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// 1. 箭头函数 基本语法</span></span><br><span class="line">    <span class="comment">// const fn = () =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(123)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// fn()</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// const fn = (x) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(x)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// fn(1)</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. 只有一个形参的时候，可以省略小括号</span></span><br><span class="line">    <span class="comment">// const fn = x =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(x)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// fn(1)</span></span><br><span class="line">    <span class="comment">// // 3. 只有一行代码的时候，我们可以省略大括号</span></span><br><span class="line">    <span class="comment">// const fn = x =&gt; console.log(x)</span></span><br><span class="line">    <span class="comment">// fn(1)</span></span><br><span class="line">    <span class="comment">// 4. 只有一行代码的时候，可以省略return</span></span><br><span class="line">    <span class="comment">// const fn = x =&gt; x + x</span></span><br><span class="line">    <span class="comment">// console.log(fn(1))</span></span><br><span class="line">    <span class="comment">// 5. 箭头函数可以直接返回一个对象</span></span><br><span class="line">    </span><br><span class="line">         <span class="comment">// const fn = (username)=&gt;&#123;</span></span><br><span class="line">    <span class="comment">//   return &#123;username&#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">      <span class="comment">// 这里对上面的代码做了简化，省略了return ,所以需要添加小括号</span></span><br><span class="line">    <span class="comment">// const fn = (uname) =&gt; (&#123; uname: uname &#125;)</span></span><br><span class="line">    <span class="comment">// console.log(fn(&#x27;刘德华&#x27;))</span></span><br><span class="line"></span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-箭头函数参数"><a href="#2-3-2-箭头函数参数" class="headerlink" title="2.3.2  箭头函数参数"></a>2.3.2  箭头函数参数</h3><p>1.普通函数有arguments 动态参数</p>
<p>2.<strong>箭头函数没有 arguments 动态参数</strong>，但是有 剩余参数<code> ..args</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// 1. 利用箭头函数来求和</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getSum</span> = (<span class="params">...arr</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      sum += arr[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="title function_">getSum</span>(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result) <span class="comment">// 9</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-3-箭头函数this"><a href="#2-3-3-箭头函数this" class="headerlink" title="2.3.3 箭头函数this"></a>2.3.3 箭头函数<code>this</code></h3><p>引入箭头函数的目的是更简短的函数写法并且不绑定<code>this</code>，箭头函数的语法比函数表达式更简洁</p>
<p>箭头函数更适用于那些本来需要匿名函数的地方</p>
<p>在箭头函数出现之前，每一个新函数根据它是被如何调用的来定义这个函数的this值， 非常令人讨厌。</p>
<p><code>KilgourNote</code></p>
<blockquote>
<p>箭头函数中的this指的是定义箭头函数时的上下文</p>
<p>例一</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#p&quot;</span>);</span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, f);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">         <span class="attr">userName</span>: <span class="string">&quot;zhangsan&quot;</span>,</span><br><span class="line">         <span class="attr">sayHi</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">             <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">             <span class="comment">// 这个this指的就是  &lt;a id=&quot;p&quot;&gt;我的博客网站&lt;/a&gt;</span></span><br><span class="line">             <span class="comment">// sayHi变量定义了箭头函数，sayHi变量又属于obj作用域，obj属于函数f，因此this指向的是创建f的btn</span></span><br><span class="line">         &#125;,</span><br><span class="line">     &#125;;</span><br><span class="line">     obj2.<span class="title function_">sayHi</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例二</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">method</span>: outer,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arrowFunction = obj.<span class="title function_">method</span>();</span><br><span class="line"><span class="title function_">arrowFunction</span>(); <span class="comment">// 这里的this指的是obj，因为箭头函数是在obj的method方法中创建的</span></span><br><span class="line"><span class="comment">// 在return这里创建了箭头函数，return属于outer,因此this指向创建了outer的obj变量</span></span><br></pre></td></tr></table></figure>

<p>例三</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">traditionalFunction</span>(<span class="params"></span>) &#123;<span class="comment">// 正常函数</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">arrowFunction</span> = (<span class="params"></span>) =&gt; &#123;<span class="comment">// 箭头函数</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">traditionalFunction</span>(); <span class="comment">// 正常函数：this 指的是调用函数时的上下文window</span></span><br><span class="line"><span class="title function_">arrowFunction</span>(); <span class="comment">// 箭头函数：this 这里指的是window（只有一层上级，只能指向window）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">traditionalMethod</span>: traditionalFunction,</span><br><span class="line">    <span class="attr">arrowMethod</span>: arrowFunction,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.<span class="title function_">traditionalMethod</span>(); <span class="comment">// this 指向调用函数时的上下文obj</span></span><br><span class="line">obj.<span class="title function_">arrowMethod</span>(); <span class="comment">// arrowMethod创建了箭头函数，arrowMethod属于变量obj，因此this指向的是创建了obj变量的window</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>箭头函数不会创建自己的<code>this</code>,它只会从自己的作用域链的上一层沿用this。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 以前this的指向：  谁调用的这个函数，this 就指向谁</span></span><br><span class="line">    <span class="comment">// console.log(this)  // window</span></span><br><span class="line">    <span class="comment">// // 普通函数</span></span><br><span class="line">    <span class="comment">// function fn() &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(this)  // window</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// window.fn()</span></span><br><span class="line">    <span class="comment">// // 对象方法里面的this</span></span><br><span class="line">    <span class="comment">// const obj = &#123;</span></span><br><span class="line">    <span class="comment">//   name: &#x27;zhangsan&#x27;,</span></span><br><span class="line">    <span class="comment">//   sayHi: function () &#123;</span></span><br><span class="line">    <span class="comment">//     console.log(this)  // obj</span></span><br><span class="line">    <span class="comment">//   &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// obj.sayHi()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 箭头函数的this  是上一层作用域的this 指向</span></span><br><span class="line">    <span class="comment">// const fn = () =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(this)  // window</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// fn()</span></span><br><span class="line">    <span class="comment">// 对象方法箭头函数 this</span></span><br><span class="line">    <span class="comment">// const obj = &#123;</span></span><br><span class="line">    <span class="comment">//   uname: &#x27;张三&#x27;,</span></span><br><span class="line">    <span class="comment">//   sayHi: () =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     console.log(this)  // this 指向谁？ window</span></span><br><span class="line">    <span class="comment">//   &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// obj.sayHi()</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> obj = &#123;</span><br><span class="line">      <span class="attr">uname</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">      <span class="attr">sayHi</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)  <span class="comment">// obj</span></span><br><span class="line">        <span class="keyword">let</span> i = <span class="number">10</span></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">count</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)  <span class="comment">// obj </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">count</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    obj.<span class="title function_">sayHi</span>()</span><br><span class="line"></span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在开发中【使用箭头函数前需要考虑函数中 this 的值】，事件回调函数使用箭头函数时，this 为全局的 window，因此DOM事件回调函数为了简便，还是不太推荐使用箭头函数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032215229.png"></p>
<h1 id="3、解构赋值"><a href="#3、解构赋值" class="headerlink" title="3、解构赋值"></a>3、解构赋值</h1><p>解构赋值是一种快速为变量赋值的简洁语法，本质上仍然是为变量赋值。</p>
<p><strong>分为：</strong></p>
<p>数组解构</p>
<p>对象解构</p>
<h2 id="3-1-数组解构"><a href="#3-1-数组解构" class="headerlink" title="3.1 数组解构"></a>3.1 数组解构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">基本语法：</span><br><span class="line">1. 赋值运算符 = 左侧的 [] 用于批量声明变量，右侧数组的单元值将被赋值给左侧的变量</span><br><span class="line">2. 变量的顺序对应数组单元值的位置依次进行赋值操作</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032215323.png"></p>
<p>以上要么不好记忆，要么书写麻烦，此时可以使用解构赋值的方法让代码更简洁</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032215002.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 交换2个变量的值</span></span><br><span class="line"> <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"> <span class="keyword">let</span> b = <span class="number">2</span>;  <span class="comment">// 注意这里一定要添加分号</span></span><br><span class="line"> [b, a] = [a, b]</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b)</span><br></pre></td></tr></table></figure>

<p><strong>变量多 单元值少的情况：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216980.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">变量的数量大于单元值数量时，多余的变量将被赋值为  undefined</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>变量少 单元值多的情况：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216305.png"></p>
<p><strong>利用剩余参数解决变量少 单元值多的情况：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216004.png"></p>
<p>剩余参数返回的还是一个数组</p>
<p><strong>防止有undefined传递单元值的情况，可以设置默认值：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216239.png"></p>
<p><strong>按需导入，忽略某些返回值：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216926.png"></p>
<h2 id="3-2-对象解构"><a href="#3-2-对象解构" class="headerlink" title="3.2 对象解构"></a>3.2 对象解构</h2><p>1.<strong>基本语法：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 赋值运算符 = 左侧的 &#123;&#125; 用于批量声明变量，右侧对象的属性值将被赋值给左侧的变量</span><br><span class="line">2. 对象属性的值将被赋值给与属性名相同的变量</span><br><span class="line">3. 注意解构的变量名不要和外面的变量名冲突否则报错</span><br><span class="line">4.对象中找不到与变量名一致的属性时变量值为 undefined</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象解构</span></span><br><span class="line">    <span class="keyword">const</span> obj = &#123;</span><br><span class="line">       <span class="attr">uname</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">     <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">     &#125;</span><br><span class="line">    <span class="comment">// obj.uname</span></span><br><span class="line">    <span class="comment">// obj.age </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解构的语法</span></span><br><span class="line">   <span class="keyword">const</span> &#123; uname, age &#125; = &#123;<span class="attr">age</span>: <span class="number">18</span>, <span class="attr">uname</span>: <span class="string">&#x27;张老师&#x27;</span> &#125;</span><br><span class="line">    <span class="comment">// // 等价于 const uname =  obj.uname</span></span><br><span class="line">    <span class="comment">// // 要求属性名和变量名必须一直才可以</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(uname)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(age)</span><br></pre></td></tr></table></figure>

<p>可以从一个对象中提取变量并同时修改新的变量名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 对象解构的变量名 可以重新改名  旧变量名: 新变量名</span></span><br><span class="line"><span class="comment">// 把原来的uname重新命名为username</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">uname</span>: username, age &#125; = &#123; <span class="attr">uname</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username)</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(age)</span><br></pre></td></tr></table></figure>

<p><strong>数组对象解构</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2. 解构数组对象</span></span><br><span class="line">    <span class="keyword">const</span> pig = [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">uname</span>: <span class="string">&#x27;佩奇&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">6</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">const</span> [&#123; uname, age &#125;] = pig</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(uname)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(age)</span><br></pre></td></tr></table></figure>

<p><strong>多级对象解构</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// const pig = &#123;</span></span><br><span class="line">    <span class="comment">//   name: &#x27;佩奇&#x27;,</span></span><br><span class="line">    <span class="comment">//   family: &#123;</span></span><br><span class="line">    <span class="comment">//     mother: &#x27;猪妈妈&#x27;,</span></span><br><span class="line">    <span class="comment">//     father: &#x27;猪爸爸&#x27;,</span></span><br><span class="line">    <span class="comment">//     sister: &#x27;乔治&#x27;</span></span><br><span class="line">    <span class="comment">//   &#125;,</span></span><br><span class="line">    <span class="comment">//   age: 6</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// // 多级对象解构</span></span><br><span class="line">    <span class="comment">// const &#123; name, family: &#123; mother, father, sister &#125; &#125; = pig</span></span><br><span class="line">    <span class="comment">// console.log(name)</span></span><br><span class="line">    <span class="comment">// console.log(mother)</span></span><br><span class="line">    <span class="comment">// console.log(father)</span></span><br><span class="line">    <span class="comment">// console.log(sister)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> person = [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;佩奇&#x27;</span>,</span><br><span class="line">        <span class="attr">family</span>: &#123;</span><br><span class="line">          <span class="attr">mother</span>: <span class="string">&#x27;猪妈妈&#x27;</span>,</span><br><span class="line">          <span class="attr">father</span>: <span class="string">&#x27;猪爸爸&#x27;</span>,</span><br><span class="line">          <span class="attr">sister</span>: <span class="string">&#x27;乔治&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">6</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">const</span> [&#123; name, <span class="attr">family</span>: &#123; mother, father, sister &#125; &#125;] = person</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(mother)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(father)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(sister)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>下面我们看一个以后经常使用的案例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   <span class="comment">// 1. 这是后台传递过来的数据</span></span><br><span class="line">   <span class="keyword">const</span> msg = &#123;</span><br><span class="line">     <span class="string">&quot;code&quot;</span>: <span class="number">200</span>,</span><br><span class="line">     <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;获取新闻列表成功&quot;</span>,</span><br><span class="line">     <span class="string">&quot;data&quot;</span>: [</span><br><span class="line">       &#123;</span><br><span class="line">         <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">         <span class="string">&quot;title&quot;</span>: <span class="string">&quot;5G商用自己，三大运用商收入下降&quot;</span>,</span><br><span class="line">         <span class="string">&quot;count&quot;</span>: <span class="number">58</span></span><br><span class="line">       &#125;,</span><br><span class="line">       &#123;</span><br><span class="line">         <span class="string">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">         <span class="string">&quot;title&quot;</span>: <span class="string">&quot;国际媒体头条速览&quot;</span>,</span><br><span class="line">         <span class="string">&quot;count&quot;</span>: <span class="number">56</span></span><br><span class="line">       &#125;,</span><br><span class="line">       &#123;</span><br><span class="line">         <span class="string">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">         <span class="string">&quot;title&quot;</span>: <span class="string">&quot;乌克兰和俄罗斯持续冲突&quot;</span>,</span><br><span class="line">         <span class="string">&quot;count&quot;</span>: <span class="number">1669</span></span><br><span class="line">       &#125;,</span><br><span class="line"></span><br><span class="line">     ]</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 需求1： 请将以上msg对象  采用对象解构的方式 只选出  data 方面后面使用渲染页面</span></span><br><span class="line">   <span class="comment">// const &#123; data &#125; = msg</span></span><br><span class="line">   <span class="comment">// console.log(data)</span></span><br><span class="line">   <span class="comment">// 需求2： 上面msg是后台传递过来的数据，我们需要把data选出当做参数传递给 函数</span></span><br><span class="line">   <span class="comment">// msg 虽然很多属性，但是我们利用解构只要 data值</span></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">&#123; data &#125;</span>) &#123;</span><br><span class="line">   </span><br><span class="line">     <span class="comment">// 我们只要 data 数据</span></span><br><span class="line">     <span class="comment">// 内部处理</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">render</span>(msg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">// 需求3， 为了防止msg里面的data名字混淆，要求渲染函数里面的数据名改为 myData</span></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">&#123; data: myData &#125;</span>) &#123;</span><br><span class="line">     <span class="comment">// 要求将 获取过来的 data数据 更名为 myData</span></span><br><span class="line">     <span class="comment">// 内部处理</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(myData)</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">render</span>(msg)</span><br><span class="line"></span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-3-遍历数组-forEach-方法"><a href="#3-3-遍历数组-forEach-方法" class="headerlink" title="3.3 遍历数组 forEach 方法"></a>3.3 遍历数组 <code>forEach </code>方法</h2><p><code>forEach() </code>方法用于调用数组的每个元素，并将元素传递给回调函数</p>
<p>主要使用场景： <strong>遍历数组的每个元素</strong></p>
<p>语法：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216993.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   <span class="comment">// forEach 就是遍历  加强版的for循环  适合于遍历数组对象</span></span><br><span class="line">   <span class="keyword">const</span> arr = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;black&#x27;</span>]</span><br><span class="line">   <span class="keyword">const</span> result = arr.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item, index</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(item)  <span class="comment">// 数组元素 red  green black</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(index) <span class="comment">// 索引号</span></span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">// console.log(result)</span></span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">注意：  </span><br><span class="line">	forEach 主要是遍历数组</span><br><span class="line">	参数当前数组元素是必须要写的，  索引号可选</span><br></pre></td></tr></table></figure>

<p><strong>商品列表案例</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>商品渲染<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.list</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">990px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">flex-wrap</span>: wrap;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">240px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transition</span>: all .<span class="number">5s</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>n) &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.item</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, -<span class="number">4px</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.item</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.item</span> <span class="selector-class">.name</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.item</span> <span class="selector-class">.price</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: firebrick;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.item</span> <span class="selector-class">.price</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">content</span>: <span class="string">&quot;¥&quot;</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;div class=&quot;item&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;img src=&quot;&quot; alt=&quot;&quot;&gt;</span></span><br><span class="line"><span class="comment">      &lt;p class=&quot;name&quot;&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="comment">      &lt;p class=&quot;price&quot;&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="comment">    &lt;/div&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> goodsList = [</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;4001172&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;称心如意手摇咖啡磨豆机咖啡豆研磨机&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">price</span>: <span class="string">&#x27;289.00&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">picture</span>: <span class="string">&#x27;https://yanxuan-item.nosdn.127.net/84a59ff9c58a77032564e61f716846d6.jpg&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;4001594&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;日式黑陶功夫茶组双侧把茶具礼盒装&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">price</span>: <span class="string">&#x27;288.00&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">picture</span>: <span class="string">&#x27;https://yanxuan-item.nosdn.127.net/3346b7b92f9563c7a7e24c7ead883f18.jpg&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;4001009&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;竹制干泡茶盘正方形沥水茶台品茶盘&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">price</span>: <span class="string">&#x27;109.00&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">picture</span>: <span class="string">&#x27;https://yanxuan-item.nosdn.127.net/2d942d6bc94f1e230763e1a5a3b379e1.png&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;4001874&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;古法温酒汝瓷酒具套装白酒杯莲花温酒器&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">price</span>: <span class="string">&#x27;488.00&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">picture</span>: <span class="string">&#x27;https://yanxuan-item.nosdn.127.net/44e51622800e4fceb6bee8e616da85fd.png&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;4001649&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;大师监制龙泉青瓷茶叶罐&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">price</span>: <span class="string">&#x27;139.00&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">picture</span>: <span class="string">&#x27;https://yanxuan-item.nosdn.127.net/4356c9fc150753775fe56b465314f1eb.png&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;3997185&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;与众不同的口感汝瓷白酒杯套组1壶4杯&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">price</span>: <span class="string">&#x27;108.00&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">picture</span>: <span class="string">&#x27;https://yanxuan-item.nosdn.127.net/8e21c794dfd3a4e8573273ddae50bce2.jpg&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;3997403&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;手工吹制更厚实白酒杯壶套装6壶6杯&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">price</span>: <span class="string">&#x27;99.00&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">picture</span>: <span class="string">&#x27;https://yanxuan-item.nosdn.127.net/af2371a65f60bce152a61fc22745ff3f.jpg&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;3998274&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;德国百年工艺高端水晶玻璃红酒杯2支装&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">price</span>: <span class="string">&#x27;139.00&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">picture</span>: <span class="string">&#x27;https://yanxuan-item.nosdn.127.net/8896b897b3ec6639bbd1134d66b9715c.jpg&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    ]</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. 声明一个字符串变量</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> str = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2. 遍历数据 </span></span></span><br><span class="line"><span class="language-javascript">    goodsList.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// console.log(item)  // 可以得到每一个数组元素  对象 &#123;id: &#x27;4001172&#x27;&#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// const &#123;id&#125; =  item  对象解构</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; name, price, picture &#125; = item</span></span><br><span class="line"><span class="language-javascript">      str += <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">      &lt;div class=&quot;item&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">        &lt;img src=<span class="subst">$&#123;picture&#125;</span> alt=&quot;&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">        &lt;p class=&quot;name&quot;&gt;<span class="subst">$&#123;name&#125;</span>&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">        &lt;p class=&quot;price&quot;&gt;<span class="subst">$&#123;price&#125;</span>&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">      &lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">      `</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3.生成的 字符串 添加给 list </span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.list&#x27;</span>).<span class="property">innerHTML</span> = str</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-4-筛选数组-filter-方法"><a href="#3-4-筛选数组-filter-方法" class="headerlink" title="3.4 筛选数组 filter 方法"></a>3.4 筛选数组 filter 方法</h2><p><code>KilgourNote:(数组方法总结)</code></p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">    <span class="comment">// map方法(返回数组):用于创建一个新数组</span></span><br><span class="line">    <span class="keyword">const</span> a = arr.<span class="title function_">map</span>(<span class="function">(<span class="params">it</span>) =&gt;</span> it &gt; <span class="number">2</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">//false, false, true, true, true]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> b = arr.<span class="title function_">map</span>(<span class="function">(<span class="params">it</span>) =&gt;</span> it * <span class="number">2</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">//[2, 4, 6, 8, 10]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// find方法(返回arr中的item):找到符合条件的元素</span></span><br><span class="line">    <span class="keyword">const</span> c = arr.<span class="title function_">find</span>(<span class="function">(<span class="params">it</span>) =&gt;</span> it == <span class="number">3</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(c); <span class="comment">// 3(多用于根据对象中属性的值找具体对象)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// join方法(返回字符串):join()无参数默认使用逗号连接</span></span><br><span class="line">    <span class="keyword">const</span> d = arr.<span class="title function_">join</span>(<span class="string">&quot;_&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(d);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reduce方法(返回数值):累计函数（遍历计算值），第二个参数表示sum的起始值</span></span><br><span class="line">    <span class="keyword">const</span> e = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, it</span>) =&gt;</span> sum + it, <span class="number">0</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// forEach方法(无返回值):遍历方法</span></span><br><span class="line">    <span class="comment">// 复制对象方法Object.assign(obj)【浅拷贝】</span></span><br><span class="line">    <span class="comment">// 复制对象方法.silce【深拷贝】</span></span><br><span class="line">    <span class="comment">// const f = arr.forEach((num,index,array) =&gt; array[index] = num + 1);</span></span><br><span class="line">    <span class="comment">// const array = Object.assign(arr);</span></span><br><span class="line">    <span class="keyword">const</span> array = arr.<span class="title function_">slice</span>();</span><br><span class="line">    array.<span class="title function_">forEach</span>(<span class="function">(<span class="params">num, index, array</span>) =&gt;</span> (array[index] = num + <span class="number">1</span>));</span><br><span class="line">    <span class="comment">// num : 当前正在处理的元素的值。</span></span><br><span class="line">    <span class="comment">// index : 当前正在处理的元素的索引。</span></span><br><span class="line">    <span class="comment">// array : 调用 forEach 方法的数组本身。</span></span><br><span class="line">    array.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item, index, array</span>) &#123;</span><br><span class="line">        array[index] = item + <span class="number">1</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(array); <span class="comment">// [3, 4, 5, 6, 7]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// filter方法():</span></span><br><span class="line">    <span class="keyword">const</span> g = arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item &gt; <span class="number">2</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(g); <span class="comment">// [3, 4, 5]</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>


</blockquote>
<p><code>filter()</code> 方法创建一个新的数组，新数组中的元素是通过检查指定数组中符合条件的所有元素</p>
<p>主要使用场景： <strong>筛选数组符合条件的元素</strong>，并返回筛选之后元素的新数组</p>
<p>语法：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216810.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line">    <span class="comment">// const newArr = arr.filter(function (item, index) &#123;</span></span><br><span class="line">    <span class="comment">//   // console.log(item)</span></span><br><span class="line">    <span class="comment">//   // console.log(index)</span></span><br><span class="line">    <span class="comment">//   return item &gt;= 20</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">    <span class="comment">// 返回的符合条件的新数组</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> newArr = arr.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item &gt;= <span class="number">20</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newArr)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">返回值：返回数组，包含了符合条件的所有元素。如果没有符合条件的元素则返回空数组</span><br><span class="line">参数：currentValue 必须写， index 可选</span><br><span class="line">因为返回新数组，所以不会影响原数组</span><br></pre></td></tr></table></figure>

<p>价格筛选案例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;商品渲染&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .list &#123;</span><br><span class="line">      width: 990px;</span><br><span class="line">      margin: 0 auto;</span><br><span class="line">      display: flex;</span><br><span class="line">      flex-wrap: wrap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item &#123;</span><br><span class="line">      width: 240px;</span><br><span class="line">      margin-left: 10px;</span><br><span class="line">      padding: 20px 30px;</span><br><span class="line">      transition: all .5s;</span><br><span class="line">      margin-bottom: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item:nth-child(4n) &#123;</span><br><span class="line">      margin-left: 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item:hover &#123;</span><br><span class="line">      box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);</span><br><span class="line">      transform: translate3d(0, -4px, 0);</span><br><span class="line">      cursor: pointer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item img &#123;</span><br><span class="line">      width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item .name &#123;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      margin-bottom: 10px;</span><br><span class="line">      color: #666;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item .price &#123;</span><br><span class="line">      font-size: 22px;</span><br><span class="line">      color: firebrick;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item .price::before &#123;</span><br><span class="line">      content: &quot;¥&quot;;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .filter &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      width: 990px;</span><br><span class="line">      margin: 0 auto;</span><br><span class="line">      padding: 50px 30px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .filter a &#123;</span><br><span class="line">      padding: 10px 20px;</span><br><span class="line">      background: #f5f5f5;</span><br><span class="line">      color: #666;</span><br><span class="line">      text-decoration: none;</span><br><span class="line">      margin-right: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .filter a:active,</span><br><span class="line">    .filter a:focus &#123;</span><br><span class="line">      background: #05943c;</span><br><span class="line">      color: #fff;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;filter&quot;&gt;</span><br><span class="line">    &lt;a data-index=&quot;1&quot; href=&quot;javascript:;&quot;&gt;0-100元&lt;/a&gt;</span><br><span class="line">    &lt;a data-index=&quot;2&quot; href=&quot;javascript:;&quot;&gt;100-300元&lt;/a&gt;</span><br><span class="line">    &lt;a data-index=&quot;3&quot; href=&quot;javascript:;&quot;&gt;300元以上&lt;/a&gt;</span><br><span class="line">    &lt;a href=&quot;javascript:;&quot;&gt;全部区间&lt;/a&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;list&quot;&gt;</span><br><span class="line">    &lt;!-- &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;&quot; alt=&quot;&quot;&gt;</span><br><span class="line">      &lt;p class=&quot;name&quot;&gt;&lt;/p&gt;</span><br><span class="line">      &lt;p class=&quot;price&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt; --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    // 2. 初始化数据</span><br><span class="line">    const goodsList = [</span><br><span class="line">      &#123;</span><br><span class="line">        id: &#x27;4001172&#x27;,</span><br><span class="line">        name: &#x27;称心如意手摇咖啡磨豆机咖啡豆研磨机&#x27;,</span><br><span class="line">        price: &#x27;289.00&#x27;,</span><br><span class="line">        picture: &#x27;https://yanxuan-item.nosdn.127.net/84a59ff9c58a77032564e61f716846d6.jpg&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: &#x27;4001594&#x27;,</span><br><span class="line">        name: &#x27;日式黑陶功夫茶组双侧把茶具礼盒装&#x27;,</span><br><span class="line">        price: &#x27;288.00&#x27;,</span><br><span class="line">        picture: &#x27;https://yanxuan-item.nosdn.127.net/3346b7b92f9563c7a7e24c7ead883f18.jpg&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: &#x27;4001009&#x27;,</span><br><span class="line">        name: &#x27;竹制干泡茶盘正方形沥水茶台品茶盘&#x27;,</span><br><span class="line">        price: &#x27;109.00&#x27;,</span><br><span class="line">        picture: &#x27;https://yanxuan-item.nosdn.127.net/2d942d6bc94f1e230763e1a5a3b379e1.png&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: &#x27;4001874&#x27;,</span><br><span class="line">        name: &#x27;古法温酒汝瓷酒具套装白酒杯莲花温酒器&#x27;,</span><br><span class="line">        price: &#x27;488.00&#x27;,</span><br><span class="line">        picture: &#x27;https://yanxuan-item.nosdn.127.net/44e51622800e4fceb6bee8e616da85fd.png&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: &#x27;4001649&#x27;,</span><br><span class="line">        name: &#x27;大师监制龙泉青瓷茶叶罐&#x27;,</span><br><span class="line">        price: &#x27;139.00&#x27;,</span><br><span class="line">        picture: &#x27;https://yanxuan-item.nosdn.127.net/4356c9fc150753775fe56b465314f1eb.png&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: &#x27;3997185&#x27;,</span><br><span class="line">        name: &#x27;与众不同的口感汝瓷白酒杯套组1壶4杯&#x27;,</span><br><span class="line">        price: &#x27;108.00&#x27;,</span><br><span class="line">        picture: &#x27;https://yanxuan-item.nosdn.127.net/8e21c794dfd3a4e8573273ddae50bce2.jpg&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: &#x27;3997403&#x27;,</span><br><span class="line">        name: &#x27;手工吹制更厚实白酒杯壶套装6壶6杯&#x27;,</span><br><span class="line">        price: &#x27;100.00&#x27;,</span><br><span class="line">        picture: &#x27;https://yanxuan-item.nosdn.127.net/af2371a65f60bce152a61fc22745ff3f.jpg&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        id: &#x27;3998274&#x27;,</span><br><span class="line">        name: &#x27;德国百年工艺高端水晶玻璃红酒杯2支装&#x27;,</span><br><span class="line">        price: &#x27;139.00&#x27;,</span><br><span class="line">        picture: &#x27;https://yanxuan-item.nosdn.127.net/8896b897b3ec6639bbd1134d66b9715c.jpg&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    // 1. 渲染函数  封装</span><br><span class="line">    function render(arr) &#123;</span><br><span class="line">      // 声明空字符串</span><br><span class="line">      let str = &#x27;&#x27;</span><br><span class="line">      // 遍历数组 </span><br><span class="line">      arr.forEach(item =&gt; &#123;</span><br><span class="line">        // 解构</span><br><span class="line">        const &#123; name, picture, price &#125; = item</span><br><span class="line">        str += `</span><br><span class="line">         &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">          &lt;img src=$&#123;picture&#125; alt=&quot;&quot;&gt;</span><br><span class="line">          &lt;p class=&quot;name&quot;&gt;$&#123;name&#125;&lt;/p&gt;</span><br><span class="line">          &lt;p class=&quot;price&quot;&gt;$&#123;price&#125;&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt; </span><br><span class="line">        `</span><br><span class="line">      &#125;)</span><br><span class="line">      // 追加给list </span><br><span class="line">      document.querySelector(&#x27;.list&#x27;).innerHTML = str</span><br><span class="line">    &#125;</span><br><span class="line">    render(goodsList)  // 页面一打开就需要渲染</span><br><span class="line"></span><br><span class="line">    // 2. 过滤筛选  </span><br><span class="line">    document.querySelector(&#x27;.filter&#x27;).addEventListener(&#x27;click&#x27;, e =&gt; &#123;</span><br><span class="line">      // e.target.dataset.index   e.target.tagName</span><br><span class="line">      const &#123; tagName, dataset &#125; = e.target</span><br><span class="line">      // 判断 </span><br><span class="line">      if (tagName === &#x27;A&#x27;) &#123;</span><br><span class="line">        // console.log(11) </span><br><span class="line">        // arr 返回的新数组</span><br><span class="line">        let arr = goodsList // 如果不单击价格按钮，默认展示原有goodsList数组中的内容</span><br><span class="line">        if (dataset.index === &#x27;1&#x27;) &#123;</span><br><span class="line">          arr = goodsList.filter(item =&gt; item.price &gt; 0 &amp;&amp; item.price &lt;= 100)</span><br><span class="line">        &#125; else if (dataset.index === &#x27;2&#x27;) &#123;</span><br><span class="line">          arr = goodsList.filter(item =&gt; item.price &gt;= 100 &amp;&amp; item.price &lt;= 300)</span><br><span class="line">        &#125; else if (dataset.index === &#x27;3&#x27;) &#123;</span><br><span class="line">          arr = goodsList.filter(item =&gt; item.price &gt;= 300)</span><br><span class="line">        &#125;</span><br><span class="line">        // 渲染函数</span><br><span class="line">        render(arr)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h1 id="4、对象深入"><a href="#4、对象深入" class="headerlink" title="4、对象深入"></a>4、对象深入</h1><h2 id="4-1-创建对象三种方式"><a href="#4-1-创建对象三种方式" class="headerlink" title="4.1  创建对象三种方式"></a>4.1  创建对象三种方式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    <span class="attr">username</span>:<span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.<strong>利用</strong> <strong>new Object</strong> <strong>创建对象</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// const obj = new Object()</span></span><br><span class="line">   <span class="comment">// obj.uname = &#x27;张三&#x27;</span></span><br><span class="line">   <span class="comment">// console.log(obj)</span></span><br><span class="line">   <span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>(&#123; <span class="attr">uname</span>: <span class="string">&#x27;张三&#x27;</span> &#125;)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span><br></pre></td></tr></table></figure>

<p>3.<strong>利用构造函数创建对象</strong></p>
<p><strong>构造函数 ：</strong>是一种特殊的函数，主要用来初始化对象</p>
<p><strong>使用场景：</strong>常规的 {…} 语法允许创建一个对象。比如我们创建了佩奇的对象，继续创建乔治的对象还需要重新写一遍，此时可以通过构造函数来快速创建多个类似的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个猪 构造函数 </span></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">Pig</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">uname</span> = uname</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// console.log(new Pig(&#x27;佩奇&#x27;, 6))</span></span><br><span class="line">   <span class="comment">// console.log(new Pig(&#x27;乔治&#x27;, 3))</span></span><br><span class="line">   <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Pig</span>(<span class="string">&#x27;佩奇&#x27;</span>, <span class="number">6</span>)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(p)</span><br><span class="line"></span><br><span class="line">   <span class="comment">//  const pepa = &#123; uname: &#x27;佩奇&#x27;, age: 6 &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">Goods</span>(<span class="params">name, price, count</span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">price</span> = price</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">count</span> = count</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">sayhi</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">const</span> mi = <span class="keyword">new</span> <span class="title class_">Goods</span>(<span class="string">&#x27;小米&#x27;</span>, <span class="number">1999</span>, <span class="number">20</span>)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(mi)</span><br><span class="line">   <span class="keyword">const</span> hw = <span class="keyword">new</span> <span class="title class_">Goods</span>(<span class="string">&#x27;华为&#x27;</span>, <span class="number">3999</span>, <span class="number">59</span>)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(hw)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(mi === hw)</span><br><span class="line">   mi.<span class="property">name</span> = <span class="string">&#x27;vivo&#x27;</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(mi)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(hw)</span><br><span class="line">   <span class="comment">// const date = new Date(&#x27;2022-4-8&#x27;)</span></span><br><span class="line">   <span class="comment">// console.log(date)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">构造函数在技术上是常规函数。</span><br><span class="line">不过有两个约定： </span><br><span class="line">	它们的命名以大写字母开头。 </span><br><span class="line">	它们只能由 &quot;new&quot; 操作符来执行。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>补充说明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">说明：</span><br><span class="line">1. 使用 new 关键字调用函数的行为被称为实例化</span><br><span class="line">2. 实例化构造函数时没有参数时可以省略 ()</span><br><span class="line">3. 构造函数内部无需写return，返回值即为新创建的对象</span><br><span class="line">4. 构造函数内部的 return 返回的值无效，所以不要写return</span><br><span class="line">5.  new Object（）   new Date（） 也是实例化构造函数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-2-实例成员-amp-静态成员"><a href="#4-2-实例成员-amp-静态成员" class="headerlink" title="4.2  实例成员&amp;静态成员"></a>4.2  实例成员&amp;静态成员</h2><p><strong>实例成员</strong></p>
<p>通过构造函数创建的对象称为实例对象，实例对象中的属性和方法称为实例成员。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216952.png"></p>
<p><strong>静态成员：</strong></p>
<p>构造函数的属性和方法被称为静态成员</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216614.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">说明：</span><br><span class="line">1. 构造函数的属性和方法被称为静态成员</span><br><span class="line">2. 一般公共特征的属性或方法静态成员设置为静态成员</span><br><span class="line">3. 静态成员方法中的 this 指向构造函数本身</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-3-内置构造函数"><a href="#4-3-内置构造函数" class="headerlink" title="4.3  内置构造函数"></a>4.3  内置构造函数</h2><h3 id="4-3-1-Object"><a href="#4-3-1-Object" class="headerlink" title="4.3.1 Object"></a>4.3.1 <code>Object</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在 JavaScript 中最主要的数据类型有 6 种：</span><br><span class="line">基本数据类型：</span><br><span class="line">	字符串、数值、布尔、undefined、null </span><br><span class="line">引用类型:  </span><br><span class="line">	对象</span><br></pre></td></tr></table></figure>

<p>但是，我们会发现有些特殊情况：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;zhangsan&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="property">length</span>); <span class="comment">// 只有对象采用属性，这里的字符串基本类型怎么可以调用属性呢？</span></span><br></pre></td></tr></table></figure>

<p>其实字符串、数值、布尔、等基本类型也都有专门的构造函数，这些我们称为包装类型。</p>
<p><code>JS</code>中几乎所有的数据都可以基于构成函数创建。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// const str = &#x27;zhangsan&#x27;</span></span><br><span class="line">  <span class="comment">// console.log(str.length)</span></span><br><span class="line">  <span class="comment">// const num = 12</span></span><br><span class="line">  <span class="comment">// console.log(num.toFixed(2))</span></span><br><span class="line">  <span class="comment">// const str = &#x27;zhangsan&#x27;</span></span><br><span class="line">  <span class="comment">// js 底层完成， 把简单数据类型包装为了引用数据类型</span></span><br><span class="line">  <span class="comment">// const str = new String(&#x27;zhangsan&#x27;)</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">引用类型</span><br><span class="line">	Object，Array，RegExp，Date 等</span><br><span class="line">包装类型</span><br><span class="line">	String，Number，Boolean </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>Object </code>是内置的构造函数，用于创建普通对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>(&#123; <span class="attr">uname</span>: <span class="string">&#x27;张三&#x27;</span> &#125;)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span><br></pre></td></tr></table></figure>

<p>但是这种方式不常用</p>
<p>但是在<code>Object</code>中有三个常用的静态方法。（静态方法就是只有构造函数Object可以调用的）</p>
<p><code>Object.keys </code>静态方法获取对象中所有属性（键） </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o = &#123; <span class="attr">name</span>:<span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span> &#125;</span><br><span class="line"><span class="comment">// 想要获取对象中的属性名和属性值，应该怎样做？</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> o )&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(k) <span class="comment">// name,age</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(o[k]) <span class="comment">// zhangsan,18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以前是通过<code>for..in</code>来实现，但是现在有了更加简单的方法，就是通过<code>Object.keys</code>方法和<code>Object.values </code>方法</p>
<p>现在先看一下<code>Object.keys</code>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o = &#123; <span class="attr">name</span>:<span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span> &#125;</span><br><span class="line"><span class="comment">// 获取对象的所有键，并且返回的是一个数组</span></span><br><span class="line"><span class="keyword">const</span> arr = <span class="title class_">Object</span>.<span class="title function_">keys</span>(o)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [&#x27;name&#x27;,&#x27;age&#x27;] // 注意返回的是一个数组</span></span><br></pre></td></tr></table></figure>

<p><code>Object.values</code> 静态方法获取对象中所有属性值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o = &#123; <span class="attr">name</span>:<span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span> &#125;</span><br><span class="line"><span class="comment">// 获取对象的所有键，并且返回的是一个数组</span></span><br><span class="line"><span class="keyword">const</span> arr = <span class="title class_">Object</span>.<span class="title function_">values</span>(o)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">//[&#x27;zhangsan&#x27;,18] // 注意返回的是一个数组</span></span><br></pre></td></tr></table></figure>

<p><code>Object. assign</code> 静态方法常用于对象拷贝</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o = &#123; <span class="attr">name</span>:<span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(obj,o)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj) <span class="comment">// &#123;name:&#x27;zhangsan&#x27;,age:18&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>使用：</strong>经常使用的场景给对象添加属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o = &#123; <span class="attr">name</span>:<span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span> &#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(o,&#123;<span class="attr">address</span>:<span class="string">&#x27;北京&#x27;</span>&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o) <span class="comment">//  &#123; name:&#x27;zhangsan&#x27;,age:18,address:&#x27;北京&#x27; &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-2-Array"><a href="#4-3-2-Array" class="headerlink" title="4.3.2 Array"></a>4.3.2 <code>Array</code></h3><p><code>Array </code>是内置的构造函数，用于创建数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [];<span class="comment">//经常使用</span></span><br><span class="line"><span class="keyword">const</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>,<span class="number">5</span>) <span class="comment">// 不常用</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [3,5]</span></span><br></pre></td></tr></table></figure>

<p>这种方式不常用</p>
<p><strong>数组常见实例方法-核心方法</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216233.png"></p>
<p><strong>作用：</strong>reduce 返回函数累计处理的结果，经常用于求和等</p>
<p>基本语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">累计值, 当前元素</span>)&#123;&#125;, 起始值)</span><br></pre></td></tr></table></figure>

<p>起始值可以省略，如果写就作为第一次累计的起始值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> result = arr.<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">prev, item</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(prev)</span><br><span class="line">      <span class="keyword">return</span> prev + item</span><br><span class="line">   &#125;, <span class="number">0</span>) <span class="comment">// 这里的起始值是0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result =&quot;</span>,result);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">prev, item</span>) &#123; </span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(prev)</span><br><span class="line">     <span class="keyword">return</span> prev + item</span><br><span class="line">   &#125;) <span class="comment">// 这里省略了起始值</span></span><br></pre></td></tr></table></figure>

<p>可以简化成箭头函数的形式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">  <span class="keyword">const</span> re = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, item</span>) =&gt;</span> prev + item)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(re)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">关于累计值参数说明：</span><br><span class="line">       1. 如果有起始值，则以起始值为准开始累计， 累计值  = 起始值</span><br><span class="line">       2.  如果没有起始值， 则累计值以数组的第一个数组元素作为起始值开始累计</span><br><span class="line">       3.  后面每次遍历就会用后面的数组元素 累计到 累计值 里面 （类似求和里面的 sum ）</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用场景：求和运算</p>
<p><strong>案例：员工涨薪计算成本</strong></p>
<p>需求：</p>
<p>(1)：给员工每人涨薪 30%</p>
<p>(2)：然后计算需要多支出的费用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> arr = [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">salary</span>: <span class="number">10000</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">salary</span>: <span class="number">10000</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">salary</span>: <span class="number">20000</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 涨薪的钱数  10000 * 0.3 </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// const money = arr.reduce(function (prev, item) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   return prev + item.salary * 0.3</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// &#125;, 0)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> money = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, item</span>) =&gt;</span> prev + item.<span class="property">salary</span> * <span class="number">0.3</span>, <span class="number">0</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(money)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>数组中常见的其他方法</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216979.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">const</span> arr = [</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="attr">name</span>: <span class="string">&#x27;小米&#x27;</span>,</span><br><span class="line">       <span class="attr">price</span>: <span class="number">1999</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="attr">name</span>: <span class="string">&#x27;华为&#x27;</span>,</span><br><span class="line">       <span class="attr">price</span>: <span class="number">3999</span></span><br><span class="line">     &#125;,</span><br><span class="line">   ]</span><br><span class="line">   <span class="comment">// 找华为 这个对象，并且返回这个对象</span></span><br><span class="line">   <span class="comment">// const mi = arr.find(function (item) &#123;</span></span><br><span class="line">   <span class="comment">//   // console.log(item)  //</span></span><br><span class="line">   <span class="comment">//   // console.log(item.name)  //</span></span><br><span class="line">   <span class="comment">//   console.log(111)</span></span><br><span class="line">   <span class="comment">//   return item.name === &#x27;华为&#x27;</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line">   <span class="comment">// 1. find 查找</span></span><br><span class="line">   <span class="comment">// const mi = arr.find(item =&gt; item.name === &#x27;小米&#x27;)</span></span><br><span class="line">   <span class="comment">// console.log(mi)</span></span><br><span class="line">   <span class="comment">// 2. every 每一个是否都符合条件，如果都符合返回 true ，否则返回false</span></span><br><span class="line">   <span class="keyword">const</span> arr1 = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line">   <span class="keyword">const</span> flag = arr1.<span class="title function_">every</span>(<span class="function"><span class="params">item</span> =&gt;</span> item &gt;= <span class="number">20</span>)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(flag)</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-3-String"><a href="#4-3-3-String" class="headerlink" title="4.3.3 String"></a>4.3.3 <code>String</code></h3><p><strong>常见实例方法</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216315.png"></p>
<p>案例：</p>
<p>案例数据：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216700.png"></p>
<p>最终展示效果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032216234.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">思路：</span><br><span class="line">①：把字符串拆分为数组，这样两个赠品就拆分开了  用那个方法？</span><br><span class="line">②：利用map遍历数组，同时把数组元素生成到span里面，并且返回</span><br><span class="line">③：因为返回的是数组，所以需要 转换为字符串, 用那个方法？ </span><br><span class="line">④：p的innerHTML 存放刚才的返回值</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> gift = <span class="string">&#x27;50g的茶叶,清洗球&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 1. 把字符串拆分为数组</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 2. 根据数组元素的个数，生成 对应 span标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// const str = gift.split(&#x27;,&#x27;).map(function (item) &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   return `&lt;span&gt;【赠品】 $&#123;item&#125;&lt;/span&gt; &lt;br&gt;`</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// &#125;).join(&#x27;&#x27;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// // console.log(str)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// document.querySelector(&#x27;div&#x27;).innerHTML = str</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>).<span class="property">innerHTML</span> = gift.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>).<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="string">`&lt;span&gt;【赠品】 <span class="subst">$&#123;item&#125;</span>&lt;/span&gt; &lt;br&gt;`</span>).<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<h2 id="4-4-原型"><a href="#4-4-原型" class="headerlink" title="4.4  原型"></a>4.4  原型</h2><p><code>KilgourNote:</code></p>
<blockquote>
<p>JavaScript中将一些对象中的公共元素提取出来单独放置于一个对象中作为公共对象继承。这个公共对象在JavaScript中被称为原型对象。</p>
<p>继承原型对象的对象通过<code>.prototype</code>引用公共对象，公共对象中又一个<code>constructor</code>属性指向继承公共对象的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eyes</span> = <span class="number">2</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">head</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Woman</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Person</span>(); <span class="comment">// &#123;eyes: 2, head: 1&#125;</span></span><br><span class="line"><span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Woman</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">baby</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;宝贝&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Man</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Man</span>;</span><br><span class="line"><span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">Somking</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;抽烟&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> wm = <span class="keyword">new</span> <span class="title class_">Woman</span>();<span class="comment">// 单独为wm创建一个对象空间</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(wm);</span><br><span class="line"><span class="comment">//Woman &#123;&#125;</span></span><br><span class="line"><span class="comment">//[[Prototype]]: Person</span></span><br><span class="line"><span class="comment">//baby: ƒ ()</span></span><br><span class="line"><span class="comment">//constructor: ƒ Woman()</span></span><br><span class="line"><span class="comment">//eyes: 2</span></span><br><span class="line"><span class="comment">//head: 1</span></span><br><span class="line"><span class="comment">//[[Prototype]]: Object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(wm.<span class="property">__proto__</span>);<span class="comment">//指的是wm继承的对象原型 4.4.5对象原型图</span></span><br><span class="line"><span class="comment">// Person &#123;eyes: 2, head: 1, baby: ƒ&#125;</span></span><br><span class="line"><span class="comment">// baby:ƒ ()</span></span><br><span class="line"><span class="comment">// constructor:ƒ Woman()</span></span><br><span class="line"><span class="comment">// eyes:2</span></span><br><span class="line"><span class="comment">// head:1</span></span><br><span class="line"><span class="comment">// [[Prototype]]:Object</span></span><br><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="title class_">Man</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m);</span><br></pre></td></tr></table></figure>


</blockquote>
<p>封装是面向对象思想中比较重要的一部分，<code>js</code>面向对象可以通过构造函数实现的封装。</p>
<p>前面我们学过的构造函数方法很好用，但是 <strong>存在浪费内存</strong>的问题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uname</span> = uname</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我会唱歌&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">const</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">const</span> zxy = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;张学友&#x27;</span>, <span class="number">19</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>sing</code>方法是公共的。</p>
<p>我们希望所有的对象使用同一个函数，这样就比较节省内存，那么我们要怎样做呢？</p>
<p>通过原型来实现，原型本质就是一个<strong>对象</strong>，我们也称<code>prototype</code>为原型对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、构造函数通过原型分配的函数是所有对象所 共享的。</span><br><span class="line">2、JavaScript 规定，每一个构造函数都有一个 prototype 属性，指向另一个对象，所以我们也称为原型对象</span><br><span class="line">3、这个对象可以挂载函数，对象实例化不会多次创建原型上函数，节约内存</span><br><span class="line">4、我们可以把那些不变的方法，直接定义在 prototype 对象上，这样所有对象的实例就可以共享这些方法。</span><br><span class="line">5、构造函数和原型对象中的this 都指向 实例化的对象</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   <span class="comment">// 构造函数  公共的属性和方法 封装到 Star 构造函数里面了</span></span><br><span class="line">   <span class="comment">// 1.公共的属性写到 构造函数里面</span></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age</span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">uname</span> = uname</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">     <span class="comment">// this.sing = function () &#123;</span></span><br><span class="line">     <span class="comment">//   console.log(&#x27;唱歌&#x27;)</span></span><br><span class="line">     <span class="comment">// &#125;</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 2. 公共的方法写到原型对象身上   节约了内存</span></span><br><span class="line">   <span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sing</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;唱歌&#x27;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">const</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">55</span>)</span><br><span class="line">   <span class="keyword">const</span> zxy = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;张学友&#x27;</span>, <span class="number">58</span>)</span><br><span class="line">   ldh.<span class="title function_">sing</span>() <span class="comment">//调用</span></span><br><span class="line">   zxy.<span class="title function_">sing</span>() <span class="comment">//调用</span></span><br><span class="line">   <span class="comment">// console.log(ldh === zxy)  // false</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">sing</span> === zxy.<span class="property">sing</span>)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-1-this指向"><a href="#4-4-1-this指向" class="headerlink" title="4.4.1  this指向"></a>4.4.1  this指向</h3><p>构造函数和原型对象中的this 都指向 实例化的对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">let</span> that</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">uname</span> = uname</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 原型对象里面的函数this指向的还是 实例对象 ldh</span></span><br><span class="line">    <span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sing</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      that = <span class="variable language_">this</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;唱歌&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 实例对象 ldh   </span></span><br><span class="line">    <span class="comment">// 构造函数里面的 this 就是  实例对象  ldh</span></span><br><span class="line">    <span class="keyword">const</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>)</span><br><span class="line">    ldh.<span class="title function_">sing</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(that === ldh)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>构造函数和原型里面的this指向谁? </p>
<p>指向的是实例化的对象</p>
<h3 id="4-4-2-给数组扩展方法"><a href="#4-4-2-给数组扩展方法" class="headerlink" title="4.4.2  给数组扩展方法"></a>4.4.2  给数组扩展方法</h3><p>给数组扩展求最大值方法和求和方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 自己定义 数组扩展方法  求和 和 最大值 </span></span><br><span class="line">    <span class="comment">// 1. 我们定义的这个方法，任何一个数组实例对象都可以使用</span></span><br><span class="line">    <span class="comment">// 2. 自定义的方法写到  数组.prototype 身上</span></span><br><span class="line">    <span class="comment">// 1. 最大值</span></span><br><span class="line">    <span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">    <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">max</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 展开运算符</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(...<span class="variable language_">this</span>)</span><br><span class="line">      <span class="comment">// 原型函数里面的this 指向谁？ 实例对象 arr</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2. 最小值</span></span><br><span class="line">    <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">min</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 展开运算符</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">min</span>(...<span class="variable language_">this</span>)</span><br><span class="line">      <span class="comment">// 原型函数里面的this 指向谁？ 实例对象 arr</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">max</span>())</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>].<span class="title function_">max</span>())</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">min</span>())</span><br><span class="line">    <span class="comment">// const arr = new Array(1, 2)</span></span><br><span class="line">    <span class="comment">// console.log(arr)</span></span><br><span class="line">    <span class="comment">// 3. 求和 方法 </span></span><br><span class="line">    <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sum</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, item</span>) =&gt;</span> prev + item, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">sum</span>())</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">11</span>, <span class="number">21</span>, <span class="number">31</span>].<span class="title function_">sum</span>())</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-3-constructor-属性"><a href="#4-4-3-constructor-属性" class="headerlink" title="4.4.3  constructor 属性"></a>4.4.3  constructor 属性</h3><p>每个原型对象里面都有个constructor 属性（constructor 构造函数）</p>
<p><strong>作用：</strong>该属性指向该原型对象的构造函数， 简单理解，就是指向我的爸爸，我是有爸爸的孩子</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217287.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用场景：</span><br><span class="line">如果有多个对象的方法，我们可以给原型对象采取对象形式赋值.</span><br><span class="line">但是这样就会覆盖构造函数原型对象原来的内容，这样修改后的原型对象 constructor  就不再指向当前构造函数了</span><br><span class="line">此时，我们可以在修改后的原型对象中，添加一个 constructor 指向原来的构造函数。</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">  &lt;script&gt;</span><br><span class="line">    <span class="comment">// constructor  单词 构造函数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Star.prototype.sing = function () &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(&#x27;唱歌&#x27;)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// Star.prototype.dance = function () &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(&#x27;跳舞&#x27;)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params"></span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// console.log(Star.prototype)</span></span><br><span class="line"><span class="comment">// 如果有多个公共方法，我们可以给原型对象采取对象的形式进行赋值</span></span><br><span class="line">    <span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">      <span class="comment">// 从新指回创造这个原型对象的 构造函数</span></span><br><span class="line">      <span class="attr">constructor</span>: <span class="title class_">Star</span>,</span><br><span class="line">      <span class="attr">sing</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;唱歌&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">dance</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;跳舞&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Star</span>.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line">    <span class="comment">// console.log(Star.prototype.constructor)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// const ldh = new Star()</span></span><br><span class="line">    <span class="comment">// console.log(Star.prototype.constructor === Star)</span></span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="4-4-4-思考"><a href="#4-4-4-思考" class="headerlink" title="4.4.4  思考"></a>4.4.4  思考</h3><p>构造函数可以创建实例对象，构造函数还有一个原型对象，一些公共的属性或者方法放到这个原型对象身上</p>
<p>但是 为啥实例对象可以访问原型对象里面的属性和方法呢？</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217362.png"></p>
<h3 id="4-4-5-对象原型"><a href="#4-4-5-对象原型" class="headerlink" title="4.4.5  对象原型"></a>4.4.5  对象原型</h3><p>对象都会有一个属性 <code>__proto__ </code>指向构造函数的 <code>prototype</code> 原型对象，之所以我们对象可以使用构造函数<code>prototype</code>原型对象的属性和方法，就是因为对象有<code>__proto__</code>原型的存在。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217518.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">const</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>()</span><br><span class="line">   <span class="comment">// 对象原型__proto__ 指向 改构造函数的原型对象</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">__proto__</span>)</span><br><span class="line">   <span class="comment">// console.log(ldh.__proto__ === Star.prototype)</span></span><br><span class="line">   <span class="comment">// 对象原型里面有constructor 指向 构造函数 Star</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">__proto__</span>.<span class="property">constructor</span> === <span class="title class_">Star</span>)</span><br><span class="line"></span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>__proto__</code>对象原型里面也有一个 constructor属性，指向创建该实例对象的构造函数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217489.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">注意：</span><br><span class="line">	__proto__ 是JS非标准属性</span><br><span class="line"> 	[[prototype]]和__proto__意义相同</span><br><span class="line">	用来表明当前实例对象指向哪个原型对象prototype</span><br><span class="line">	__proto__对象原型里面也有一个 constructor属性，指向创建该实例对象的构造函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-4-6-原型继承"><a href="#4-4-6-原型继承" class="headerlink" title="4.4.6 原型继承"></a>4.4.6 原型继承</h3><p>继承是面向对象编程的另一个特征，通过继承进一步提升代码封装的程度，JavaScript 中大多是借助原型对象实现继承的特性。</p>
<p>先看一段初始代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Man</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">head</span> = <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eyes</span> = <span class="number">2</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">say</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eat</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Woman</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">head</span> = <span class="number">1</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eyes</span> = <span class="number">2</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">say</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">eat</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">baby</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上构造函数中存在大量的重复代码。所以下面抽取公共部分的代码</p>
<p>把男人和女人公共的部分抽取出来放到人类里面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 人类</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">People</span> = &#123;</span><br><span class="line">    <span class="attr">head</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">eyes</span>:<span class="number">2</span>,</span><br><span class="line">    <span class="attr">eat</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">say</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 男人</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Man</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="comment">// 女人</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Woman</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">baby</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现继承</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 人类(包含了公共属性和方法)</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">People</span> = &#123;</span><br><span class="line">    <span class="attr">head</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">eyes</span>:<span class="number">2</span>,</span><br><span class="line">    <span class="attr">eat</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">say</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 男人</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Man</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="comment">// 把公共的属性和方法赋值给Man原型对象，这样就可以共享了</span></span><br><span class="line"><span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">People</span></span><br><span class="line"><span class="comment">//  注意：让原型对象里面的constructor重新指回Man自己的构造函数（上图所示）</span></span><br><span class="line"><span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Man</span></span><br><span class="line"><span class="comment">// 女人</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Woman</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">baby</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">People</span></span><br><span class="line"><span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Woman</span></span><br></pre></td></tr></table></figure>

<p>下面进行测试</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> zs = <span class="keyword">new</span> <span class="title class_">Man</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(zs)</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">让男人和女人都能继承人类的一些属性和方法</span><br><span class="line">	把男人女人公共的属性和方法抽取出来 People</span><br><span class="line">	然后赋值给Man的原型对象，可以共享这些属性和方法</span><br><span class="line">	注意让constructor指回Man这个构造函数</span><br></pre></td></tr></table></figure>

<p>但是，以上的写法是有问题的，例如：如果我们给男人添加了一个吸烟的方法，发现女人自动也添加这个方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 人类(包含了公共属性和方法)</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">People</span> = &#123;</span><br><span class="line">    <span class="attr">head</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">eyes</span>:<span class="number">2</span>,</span><br><span class="line">    <span class="attr">eat</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">say</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 男人</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Man</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="comment">// 把公共的属性和方法赋值给Man原型对象，这样就可以共享了</span></span><br><span class="line"><span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">People</span></span><br><span class="line"><span class="comment">//  注意：让原型对象里面的constructor重新指回Man自己的构造函数</span></span><br><span class="line">  <span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Man</span></span><br><span class="line"><span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">smoking</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="comment">// 女人</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Woman</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">baby</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">People</span></span><br><span class="line"> <span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Woman</span></span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> woman = <span class="keyword">new</span> <span class="title class_">Woman</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(woman)</span><br></pre></td></tr></table></figure>

<p>原因是：男人和女人都同时使用了同一个对象，根据引用类型的特点，他们指向同一个对象，修改一个就会都影响</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217326.png"></p>
<p>怎样进行解决呢？</p>
<p>需求：男人和女人不要使用同一个对象，但是不同对象里面包含相同的属性和方法</p>
<p>答案：构造函数  </p>
<p>new 每次都会创建一个新的对象</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217939.png"></p>
<p>下面继续完善代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 继续抽取   公共的部分放到原型上</span></span><br><span class="line">    <span class="comment">// const Person1 = &#123;</span></span><br><span class="line">    <span class="comment">//   eyes: 2,</span></span><br><span class="line">    <span class="comment">//   head: 1</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// const Person2 = &#123;</span></span><br><span class="line">    <span class="comment">//   eyes: 2,</span></span><br><span class="line">    <span class="comment">//   head: 1</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// 构造函数  new 出来的对象 结构一样，但是对象不一样</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">eyes</span> = <span class="number">2</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">head</span> = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 女人  构造函数   继承  想要 继承 Person</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Woman</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Woman 通过原型来继承 Person</span></span><br><span class="line">    <span class="comment">// 父构造函数（父类）   子构造函数（子类）</span></span><br><span class="line">    <span class="comment">// --------------------子类的原型 =  new 父类  </span></span><br><span class="line">    <span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Person</span>()   <span class="comment">// &#123;eyes: 2, head: 1&#125; </span></span><br><span class="line">    <span class="comment">// 指回原来的构造函数</span></span><br><span class="line">    <span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Woman</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 给女人添加一个方法  生孩子</span></span><br><span class="line">    <span class="title class_">Woman</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">baby</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;宝贝&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> red = <span class="keyword">new</span> <span class="title class_">Woman</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(red)</span><br><span class="line">    <span class="comment">// console.log(Woman.prototype)</span></span><br><span class="line">    <span class="comment">// 男人 构造函数  继承  想要 继承 Person</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Man</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 通过 原型继承 Person</span></span><br><span class="line">    <span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line">    <span class="title class_">Man</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Man</span></span><br><span class="line">    <span class="keyword">const</span> zs = <span class="keyword">new</span> <span class="title class_">Man</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(zs)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">通过以上的</span><br><span class="line">   Woman.prototype = new Person()  </span><br><span class="line">   重新创建了一个Person对象赋值给了  Woman.prototype 原型对象</span><br><span class="line">      Man.prototype = new Person() </span><br><span class="line">        重新创建了一个Person对象赋值给了  Man.prototype 原型对象</span><br><span class="line">        两次new Person创建了两个不同的Person对象，但是都可以该对象中的公共的属性和方法</span><br></pre></td></tr></table></figure>

<h3 id="4-4-7-原型链"><a href="#4-4-7-原型链" class="headerlink" title="4.4.7 原型链"></a>4.4.7 原型链</h3><p>基于原型对象的继承使得不同构造函数的原型对象关联在一起，并且这种关联的关系是一种链状的结构，我们将原型对象的链状结构关系称为原型链</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217782.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、当访问一个对象的属性（包括方法）时，首先查找这个对象自身有没有该属性。</span><br><span class="line">2、如果没有就查找它的原型（也就是 __proto__指向的 prototype 原型对象）</span><br><span class="line">3、如果还没有就查找原型对象的原型（Object的原型对象）</span><br><span class="line">4、依此类推一直找到 Object 为止（null）</span><br><span class="line">5、__proto__对象原型的意义就在于为对象成员查找机制提供一个方向，或者说一条路线</span><br><span class="line">6、可以使用  instanceof 运算符用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> ldh = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line">    <span class="comment">// console.log(ldh.__proto__ === Person.prototype)</span></span><br><span class="line">    <span class="comment">// console.log(Person.prototype.__proto__ === Object.prototype)</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh <span class="keyword">instanceof</span> <span class="title class_">Person</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh <span class="keyword">instanceof</span> <span class="title class_">Object</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh <span class="keyword">instanceof</span> <span class="title class_">Array</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] <span class="keyword">instanceof</span> <span class="title class_">Array</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span> <span class="keyword">instanceof</span> <span class="title class_">Object</span>)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="5、高级技巧"><a href="#5、高级技巧" class="headerlink" title="5、高级技巧"></a>5、高级技巧</h1><h2 id="5-1-深浅拷贝"><a href="#5-1-深浅拷贝" class="headerlink" title="5.1  深浅拷贝"></a>5.1  深浅拷贝</h2><p>开发中我们经常需要复制一个对象。如果直接用赋值会有下面问题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">uname</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> o = obj</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(o)</span><br><span class="line">  o.<span class="property">age</span> = <span class="number">20</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(o)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217188.png"></p>
<p><strong>浅拷贝</strong></p>
<p>浅拷贝：拷贝的是地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 拷贝对象：Object.assgin()  / 展开运算符  &#123;...obj&#125;  拷贝对象</span><br><span class="line"> 2.拷贝数组：Array.prototype.concat()   或者  [...arr]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">uname</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">family</span>: &#123;</span><br><span class="line">      <span class="attr">baby</span>: <span class="string">&#x27;小zhang&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 浅拷贝</span></span><br><span class="line">  <span class="comment">// const o = &#123; ...obj &#125;</span></span><br><span class="line">  <span class="comment">//  console.log(o.age)</span></span><br><span class="line">  <span class="comment">// o.age = 20</span></span><br><span class="line">  <span class="comment">// console.log(o)</span></span><br><span class="line">  <span class="comment">// console.log(obj)</span></span><br><span class="line">  <span class="keyword">const</span> o = &#123;&#125;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">assign</span>(o, obj)</span><br><span class="line">  o.<span class="property">age</span> = <span class="number">20</span></span><br><span class="line">  o.<span class="property">family</span>.<span class="property">baby</span> = <span class="string">&#x27;zhangxiao&#x27;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(o)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>如果是简单数据类型拷贝值，引用数据类型拷贝的是地址 (简单理解： 如果是单层对象，没问题，如果有多层就有问题)</p>
<p>问题：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">直接赋值和浅拷贝有什么区别？</span><br><span class="line">	直接赋值的方法，只要是对象，都会相互影响，因为是直接拷贝对象栈里面的地址</span><br><span class="line">	浅拷贝如果是一层对象，不相互影响，如果出现多层对象拷贝还会相互影响</span><br><span class="line">浅拷贝怎么理解？</span><br><span class="line">	拷贝对象之后，里面的属性值是简单数据类型直接拷贝值</span><br><span class="line">	如果属性值是引用数据类型则拷贝的是地址	</span><br></pre></td></tr></table></figure>

<h2 id="5-2-深拷贝"><a href="#5-2-深拷贝" class="headerlink" title="5.2  深拷贝"></a>5.2  深拷贝</h2><p>深拷贝：拷贝的是对象，不是地址</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">常见方法：</span><br><span class="line">通过递归实现深拷贝</span><br><span class="line">lodash/cloneDeep</span><br><span class="line">通过<span class="title class_">JSON</span>.<span class="title function_">stringify</span>()实现</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">通过递归实现深拷贝</span><br><span class="line">函数递归：</span><br><span class="line">	如果一个函数在内部可以调用其本身，那么这个函数就是递归函数</span><br><span class="line">	简单理解:函数内部自己调用自己, 这个函数就是递归函数</span><br><span class="line">	递归函数的作用和循环效果类似</span><br><span class="line">	由于递归很容易发生“栈溢出”错误（stack overflow），所以必须要加退出条件 return</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   <span class="keyword">let</span> i = <span class="number">1</span></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`这是第<span class="subst">$&#123;i&#125;</span>次`</span>)</span><br><span class="line">     <span class="keyword">if</span> (i &gt;= <span class="number">6</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span></span><br><span class="line">     &#125;</span><br><span class="line">     i++</span><br><span class="line">     <span class="title function_">fn</span>()</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">fn</span>()</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"> &lt;script&gt;</span><br><span class="line">   <span class="keyword">const</span> obj = &#123;</span><br><span class="line">     <span class="attr">uname</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">     <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">     <span class="attr">hobby</span>: [<span class="string">&#x27;乒乓球&#x27;</span>, <span class="string">&#x27;足球&#x27;</span>],</span><br><span class="line">     <span class="attr">family</span>: &#123;</span><br><span class="line">       <span class="attr">baby</span>: <span class="string">&#x27;小zhang&#x27;</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">const</span> o = &#123;&#125;</span><br><span class="line">   <span class="comment">// 拷贝函数</span></span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">newObj, oldObj</span>) &#123;</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> oldObj) &#123;</span><br><span class="line">       <span class="comment">// 处理数组的问题  一定先写数组 在写 对象 不能颠倒</span></span><br><span class="line">       <span class="keyword">if</span> (oldObj[k] <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span><br><span class="line">         newObj[k] = []  <span class="comment">// o&#123;   hobby:[] &#125;</span></span><br><span class="line">         <span class="comment">//  newObj[k] 接收 []  hobby</span></span><br><span class="line">         <span class="comment">//  oldObj[k]   [&#x27;乒乓球&#x27;, &#x27;足球&#x27;]</span></span><br><span class="line">         <span class="title function_">deepCopy</span>(newObj[k], oldObj[k])</span><br><span class="line">       &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldObj[k] <span class="keyword">instanceof</span> <span class="title class_">Object</span>) &#123;</span><br><span class="line">         newObj[k] = &#123;&#125;</span><br><span class="line">         <span class="title function_">deepCopy</span>(newObj[k], oldObj[k])</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">//  k  属性名 uname age    oldObj[k]  属性值  18</span></span><br><span class="line">         <span class="comment">// newObj[k]  === o.uname  给新对象添加属性</span></span><br><span class="line">         newObj[k] = oldObj[k]  </span><br><span class="line">           <span class="comment">// o&#123; unmae:&quot;zhangsan&quot;,age:18&#125;</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">deepCopy</span>(o, obj) <span class="comment">// 函数调用  两个参数 o 新对象  obj 旧对象</span></span><br><span class="line">  </span><br><span class="line">   o.<span class="property">age</span> = <span class="number">20</span></span><br><span class="line">   o.<span class="property">hobby</span>[<span class="number">0</span>] = <span class="string">&#x27;篮球&#x27;</span></span><br><span class="line">   o.<span class="property">family</span>.<span class="property">baby</span> = <span class="string">&#x27;laozhang&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">1</span>, <span class="number">23</span>] <span class="keyword">instanceof</span> <span class="title class_">Object</span>)</span><br><span class="line">  </span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;!-- 先引用 --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./lodash.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> obj = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">uname</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">age</span>: <span class="number">18</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">hobby</span>: [<span class="string">&#x27;乒乓球&#x27;</span>, <span class="string">&#x27;足球&#x27;</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">family</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">baby</span>: <span class="string">&#x27;小zhang&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> o = _.<span class="title function_">cloneDeep</span>(obj)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="comment">// console.log(o)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    o.<span class="property">family</span>.<span class="property">baby</span> = <span class="string">&#x27;老zhang&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(o)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> obj = &#123;</span><br><span class="line">      <span class="attr">uname</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">      <span class="attr">hobby</span>: [<span class="string">&#x27;乒乓球&#x27;</span>, <span class="string">&#x27;足球&#x27;</span>],</span><br><span class="line">      <span class="attr">family</span>: &#123;</span><br><span class="line">        <span class="attr">baby</span>: <span class="string">&#x27;小zhang&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 把对象转换为 JSON 字符串</span></span><br><span class="line">    <span class="comment">// console.log(JSON.stringify(obj))</span></span><br><span class="line">    <span class="keyword">const</span> o = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj))</span><br><span class="line">   <span class="comment">// console.log(o)</span></span><br><span class="line">    o.<span class="property">family</span>.<span class="property">baby</span> = <span class="string">&#x27;123&#x27;</span></span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(o)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-3-异常处理"><a href="#5-3-异常处理" class="headerlink" title="5.3 异常处理"></a>5.3 异常处理</h2><p><strong><code>throw</code> 抛异常</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!x || !y) &#123;</span><br><span class="line">      <span class="comment">// throw &#x27;没有参数传递进来&#x27;</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;没有参数传递过来&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fn</span>())</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">总结：</span><br><span class="line">1. throw 抛出异常信息，程序也会终止执行</span><br><span class="line">2. throw 后面跟的是错误提示信息</span><br><span class="line">3. Error 对象配合 throw 使用，能够设置更详细的错误信息</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong><code>try /catch</code> 捕获异常</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">try</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 可能发送错误的代码 要写到 try</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> p = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.p&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        p.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125; <span class="keyword">catch</span> (err) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 拦截错误，提示浏览器提供的错误信息，但是不中断程序的执行</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>( err.<span class="property">message</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="comment">// throw new Error(&#x27;你看看，选择器错误了吧&#x27;)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 需要加return 中断程序</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="keyword">return</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">finally</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 不管你程序对不对，一定会执行的代码</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">alert</span>(<span class="string">&#x27;弹出对话框&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">fn</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">总结：</span><br><span class="line">1. try...catch 用于捕获错误信息</span><br><span class="line">2. 将预估可能发生错误的代码写在 try 代码段中</span><br><span class="line">3. 如果 try 代码段中出现错误后，会执行 catch 代码段，并截获到错误信息</span><br><span class="line">4. finally  不管是否有错误，都会执行 </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5-4-this指向"><a href="#5-4-this指向" class="headerlink" title="5.4 this指向"></a>5.4 <code>this</code>指向</h2><h3 id="5-4-1-普通函数this指向"><a href="#5-4-1-普通函数this指向" class="headerlink" title="5.4.1  普通函数this指向"></a>5.4.1  普通函数<code>this</code>指向</h3><p>普通函数的调用方式决定了 this 的值，即【谁调用 this 的值指向谁】</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 普通函数：  谁调用我，this就指向谁</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)  <span class="comment">// window</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)  <span class="comment">// window    </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">window</span>.<span class="title function_">fn</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// window </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, <span class="number">1000</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)  <span class="comment">// 指向 button</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> obj = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">sayHi</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)  <span class="comment">// 指向 obj</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    obj.<span class="title function_">sayHi</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-4-2-箭头函数this指向"><a href="#5-4-2-箭头函数this指向" class="headerlink" title="5.4.2  箭头函数this指向"></a>5.4.2  箭头函数<code>this</code>指向</h3><p>箭头函数中的 this 与普通函数完全不同，也不受调用方式的影响，<strong>事实上箭头函数中并不存在 this</strong> ！</p>
<ol>
<li>箭头函数会默认帮我们绑定外层 this 的值，所以在箭头函数中 this 的值和外层的 this 是一样的</li>
</ol>
<p>2.箭头函数中的this引用的就是最近作用域中的this</p>
<p>3.向外层作用域中，一层一层查找this，直到有this的定义</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217835.png"></p>
<p><strong>注意情况1</strong>：</p>
<p>在开发中【使用箭头函数前需要考虑函数中 this 的值】，事件回调函数使用箭头函数时，this 为全局的 window</p>
<p>因此DOM事件回调函数如果里面需要DOM对象的this，则不推荐使用箭头函数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217711.png"></p>
<p><strong>注意情况2</strong>*：</p>
<p>同样由于箭头函数 this 的原因，基于原型的面向对象也不推荐采用箭头函数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/202407032217556.png"></p>
<h2 id="5-5-改变this指向"><a href="#5-5-改变this指向" class="headerlink" title="5.5  改变this指向"></a>5.5  改变<code>this</code>指向</h2><p>JavaScript 中还允许指定函数中 this 的指向，有 3 个方法可以动态指定普通函数中 this 的指向</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">call()</span><br><span class="line">apply()</span><br><span class="line">bind()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>**1. call()了解 **</p>
<p>使用 call 方法调用函数，同时指定被调用函数中 this 的值</p>
<p>语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.<span class="title function_">call</span>(thisArg, arg1, arg2, ...) </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">thisArg：在 fun 函数运行时指定的 this 值</span><br><span class="line"> arg1，arg2：传递的其他参数</span><br><span class="line"> 返回值就是函数的返回值，因为它就是调用函数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> obj = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">uname</span>: <span class="string">&#x27;zs&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">x, y</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(x + y)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 1. 调用函数  </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 2. 改变 this 指向</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    fn.<span class="title function_">call</span>(obj, <span class="number">1</span>, <span class="number">2</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>总结</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">call的作用是？</span><br><span class="line">调用函数，并可以改变被调用函数里面的this指向</span><br><span class="line">2. call 里面第一个参数是 指定this， 其余是实参，传递的参数</span><br><span class="line">整体做个了解，后期用的很少	</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><em><em>2</em> apply()-理解</em>*</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fun.apply(thisArg, [argsArray])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>（1）<code>thisArg</code>：在fun函数运行时指定的 this 值</p>
<p>(2)<code> argsArray</code>：传递的值，必须包含在数组里面</p>
<p>(3) 返回值就是函数的返回值，因为它就是调用函数</p>
<p>(4)因此 apply 主要跟数组有关系，比如使用<code>Math.max()</code>求数组的最大值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">   <span class="keyword">const</span> obj = &#123;</span><br><span class="line">     <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// &#123;age: 18&#125;</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(x + y)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 1. 调用函数</span></span><br><span class="line">   <span class="comment">// 2. 改变this指向 </span></span><br><span class="line">   <span class="comment">//  fn.apply(this指向谁, 数组参数)</span></span><br><span class="line">   fn.<span class="title function_">apply</span>(obj, [<span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line">   <span class="comment">// 3. 返回值   本身就是在调用函数，所以返回值就是函数的返回值</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// 使用场景： 求数组最大值</span></span><br><span class="line">   <span class="comment">// const max = Math.max(1, 2, 3)</span></span><br><span class="line">   <span class="comment">// console.log(max)</span></span><br><span class="line">   <span class="keyword">const</span> arr = [<span class="number">100</span>, <span class="number">44</span>, <span class="number">77</span>]</span><br><span class="line">   <span class="keyword">const</span> max = <span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="title class_">Math</span>, arr)</span><br><span class="line">   <span class="keyword">const</span> min = <span class="title class_">Math</span>.<span class="property">min</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, arr)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(max, min)</span><br><span class="line">   <span class="comment">// 使用场景： 求数组最大值</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(...arr))</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">call和apply的区别是？</span><br><span class="line">	都是调用函数，都能改变this指向</span><br><span class="line">	参数不一样，apply传递的必须是数组</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>**3. bind()-**<strong>重点</strong></p>
<p><strong>语法：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fun.<span class="title function_">bind</span>(thisArg, arg1, arg2, ...) </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">thisArg：在 fun 函数运行时指定的 this 值</span><br><span class="line"> arg1，arg2：传递的其他参数</span><br><span class="line">返回由指定的 this 值和初始化参数改造的 原函数拷贝 （新函数）</span><br><span class="line"> 因此当我们只是想改变 this 指向，并且不想调用这个函数的时候，可以使用 bind，比如改变定时器内部的this指向. </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>发送短信<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> obj = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">age</span>: <span class="number">18</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 1. bind 不会调用函数 </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 2. 能改变this指向</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 3. 返回值是个函数，  但是这个函数里面的this是更改过的obj</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> fun = fn.<span class="title function_">bind</span>(obj)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// console.log(fun) </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">fun</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 需求，有一个按钮，点击里面就禁用，2秒钟之后开启</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 禁用按钮</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">disabled</span> = <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 在这个普通函数里面，我们要this由原来的window 改为 btn</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">disabled</span> = <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;.<span class="title function_">bind</span>(<span class="variable language_">this</span>), <span class="number">2000</span>)   <span class="comment">// 这里的this 和 btn 一样</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>call apply bind 总结</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">相同点:  </span><br><span class="line">	都可以改变函数内部的this指向.</span><br><span class="line">区别点:  </span><br><span class="line">	call 和 apply  会调用函数, 并且改变函数内部this指向.</span><br><span class="line">	call 和 apply 传递的参数不一样, call 传递参数 aru1, aru2..形式  apply 必须数组形式[arg]</span><br><span class="line">	bind  不会调用函数, 可以改变函数内部this指向.</span><br><span class="line">主要应用场景:  </span><br><span class="line">	call  调用函数并且可以传递参数</span><br><span class="line">	apply 经常跟数组有关系.  比如借助于数学对象实现数组最大值最小值</span><br><span class="line">	bind  不调用函数,但是还想改变this指向. 比如改变定时器内部的this指向. </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="6、模块化"><a href="#6、模块化" class="headerlink" title="6、模块化"></a>6、模块化</h1><h2 id="1、模块化简介"><a href="#1、模块化简介" class="headerlink" title="1、模块化简介"></a>1、模块化简介</h2><p>随着前端的代码量越来越多，那么需要对代码进行管理，而模块化就是代码组织管理的最主流的一种方式，它可以按照不同的功能，将代码划分为不同的功能模块。</p>
<p>模块化只是一种思想</p>
<h2 id="2、模块化演变过程"><a href="#2、模块化演变过程" class="headerlink" title="2、模块化演变过程"></a>2、模块化演变过程</h2><p>在最早期，<code>JavaScript</code>的模块化就是根据<code>文件划分方式</code>来实现的，将不同的功能以及相关的数据存储到不同的文件中，我们约定每一个文件就是一个独立的模块</p>
<p>我们使用这个模块，就是把这个模块引入到页面中。一个<code>script</code>标签对应一个模块</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;a.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">method1</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    username=<span class="string">&quot;zhangsan&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span>   </span><br></pre></td></tr></table></figure>

<p>在使用的时候，直接在代码中调用全局成员，这些全局成员有可能是一个变量，也有可能是一个函数。</p>
<p>这种方式的缺点也非常明显，所有的模块都是在全局的范围内工作，并没有独立的私有空间，这样导致模块内的成员会在模块外被任意的访问或者修改。而且模块多了以后，很容易出现命名冲突的问题，同时也无法管理模块之间的依赖关系。</p>
<p>所以说，早期的模块化完全依靠的是约定，而这种情况在项目增大以后，就会出现各种问题。</p>
<p>下面进入说一下第二阶段：<strong>命名空间方式</strong></p>
<p>我们约定每个模块只暴露一个全局的对象，模块的所有成员都挂载到这个对象的下面。在第一个阶段基础上（也是单独创建一个文件），把每个模块包裹成一个全局对象的方式来实现。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> moduleA=&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">    <span class="attr">method1</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;username:&#x27;</span>,<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用的方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span>       </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;a.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         moduleA.<span class="title function_">method1</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="comment">//模块成员可以被修改</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         moduleA.<span class="property">name</span>=<span class="string">&quot;lisi&quot;</span>   </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>在使用的时候，需要通过全局对象的名称来获取内部成员，这就类似于命名空间的方式。</p>
<p>但是，这种方式仍然没有私有空间，所以说模块内的成员依然可以在模块外被访问修改，另外模块的依赖关系也没有得到解决。</p>
<p>第三阶段：立即执行函数的方式</p>
<p>通过立即执行函数的方式为模块提供私有空间。具体做法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="keyword">function</span>(<span class="params">$</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> name=<span class="string">&quot;zhangsan&quot;</span> <span class="comment">// 该变量只能在当前立即函数中有效</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">method1</span>(<span class="params"></span>)&#123;</span><br><span class="line">        cosnole.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">method2</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;method2&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">moduleA</span>=&#123;</span><br><span class="line">        <span class="attr">method1</span>:method1,</span><br><span class="line">        <span class="attr">method2</span>:method2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(jQuery)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>将模块中的每个成员都放到函数所提供的私有作用域内，对需要暴露给外部的成员，将其挂载到全局对象<code>window</code>中。这种方式实现了私有成员的概念，在外部无法访问模块内的成员。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span>       </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;a.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       moduleA.<span class="title function_">method1</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          moduleA.<span class="title function_">method2</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//模块私有成员无法访问</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    	<span class="variable language_">console</span>.<span class="title function_">log</span>(moduleA.<span class="property">name</span>)<span class="comment">//undefined</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>这种方式，也解决了模块的依赖关系，例如，我们定义的模块需要<code>jQuery</code>,这里就可以直接传递<code>jQuery</code>.</p>
<p>以上方式，就是早期在没有工具和规范的情况下，对模块化的落地方式。</p>
<h2 id="3、模块化规范的出现"><a href="#3、模块化规范的出现" class="headerlink" title="3、模块化规范的出现"></a>3、模块化规范的出现</h2><p>前面介绍的模块化方式，都是通过约定的方式来实现的，这样在实际的应用中会出现相应的一些差异，所以这里就需要有模块化的规范与标准。</p>
<p>同时，前面定义的模块，在使用的时候都是通过<code>srcipt</code>标签的手动方式进行引入的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&#x27;a.js&#x27;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>这也就是说，模块的加载，不受代码的控制。这样维护起来也非常的麻烦，而且还容易出现问题。</p>
<p>例如，在<code>html</code>代码中忘记引入模块，或者是一个模块我们不需要了，但是在<code>html</code>代码中，却还引入该模块，这样都会出问题。</p>
<p>所以，我们需要通过一些代码来帮我们加载模块。</p>
<p>所以说，现在我们需要：</p>
<p>模块化的标准与模块加载的库。</p>
<p>说到模块化规范：首先我们想到的就是<code>CommonJS</code>规范，它是<code>node.js</code>中提到的一个规范。也就是说我们在写<code>Node.js</code>的时候，必须符合<code>CommonJS</code>的规范。</p>
<p>该规范要求：</p>
<ul>
<li>一个文件就是一个模块</li>
<li>每个模块都有单独的作用域</li>
<li>通过<code>module.exports</code>导出成员</li>
<li>通过<code>require</code>函数载入模块</li>
</ul>
<p>如果，我们在浏览端使用<code>CommonJS</code>规范，就会出现问题。而且<code>CommonJS</code>是以同步模式加载模块，因为<code>Node</code>的执行机制是在启动的时候加载模块，执行过程中是不需要加载模块的，所以这种方式在<code>Node</code>中不会出现问题。如果我们在浏览器端使用<code>CommonJS</code>规范，必然会导致效率低下，因为每次页面的加载，都会导致大量的同步请求出现，这样严重的降低了浏览器加载的效率。</p>
<p>所以后来浏览器端没有使用<code>CommonJS</code>规范，而是结合浏览器端的特性，重新设计了一套规范。</p>
<p>这个规范就是<code>AMD(Asynchronous Module Definition)</code>,翻译过来就是异步的模块定义规范。</p>
<p>同期还出现了一个比较著名的库<code>Require.js</code>,它实现了<code>AMD</code>的规范。</p>
<p>它定义模块的方式:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">define</span>(<span class="string">&#x27;module1&#x27;</span>,[<span class="string">&#x27;jquery&#x27;</span>,<span class="string">&#x27;./module2&#x27;</span>],<span class="keyword">function</span>(<span class="params">$,module2</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">start</span>:<span class="title function_">funciton</span>(<span class="params"></span>)&#123;</span><br><span class="line">        $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">animate</span>(&#123;<span class="attr">margin</span>:<span class="string">&#x27;200px&#x27;</span>&#125;)</span><br><span class="line">    	<span class="title function_">module2</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>通过<code>define</code>来定义模块，第一个参数为模块的名字，第二个参数是一个数组，用来声明我们创建的模块所依赖的项。第三个参数是一个函数，函数的参数与前面依赖项一一对应，<code>$</code>对应<code>jquery</code>,<code>module2</code>对应的是<code>./module2</code>.</p>
<p>这个函数的作用就是为当前模块提供一个私有的空间，如果我们需要模块向外部导出一些成员，可以使用<code>return</code>.</p>
<p>同时<code>Require.js</code>中还提供了一个载入模块的方法：<code>require</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;./module1&#x27;</span>],<span class="title function_">funciton</span>(<span class="params">module1</span>)&#123;</span><br><span class="line">module1.<span class="property">start</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>目前绝大多数第三方库都支持<code>AMD</code>规范。但是，<code>AMD</code>使用起来相对复杂。因为除了编写业务代码，还需要写大量的<code>define</code>函数与<code>require</code>函数。</p>
<p>另外，项目中模块划分的过于细致的化，那么在同一个文件中<code>JS</code>文件请求频繁，从而导致页面的效率比较低下。</p>
<p>所以说<code>AMD</code>不能是前端模块化最终的实现方案，仅仅是一个过渡的方案。</p>
<h2 id="4、模块化标准规范"><a href="#4、模块化标准规范" class="headerlink" title="4、模块化标准规范"></a>4、模块化标准规范</h2><p>随着技术的不断发展，模块化的标准越来越规范，现在大家对模块化的最佳实践方式都统一了。</p>
<p>在浏览器端使用<code>ES Modules</code>,在<code>Node.js</code>中使用<code>CommonJS</code></p>
<p>现在最新的浏览器都开始支持<code>ES Module</code>模块化的方式了。所以，我们可以浏览器端直接使用<code>ES Module</code>来实现模块化。</p>
<h2 id="5、ES-Modules-语法"><a href="#5、ES-Modules-语法" class="headerlink" title="5、ES Modules 语法"></a>5、ES Modules 语法</h2><p>下面我们来看一下它的基本使用</p>
<p>通过给<code>script</code>标签添加<code>type=module</code>的属性，就可以以<code>ES Module</code>的标准执行其中的<code>js</code>代码了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&#x27;module&#x27;</span>&gt;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&lt;/script&gt;    </span><br></pre></td></tr></table></figure>

<p>每个<code>ES Module</code>都是运行在单独的私有作用域中的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;module&quot;</span>&gt;</span><br><span class="line">    <span class="keyword">var</span> foo=<span class="number">100</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(foo)</span><br><span class="line">&lt;/script&gt;    </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(foo) <span class="comment">//这里会出现foo未定义的错误</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span>     </span><br></pre></td></tr></table></figure>

<h2 id="6、模块导出"><a href="#6、模块导出" class="headerlink" title="6、模块导出"></a>6、模块导出</h2><p><code>ES Modules</code>的核心功能是模块的导出与导入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./module.js</span></span><br><span class="line"><span class="keyword">const</span> foo=<span class="string">&#x27;es modules&#x27;</span></span><br><span class="line"><span class="keyword">export</span> &#123;foo&#125;</span><br><span class="line"><span class="comment">// ./app.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;foo&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo)</span><br></pre></td></tr></table></figure>

<p>下面，我们演示一下基本的导入与导出。</p>
<p>在目录下面创建<code>app.js</code>，<code>index.html</code>,<code>module.js</code>三个文件。</p>
<p><code>module.js</code>文件中的代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> name=<span class="string">&#x27;lisi&#x27;</span></span><br></pre></td></tr></table></figure>

<p>将<code>name</code>这个变量进行导出，这样在其他的模块中才能访问该变量。</p>
<p><code>app.js</code>文件的代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br></pre></td></tr></table></figure>

<p>进行了导入，并且输出<code>name</code>变量的值</p>
<p><code>index.html</code>文件中的代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ES Module 导出与导入<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;module&#x27;</span> <span class="attr">src</span>=<span class="string">&quot;app.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以通过<code>Live Server</code>启动，来查看运行的效果</p>
<p>在上面的案例中，我们通过<code>export</code>导出了变量，当然也可以导出函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> name=<span class="string">&#x27;lisi&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果以上导出的方式，书写起来比较麻烦，可以采用如下的方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name=<span class="string">&#x27;lisi&#x27;</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">export</span> &#123;name,hello&#125;</span><br></pre></td></tr></table></figure>

<p>最后通过<code>export</code>统一进行导出。</p>
<p>这种方式是使用最多的导出方式，因为这种方式可以让我们更加直观的感受到当前模块到底导出了哪些成员。</p>
<p>当然，通过以上的方式，还可以对导出的成员进行重命名。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> name=<span class="string">&#x27;lisi&#x27;</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  export &#123;name,hello,Person&#125;</span></span><br><span class="line"><span class="keyword">export</span> &#123; name <span class="keyword">as</span> username&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们在导出<code>name</code>的时候通过<code>as</code>关键字将其重命名为<code>username</code>,那么在进行导入的时候就需要使用<code>username</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;username&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(username);</span><br></pre></td></tr></table></figure>

<p>如果我们给<code>export</code>后面添加了<code>default</code>关键字，表示的是默认的导出。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name=<span class="string">&#x27;lisi&#x27;</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  export &#123;name,hello,Person&#125;</span></span><br><span class="line"><span class="comment">// export &#123; name as username&#125;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> name</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，默认导出了<code>name</code>属性。</p>
<p>这时导入的方式如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> username <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(username);</span><br></pre></td></tr></table></figure>

<p>在导入的时候，不需要添加大括号，同时导入的名称是可以随意命名的，例如导出的变量名叫<code>name</code>,但是导入的时候修改成了<code>username</code></p>
<h2 id="7、导入与导出的注意事项"><a href="#7、导入与导出的注意事项" class="headerlink" title="7、导入与导出的注意事项"></a>7、导入与导出的注意事项</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name=<span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="keyword">var</span> age=<span class="number">18</span></span><br><span class="line"><span class="keyword">export</span> &#123;name,age&#125;</span><br></pre></td></tr></table></figure>

<p>在进行导出的时候，注意语法，例如上面我们导出了<code>name</code>与<code>age</code>这两个变量，在这里必须将其放到大括号中，这时它的语法要求，不要认为这里导出的是一个对象。</p>
<p>如果，这里确定需要导出一个对象，可以使用<code>export default</code>的方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;name,age&#125;</span><br></pre></td></tr></table></figure>

<p>下面将<code>module.js</code>文件中的代码修改成如下形式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name=<span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="keyword">var</span> age=<span class="number">18</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;name,age&#125;</span><br></pre></td></tr></table></figure>

<p>如果<code>app.js</code>文件中的导入是如下写法，而这种写法是错误的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name,age&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name,age);</span><br></pre></td></tr></table></figure>

<p>这里，不要把导入的写法理解成解构。这其实是固定的写法。</p>
<p>正确的导入方式如下:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> obj <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>,obj.<span class="property">age</span>);</span><br></pre></td></tr></table></figure>

<p>下面我们再来强调要注意的第二点内容：</p>
<p>在<code>es module</code>中，通过<code>export</code>对成员进行导出的时候，<strong>注意导出的是该成员的引用。</strong></p>
<p>也就是说，在模块内部导出的成员与其它模块中导入的成员是指向了同一个内存的地址。</p>
<p>下面，演示一下</p>
<p>在<code>module.js</code>文件中的代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name=<span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="keyword">var</span> age=<span class="number">18</span></span><br><span class="line"><span class="comment">// export default &#123;name,age&#125;</span></span><br><span class="line"><span class="keyword">export</span> &#123;name,age&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    name=<span class="string">&#x27;lisi&#x27;</span></span><br><span class="line">&#125;,<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<p>在导出<code>name</code>与<code>age</code>成员后，停顿了1秒钟，修改<code>name</code>成员的值。</p>
<p><code>app.js</code>文件中的代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name,age&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name,age);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name,age);</span><br><span class="line">&#125;,<span class="number">1500</span>)</span><br></pre></td></tr></table></figure>

<p>导入<code>name</code>与<code>age</code>成员，然后输出打印，停顿<code>1500</code>毫秒后，重新打印<code>name</code>与<code>age</code>的值，</p>
<p>在<code>app.js</code>文件中，我们没有修改<code>name</code>属性的值，但是在<code>1500</code>毫秒以后，<code>name</code>的值变成了<code>lisi</code>,而对<code>name</code>属性值的修改是在<code>module.js</code>文件中完成的。通过这个例子，我们可以得出的结论就是：通过<code>export</code>对成员进行导出的时候，导出的是该成员的引用，并不是将值进行了拷贝。</p>
<p>第三点：要注意<strong>的时，导出的成员是只读的</strong>。也就是说，如果我们现在在<code>app.js</code>文件中导入了<code>module.js</code>模块中的<code>name</code></p>
<p>和<code>age</code>成员，然后在<code>app.js</code>文件中去修改这两个成员的值的时候，会出现错误。也就说，导入的成员是一个只读的成员</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name,age&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span>;</span><br><span class="line">name=<span class="string">&quot;ssss&quot;</span></span><br></pre></td></tr></table></figure>

<p>以上就是导入与导出要注意的事项。</p>
<h2 id="8、import用法"><a href="#8、import用法" class="headerlink" title="8、import用法"></a>8、import用法</h2><p><code>import</code>中的<code>from</code>后面跟的是一个字符串，表示的是文件的路径，该路径必须是一个完整的路径。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name&#125; <span class="keyword">from</span> <span class="string">&#x27;./module&#x27;</span></span><br></pre></td></tr></table></figure>

<p>以上的写法是错误的，必须添加<code>js</code>后缀。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span></span><br></pre></td></tr></table></figure>

<p>如果某个目录下面有<code>index.js</code>文件，在进行导入的时候，也需要写完整。例如，如下写法错误</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;age&#125; <span class="keyword">from</span> <span class="string">&#x27;./utils&#x27;</span></span><br></pre></td></tr></table></figure>

<p>正确的写法如下:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;age&#125; <span class="keyword">from</span> <span class="string">&#x27;./utils/index.js&#x27;</span></span><br></pre></td></tr></table></figure>

<p>当我们后面使用一些打包工具，来打包模块的时候，就可以省略扩展名和默认文件的情况。</p>
<p>下面还要注意的就是相对路径中的<code>.</code>不能省略，如下写法是错误的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name&#125; <span class="keyword">from</span> <span class="string">&#x27;module.js&#x27;</span></span><br></pre></td></tr></table></figure>

<p>以上写法是错误的，这种写法默认的是加载第三方模块。</p>
<p>当然也可以使用绝对路径</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name,age&#125; <span class="keyword">from</span> <span class="string">&#x27;/module.js&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>也可以使用完整的<code>url</code>的方式，这样就可以引用<code>cdn</code>上的模块。</p>
<p>以上就是在导入模块的时候，关于路径的问题。</p>
<p>如果，<strong>我们只是需要执行某个模块，而不需要提取这个模块中的成员</strong>，可以采用如下的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span></span><br></pre></td></tr></table></figure>

<p>以上表明只是执行<code>module</code>这个模块，并不提取这个模块中的成员。</p>
<p>也可以采用如下简写的方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./module.js&#x27;</span></span><br></pre></td></tr></table></figure>

<p>下面，我们再来看第三种情况，如果某个模块中导出的成员比较多，而且现在我们都需要这些导出的成员，那么再进行导入的时候，为了书写的简单方便，可以采用如下的方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> mod <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mod.<span class="property">name</span>)</span><br></pre></td></tr></table></figure>

<p>首先<code>import</code>后面跟了一个星号，然后在星号后面跟了一个关键字<code>as</code>，将导入的全部成员放到一个对象中。这样导出的成员都会作为这个对象的属性而存在。</p>
<p>下面，我们看一下第四点情况。</p>
<p>当我们通过<code>import</code>进行模块导入的时候，必须明确指定导入模块的路径。</p>
<p>但是，在有的情况下，我们所导入的模块的路径是在运行的情况下才确定的，那么你可能会想到使用如下的方式进行导入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> modulePath=<span class="string">&#x27;./module.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;name&#125; <span class="keyword">from</span> modulePath</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br></pre></td></tr></table></figure>

<p>以上的写法是错误的，也就是说我们不能通过<code>import</code> ，<code>from</code>后面跟着一个变量。</p>
<p>还有一种情况，就是我们想在某个判断条件成立后，才去导入某个模块，所以你会想到如下的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">    <span class="keyword">import</span> &#123;name&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上的写法也是错误的，<strong>因为<code>import</code>这个关键字只能出现在最顶层，并不能嵌套在<code>if</code>或者是函数中。</strong></p>
<p>如果，现在你遇到了以上两种情况，那么可以通过动态导入模块的方式来进行解决。写法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./module.js&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在以上的写法中，将<code>import</code>作为一个函数来使用，这样可以在任何的位置去调用该函数来导入相应的模块。而且<code>import</code>函数返回的是一个<code>promise</code>,而且我们知道模块加载是一个异步的过程，这时当模块加载完成后，会执行后面的<code>then</code>函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./module.js&#x27;</span>).<span class="title function_">then</span>(<span class="title function_">funciton</span>(<span class="params"><span class="variable language_">module</span></span>)&#123;</span><br><span class="line">  	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>)                       </span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>



<p>下面我们来看第五点: 就是在导出模块的时候，我们导出了一个命名的成员，又导出了一个默认的成员。</p>
<p>如下代码所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name=<span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="keyword">var</span> age=<span class="number">18</span></span><br><span class="line"><span class="keyword">export</span> &#123;name,age&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">&#x27;hello world&#x27;</span></span><br></pre></td></tr></table></figure>

<p>在进行导入的时候，可以采用如下的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> title,&#123;name,age&#125; <span class="keyword">from</span> <span class="string">&#x27;./module.js&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(title,age,name);</span><br></pre></td></tr></table></figure>

<p><code>import</code>后面跟的<code>title</code>是起了一个别名（这个名字可以随便起），用来接收默认的导入的成员，大括号中的内容，用来接收命名的导出的成员。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://www.kilgour.top">kilgour</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.kilgour.top/2024/07/03/%E8%80%81%E7%8E%8B-10%E3%80%81JavaScript%E9%AB%98%E7%BA%A7/">http://www.kilgour.top/2024/07/03/%E8%80%81%E7%8E%8B-10%E3%80%81JavaScript%E9%AB%98%E7%BA%A7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.kilgour.top" target="_blank">Kilgour Notes</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover2.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/07/%E8%80%81%E7%8E%8B-11%E3%80%81MVC/" title=""><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover6.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2024/07/01/%E8%80%81%E7%8E%8B-9%E3%80%81Web-APIs/" title="Web APIs"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/kilg0ur/picture/master/picture/cover14.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Web APIs</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/5.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">kilgour</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">35</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kilg0ur"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript%E9%AB%98%E7%BA%A7"><span class="toc-number">1.</span> <span class="toc-text">JavaScript高级</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">2.</span> <span class="toc-text">1、作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%B1%80%E9%83%A8%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">2.1.</span> <span class="toc-text">1.1  局部作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E5%85%A8%E5%B1%80%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">2.2.</span> <span class="toc-text">1.2  全局作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 作用域链</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E9%97%AD%E5%8C%85"><span class="toc-number">2.4.</span> <span class="toc-text">1.4 闭包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87"><span class="toc-number">2.5.</span> <span class="toc-text">1.5 变量提升</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E3%80%81%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6"><span class="toc-number">3.</span> <span class="toc-text">2、函数进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%87%BD%E6%95%B0%E6%8F%90%E5%8D%87"><span class="toc-number">3.1.</span> <span class="toc-text">2.1  函数提升</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 函数参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E5%8A%A8%E6%80%81%E5%8F%82%E6%95%B0"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.2.1 动态参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E5%89%A9%E4%BD%99%E5%8F%82%E6%95%B0"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2.2 剩余参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.2.3  展开运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">3.3.</span> <span class="toc-text">2.3  箭头函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">3.3.1.</span> <span class="toc-text">2.3.1  基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">3.3.2.</span> <span class="toc-text">2.3.2  箭头函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0this"><span class="toc-number">3.3.3.</span> <span class="toc-text">2.3.3 箭头函数this</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E3%80%81%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC"><span class="toc-number">4.</span> <span class="toc-text">3、解构赋值</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E6%95%B0%E7%BB%84%E8%A7%A3%E6%9E%84"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 数组解构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E5%AF%B9%E8%B1%A1%E8%A7%A3%E6%9E%84"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 对象解构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84-forEach-%E6%96%B9%E6%B3%95"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 遍历数组 forEach 方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E7%AD%9B%E9%80%89%E6%95%B0%E7%BB%84-filter-%E6%96%B9%E6%B3%95"><span class="toc-number">4.4.</span> <span class="toc-text">3.4 筛选数组 filter 方法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4%E3%80%81%E5%AF%B9%E8%B1%A1%E6%B7%B1%E5%85%A5"><span class="toc-number">5.</span> <span class="toc-text">4、对象深入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">5.1.</span> <span class="toc-text">4.1  创建对象三种方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%AE%9E%E4%BE%8B%E6%88%90%E5%91%98-amp-%E9%9D%99%E6%80%81%E6%88%90%E5%91%98"><span class="toc-number">5.2.</span> <span class="toc-text">4.2  实例成员&amp;静态成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E5%86%85%E7%BD%AE%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">5.3.</span> <span class="toc-text">4.3  内置构造函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-Object"><span class="toc-number">5.3.1.</span> <span class="toc-text">4.3.1 Object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-Array"><span class="toc-number">5.3.2.</span> <span class="toc-text">4.3.2 Array</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-3-String"><span class="toc-number">5.3.3.</span> <span class="toc-text">4.3.3 String</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E5%8E%9F%E5%9E%8B"><span class="toc-number">5.4.</span> <span class="toc-text">4.4  原型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-this%E6%8C%87%E5%90%91"><span class="toc-number">5.4.1.</span> <span class="toc-text">4.4.1  this指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-%E7%BB%99%E6%95%B0%E7%BB%84%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95"><span class="toc-number">5.4.2.</span> <span class="toc-text">4.4.2  给数组扩展方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-3-constructor-%E5%B1%9E%E6%80%A7"><span class="toc-number">5.4.3.</span> <span class="toc-text">4.4.3  constructor 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-4-%E6%80%9D%E8%80%83"><span class="toc-number">5.4.4.</span> <span class="toc-text">4.4.4  思考</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-5-%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%9E%8B"><span class="toc-number">5.4.5.</span> <span class="toc-text">4.4.5  对象原型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-6-%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF"><span class="toc-number">5.4.6.</span> <span class="toc-text">4.4.6 原型继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-7-%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">5.4.7.</span> <span class="toc-text">4.4.7 原型链</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5%E3%80%81%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7"><span class="toc-number">6.</span> <span class="toc-text">5、高级技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">6.1.</span> <span class="toc-text">5.1  深浅拷贝</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">6.2.</span> <span class="toc-text">5.2  深拷贝</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">6.3.</span> <span class="toc-text">5.3 异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-this%E6%8C%87%E5%90%91"><span class="toc-number">6.4.</span> <span class="toc-text">5.4 this指向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0this%E6%8C%87%E5%90%91"><span class="toc-number">6.4.1.</span> <span class="toc-text">5.4.1  普通函数this指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0this%E6%8C%87%E5%90%91"><span class="toc-number">6.4.2.</span> <span class="toc-text">5.4.2  箭头函数this指向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E6%94%B9%E5%8F%98this%E6%8C%87%E5%90%91"><span class="toc-number">6.5.</span> <span class="toc-text">5.5  改变this指向</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">6、模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E7%AE%80%E4%BB%8B"><span class="toc-number">7.1.</span> <span class="toc-text">1、模块化简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E6%BC%94%E5%8F%98%E8%BF%87%E7%A8%8B"><span class="toc-number">7.2.</span> <span class="toc-text">2、模块化演变过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83%E7%9A%84%E5%87%BA%E7%8E%B0"><span class="toc-number">7.3.</span> <span class="toc-text">3、模块化规范的出现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E6%A0%87%E5%87%86%E8%A7%84%E8%8C%83"><span class="toc-number">7.4.</span> <span class="toc-text">4、模块化标准规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81ES-Modules-%E8%AF%AD%E6%B3%95"><span class="toc-number">7.5.</span> <span class="toc-text">5、ES Modules 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E6%A8%A1%E5%9D%97%E5%AF%BC%E5%87%BA"><span class="toc-number">7.6.</span> <span class="toc-text">6、模块导出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E5%AF%BC%E5%85%A5%E4%B8%8E%E5%AF%BC%E5%87%BA%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">7.7.</span> <span class="toc-text">7、导入与导出的注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81import%E7%94%A8%E6%B3%95"><span class="toc-number">7.8.</span> <span class="toc-text">8、import用法</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By kilgour</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">2</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><!-- hexo injector body_end end --></body></html>